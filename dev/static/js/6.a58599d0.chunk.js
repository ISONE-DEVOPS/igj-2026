(this["webpackJsonpigj-frontend"]=this["webpackJsonpigj-frontend"]||[]).push([[6],{822:function(e,t,a){"use strict";var s=a(0),o=a(814),l=a(404),c=a(403),i=a(812),n=a(7),r=a(30),d=a(26),j=a(1);t.a=e=>{let{generolist:t,estadocivillist:a,glbgeografialist:u,documentolist:p,contactolist:O,uploadpessoa:b,pessoaopenDO:h}=e;const{popUp_alertaOK:m}=Object(d.a)(),[x,g]=Object(s.useState)(!1),[f,v]=Object(s.useState)(""),[y,D]=Object(s.useState)(""),[N,C]=Object(s.useState)(""),[I,S]=Object(s.useState)(""),[A,E]=Object(s.useState)(""),[_,T]=Object(s.useState)(""),[R,w]=Object(s.useState)(""),[P,L]=Object(s.useState)(""),[F,k]=Object(s.useState)(""),[B,U]=Object(s.useState)(""),[G,M]=Object(s.useState)(""),[q,H]=Object(s.useState)(""),[V,z]=Object(s.useState)(""),[X,J]=Object(s.useState)(""),[W,K]=Object(s.useState)(""),[Q,Z]=Object(s.useState)(!1),[Y,$]=Object(s.useState)(!1),[ee,te]=Object(s.useState)(""),[ae,se]=Object(s.useState)(""),[oe,le]=Object(s.useState)("");Object(s.useEffect)(()=>{D(""),C(""),S(""),E(""),T(""),w(""),L(""),k(""),U(""),M(""),H(""),z(""),J(""),K(""),te(""),se(""),le(""),g(!0),ie("geral"),je([{id:""+Math.random(),tipocontacto:"",contacto:""}]),be([{id:""+Math.random(),tipodocumento:"",numero:"",dataemissao:"",datavalidade:"",anexo:{type:0,file:null}}]),g(h.value)},[h]);const[ce,ie]=Object(s.useState)("geral"),ne="nav-link text-reset",re="nav-link text-reset active";var[de,je]=Object(s.useState)([{id:""+Math.random(),tipocontacto:"",contacto:""}]);const[ue,pe]=Object(s.useState)(!1);var[Oe,be]=Object(s.useState)([{id:""+Math.random(),tipodocumento:"",numero:"",dataemissao:"",datavalidade:"",anexo:{type:0,file:null}}]);const[he,me]=Object(s.useState)(!1);async function xe(e){var t={status:!1,file:null};try{const a=new FormData;a.append("file",e);const s={headers:{"content-type":"multipart/form-data"}},o=await r.a.post("/upload",a,s);t={status:!0,file:o},console.log(o)}catch(a){console.error(a.response),t={status:!1,file:null}}return t}return Object(j.jsxs)(o.a,{size:"lg",show:x,onHide:()=>g(!1),children:[Object(j.jsx)(o.a.Header,{style:{border:"0"},closeButton:!0,children:Object(j.jsx)(o.a.Title,{as:"h5",children:"Criar Pessoal"})}),Object(j.jsxs)("ul",{className:"nav nav-tabs profile-tabs nav-fill",id:"myTab",role:"tablist",children:[Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsxs)(n.b,{to:"#",className:"geral"===ce?re:ne,onClick:()=>{ie("geral")},id:"profile-tab",children:[Object(j.jsx)("i",{className:"feather icon-user mr-2"}),"Perfil"]})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsxs)(n.b,{to:"#",className:"contactos"===ce?re:ne,onClick:()=>{ie("contactos")},id:"contact-tab",children:[Object(j.jsx)("i",{className:"feather icon-phone mr-2"}),"Contactos"]})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsxs)(n.b,{to:"#",className:"documentos"===ce?re:ne,onClick:()=>{ie("documentos")},id:"contact-tab",children:[Object(j.jsx)("i",{className:"feather icon-file-text mr-2"}),"Documentos"]})})]}),Object(j.jsxs)(o.a.Body,{style:"documentos"===ce?{}:{display:"none"},children:[Object(j.jsx)(l.a,{style:{display:"flex",justifyContent:"flex-end"},sm:12,children:Object(j.jsx)(c.a,{onClick:()=>{be(Oe.concat([{id:""+Math.random(),tipodocumento:"",numero:"",dataemissao:"",datavalidade:"",anexo:{type:0,file:null}}]))},variant:"primary",children:"+"})}),Oe.map(e=>{var t;return Object(j.jsxs)(i.a,{style:{marginBottom:"12px"},children:[Object(j.jsx)(l.a,{sm:10,children:Object(j.jsxs)(i.a,{children:[Object(j.jsx)(l.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"Phone",children:["Tipo de Documentos ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{onChange:t=>{!function(e,t){"cni"===p.find(t=>t.ID===e).DESIG.toLowerCase()?$(!0):$(!1);const a=Oe.findIndex(e=>e.id===t);Oe[a]={id:t,tipodocumento:e,numero:Oe[a].numero,dataemissao:Oe[a].dataemissao,datavalidade:Oe[a].datavalidade,anexo:Oe[a].anexo},me(!0),be(Oe.concat([]))}(t.target.value,e.id)},className:"form-control",id:"perfil",required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),p.map(e=>Object(j.jsx)("option",{value:e.ID,children:e.DESIG},e.ID))]})]})}),Object(j.jsx)(l.a,{sm:3,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["N\xfamero ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsx)("input",{onChange:t=>{!function(e,t){const a=Oe.findIndex(e=>e.id===t);Oe[a]={id:t,numero:e,tipodocumento:Oe[a].tipodocumento,dataemissao:Oe[a].dataemissao,datavalidade:Oe[a].datavalidade,anexo:Oe[a].anexo},me(!0),be(Oe.concat([]))}(t.target.value,e.id)},type:"text",className:"form-control"})]})}),Object(j.jsxs)("div",{className:"sm-2 paddinhtop28OnlyPC",children:[Object(j.jsxs)("label",{htmlFor:"anexarcriar"+e.id,className:"btn",style:{backgroundColor:"#d2b32a",color:"#fff"},children:[null==(null===e||void 0===e||null===(t=e.anexo)||void 0===t?void 0:t.file)?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("i",{className:"feather icon-download"}),Object(j.jsx)(j.Fragment,{children:" Anexar"})]}):"Anexado"," "]}),Object(j.jsx)("input",{id:"anexarcriar"+e.id,onChange:t=>function(e,t){const a=Oe.findIndex(e=>e.id===t);console.log(Oe[a]),console.log(t),""!=Oe[a].tipodocumento&&""!=Oe[a].numero||m("Preencha o campos obrigat\xf3rios"),Oe[a]={id:t,tipodocumento:Oe[a].tipodocumento,dataemissao:Oe[a].dataemissao,datavalidade:Oe[a].datavalidade,numero:Oe[a].numero,anexo:{type:2,file:e}},me(!0),be(Oe.concat([]))}(t.target.files[0],e.id),accept:"image/x-png,image/jpeg",style:{display:"none"},type:"file"})]}),Y?null:Object(j.jsx)(l.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsx)("label",{className:"floating-label",htmlFor:"date",children:"Data de Emiss\xe3o"}),Object(j.jsx)("input",{onChange:t=>{!function(e,t){const a=Oe.findIndex(e=>e.id===t);Oe[a]={id:t,dataemissao:e,numero:Oe[a].numero,tipodocumento:Oe[a].tipodocumento,datavalidade:Oe[a].datavalidade,anexo:Oe[a].anexo},me(!0),be(Oe.concat([]))}(t.target.value,e.id)},type:"date",className:"form-control"})]})}),Object(j.jsx)(l.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsx)("label",{className:"floating-label",htmlFor:"text",children:"Data de Validade"}),Object(j.jsx)("input",{onChange:t=>{!function(e,t){const a=Oe.findIndex(e=>e.id===t);Oe[a]={id:t,datavalidade:e,numero:Oe[a].numero,tipodocumento:Oe[a].tipodocumento,dataemissao:Oe[a].dataemissao,anexo:Oe[a].anexo},me(!0),be(Oe.concat([]))}(t.target.value,e.id)},type:"date",className:"form-control"})]})})]})}),Oe.length>1?Object(j.jsx)("div",{className:"paddinhtop66OnlyPC sm-2",children:Object(j.jsx)(c.a,{onClick:()=>function(e){if(Oe.length>1){const a=Oe.findIndex(t=>t.id===e);if(a>-1){var t=Oe;t.splice(a,1),be(t.concat([])),me(!0)}}}(e.id),variant:"danger",children:Object(j.jsx)("i",{className:"feather icon-trash-2"})})}):null]},e.id)})]}),Object(j.jsxs)(o.a.Body,{style:"contactos"===ce?{}:{display:"none"},children:[Object(j.jsx)(l.a,{style:{display:"flex",justifyContent:"flex-end"},sm:12,children:Object(j.jsx)(c.a,{onClick:()=>{je(de.concat([{id:""+Math.random(),tipocontacto:"",contacto:""}]))},variant:"primary",children:"+"})}),de.map(e=>Object(j.jsxs)(i.a,{style:{marginBottom:"12px"},children:[Object(j.jsx)(l.a,{sm:5,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"Phone",children:["Tipo de Contacto ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{onChange:t=>{!function(e,t){const a=de.findIndex(e=>e.id===t);de[a]={id:t,tipocontacto:e,contacto:de[a].contacto},pe(!0),je(de.concat([]))}(t.target.value,e.id)},className:"form-control",id:"perfil",required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),O.map(e=>Object(j.jsx)("option",{value:e.ID,children:e.DESIG},e.ID))]})]})}),Object(j.jsx)(l.a,{sm:5,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["Contacto ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsx)("input",{maxLength:"128",onChange:t=>{!function(e,t){const a=de.findIndex(e=>e.id===t);de[a]={id:t,contacto:e,tipocontacto:de[a].tipocontacto},pe(!0),je(de.concat([]))}(t.target.value,e.id)},type:"text",className:"form-control"})]})}),de.length>1?Object(j.jsx)("div",{className:"sm-2 paddinhtop28OnlyPC",children:Object(j.jsx)(c.a,{onClick:()=>function(e){if(de.length>1){const a=de.findIndex(t=>t.id===e);if(a>-1){var t=de;t.splice(a,1),je(t.concat([])),pe(!0)}}}(e.id),variant:"danger",children:Object(j.jsx)("i",{className:"feather icon-trash-2"})})}):null]},e.id))]}),Object(j.jsx)(o.a.Body,{style:"geral"===ce?{}:{display:"none"},children:Object(j.jsx)("form",{id:"criarpessoa",onSubmit:async function(e){e.preventDefault(),console.log(N);const t={NACIONALIDADE_ID:N,LOCALIDADE_ID:I,PR_ESTADO_CIVIL_ID:A,PR_GENERO_ID:_,NOME:R,DT_NASC:P,ALCUNHA:F,NOME_PAI:B,NOME_MAE:G,OBS:q,ENDERECO:V,ENDERECO_COORD:X,NIF:Q?"":W};console.log(t);try{const e=await r.a.post("/sgigjpessoa",t);if("200"==e.status){for(let t=0;t<de.length;t++)if(""!=de[t].tipocontacto&&""!=de[t].contacto){console.log(de);const a={PESSOA_ID:e.data.ID,PR_CONTACTO_TP_ID:de[t].tipocontacto,CONTACTO:de[t].contacto};try{await r.a.post("/sgigjrelcontacto",a)}catch(s){console.error(s.response)}}for(let t=0;t<Oe.length;t++)if(""!=Oe[t].tipodocumento&&""!=Oe[t].numero){console.log(Oe);var a="";if("2"==Oe[t].anexo.type){a=(await xe(Oe[t].anexo.file)).file.data}console.log(a);const o={PESSOA_ID:e.data.ID,PR_DOCUMENTO_TP_ID:Oe[t].tipodocumento,NUMERO:Oe[t].numero,DOC_URL:a,DT_EMISSAO:Oe[t].dataemissao,DT_VALIDADE:Oe[t].datavalidade};try{await r.a.post("/sgigjreldocumento",o)}catch(s){console.error(s.response)}}b(),g(!1)}}catch(s){try{console.error(s),console.error(s.response),"3058"==s.response.data.code&&m("Esse NIF j\xe1 existe")}catch(o){console.error(o)}}},children:Object(j.jsxs)(i.a,{children:[Object(j.jsx)(l.a,{sm:3,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["C\xf3digo ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsx)("input",{disabled:!0,value:"0003",type:"text",className:"form-control",id:"Name"})]})}),Object(j.jsx)(l.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"Email",children:["Nome ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsx)("input",{maxLength:"256",type:"text",onChange:e=>{w(e.target.value)},className:"form-control",id:"Nome ",placeholder:"Nome",required:!0})]})}),Object(j.jsx)(l.a,{sm:3,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsx)("label",{className:"floating-label",htmlFor:"text",children:"Alcunha"}),Object(j.jsx)("input",{type:"text",maxLength:"75",onChange:e=>{k(e.target.value)},className:"form-control",id:"alcunga",placeholder:"Alcunha..."})]})}),Object(j.jsx)(l.a,{sm:4,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"Phone",children:["G\xeanero ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{className:"form-control",onChange:e=>{T(e.target.value)},id:"perfil",required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),t.map(e=>Object(j.jsx)("option",{value:e.ID,children:e.DESIG},e.ID))]})]})}),Object(j.jsx)(l.a,{sm:4,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"Phone",children:["Estado civil ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{className:"form-control",onChange:e=>{E(e.target.value)},id:"perfil",required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),a.map(e=>Object(j.jsx)("option",{value:e.ID,children:e.DESIG},e.ID))]})]})}),Object(j.jsx)(l.a,{sm:4,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"date",children:["Data Nascimento ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsx)("input",{type:"date",onChange:e=>{L(e.target.value)},className:"form-control",id:"data",required:!0})]})}),Object(j.jsx)(l.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsx)("label",{className:"floating-label",htmlFor:"text",children:"Nome Pai"}),Object(j.jsx)("input",{type:"text",maxLength:"128",onChange:e=>{U(e.target.value)},className:"form-control",id:"pai",placeholder:"Nome Pai..."})]})}),Object(j.jsx)(l.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsx)("label",{className:"floating-label",htmlFor:"text",children:"Nome M\xe3e"}),Object(j.jsx)("input",{type:"text",maxLength:"128",onChange:e=>{M(e.target.value)},className:"form-control",id:"mae",placeholder:"Nome Mae..."})]})}),Object(j.jsx)(l.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["Nacionalidade ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{onChange:e=>{C(e.target.value)},className:"form-control",id:"perfil",required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),u.map(e=>"-1"==e.NIVEL_DETALHE?Object(j.jsx)("option",{value:e.ID,children:e.NACIONALIDADE},e.ID):null)]})]})}),Object(j.jsx)(l.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsx)("label",{className:"floating-label",htmlFor:"text",children:"Coordenadas"}),Object(j.jsx)("input",{type:"text",maxLength:"50",onChange:e=>{J(e.target.value)},className:"form-control",id:"coordenada",placeholder:"Endereco Coord..."})]})}),Object(j.jsx)("div",{className:"col-sm-6",children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsx)("label",{className:"floating-label",htmlFor:"Address",children:"Endere\xe7o"}),Object(j.jsx)("textarea",{className:"form-control",maxLength:"64000",onChange:e=>{z(e.target.value)},id:"endereco",rows:"3",placeholder:"Endere\xe7o..."})]})}),Object(j.jsx)(l.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["NIF ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Q?Object(j.jsx)("input",{readOnly:"readOnly",type:"text",maxLength:"9",onChange:e=>{K(e.target.value)},className:"form-control",id:"nif",placeholder:"NIF..."}):Object(j.jsx)("input",{type:"text",maxLength:"9",required:!0,onChange:e=>{K(e.target.value)},className:"form-control",id:"nif",placeholder:"NIF..."}),Object(j.jsxs)("div",{className:" fill mt-2 input-box",children:[Object(j.jsx)("input",{type:"checkbox",name:"",id:"",onChange:e=>Z(e.target.checked)}),Object(j.jsx)("label",{className:"floating-label ml-3",htmlFor:"Name",children:"Sem NIF "})]})]})}),Object(j.jsx)(l.a,{sm:3,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["Ilha ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{className:"form-control",id:"perfil",onChange:e=>{var t;t=e.target.value,te(t),se(""),le(""),S("")},required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),u.map(e=>"2"==e.NIVEL_DETALHE?Object(j.jsx)("option",{value:e.ID,children:e.ILHA},e.ID):null)]})]})}),Object(j.jsx)(l.a,{sm:3,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["Concelho ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{className:"form-control",id:"perfil",onChange:e=>{var t;t=e.target.value,se(t),le(""),S("")},required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),u.map(e=>"3"==e.NIVEL_DETALHE&&e.GLB_GEOG_ID==ee?Object(j.jsx)("option",{value:e.ID,children:e.CONCELHO},e.ID):null)]})]})}),Object(j.jsx)(l.a,{sm:3,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["Fregu\xeasia ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{className:"form-control",id:"perfil",onChange:e=>{var t;t=e.target.value,le(t),S("")},required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),u.map(e=>"4"==e.NIVEL_DETALHE&&e.GLB_GEOG_ID==ae?Object(j.jsx)("option",{value:e.ID,children:e.FREGUESIA},e.ID):null)]})]})}),Object(j.jsx)(l.a,{sm:3,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["Localidade",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{onChange:e=>{S(e.target.value)},className:"form-control",id:"perfil",required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),u.map(e=>"5"==e.NIVEL_DETALHE&&e.GLB_GEOG_ID==oe?Object(j.jsx)("option",{value:e.ID,children:e.NOME},e.ID):null)]})]})}),Object(j.jsx)("div",{className:"col-sm-12",children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsx)("label",{className:"floating-label",htmlFor:"Address",children:"Obs"}),Object(j.jsx)("textarea",{className:"form-control",maxLength:"64000",onChange:e=>{H(e.target.value)},id:"Address",rows:"3",placeholder:"Obs..."})]})})]})})}),Object(j.jsxs)(o.a.Footer,{children:[Object(j.jsx)(c.a,{variant:"danger",onClick:()=>g(!1),children:"Fechar"}),Object(j.jsx)(c.a,{type:"submit",form:"criarpessoa",variant:"primary",children:"Guardar"})]})]})}},823:function(e,t,a){"use strict";var s=a(0),o=a(404),l=a(403),c=a(812),i=a(818),n=a(30),r=a(26),d=a(1);t.a=e=>{let{documentolist:t,list:a,save:j,item:u,onSendData:p,hidden:O,required:b}=e;const{popUp_alertaOK:h}=Object(r.a)(),[m,x]=Object(s.useState)(!1);var[g,f]=Object(s.useState)([{id:""+Math.random(),tipodocumento:"",numero:"",dataemissao:"",datavalidade:"",anexo:{type:0,file:null}}]);async function v(e){var t={status:!1,file:null};try{const a=new FormData;a.append("file",e);const s={headers:{"content-type":"multipart/form-data"}},o=await n.a.post("/upload",a,s);t={status:!0,file:o},console.log(o)}catch(a){console.error(a),t={status:!1,file:null}}return t}Object(s.useEffect)(()=>{if(0==a.length)x(!0),f([{id:""+Math.random(),tipodocumento:"",numero:"",dataemissao:"",datavalidade:"",anexo:{type:0,file:null}}]);else{x(!1);let e=[];for(let t=0;t<a.length;t++){const s=null!=a[t].DT_EMISSAO?a[t].DT_EMISSAO.substring(0,10):"",o=null!=a[t].DT_VALIDADE?a[t].DT_VALIDADE.substring(0,10):"";e.push({id:""+a[t].ID,tipodocumento:a[t].PR_DOCUMENTO_TP_ID,numero:a[t].NUMERO,dataemissao:s,datavalidade:o,anexo:{type:1,file:a[t].DOC_URL}})}f(e.concat([])),p&&p(g)}console.log(a)},[a]),Object(s.useEffect)(()=>{console.log("ssssssssssssss"+j),""!=u.ID&&null!=u.ID&&async function(){if(1==m){const a=await n.a.delete("/sgigjreldocumento/0?"+(null===u||void 0===u?void 0:u.ENTIDADE)+"="+(null===u||void 0===u?void 0:u.ID));if(console.log(a.status),"200"==a.status||"204"==a.status){console.log(a);for(let a=0;a<g.length;a++)if(""!=g[a].tipodocumento&&(!O&&""!=g[a].numero||O)){console.log(g);var e="";"1"==g[a].anexo.type&&(e=g[a].anexo.file),"2"==g[a].anexo.type&&(e=(await v(g[a].anexo.file)).file.data),console.log(e);const s={[null===u||void 0===u?void 0:u.ENTIDADE]:null===u||void 0===u?void 0:u.ID,PR_DOCUMENTO_TP_ID:g[a].tipodocumento,NUMERO:O?1:g[a].numero,DOC_URL:e,DT_EMISSAO:g[a].dataemissao,DT_VALIDADE:g[a].datavalidade};try{await n.a.post("/sgigjreldocumento",s)}catch(t){console.error(t.response)}}}}}()},[j]);const[y,D]=Object(s.useState)(0);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(o.a,{style:{display:"flex",justifyContent:"flex-end"},sm:12,children:Object(d.jsx)(l.a,{onClick:()=>(f(g.concat([{id:""+Math.random(),tipodocumento:"",numero:"",dataemissao:"",datavalidade:"",anexo:{type:0,file:null}}])),void(p&&p(g))),variant:"primary",children:"+"})}),g.map((e,a)=>{var s;if(a==y)return Object(d.jsxs)(c.a,{style:{marginBottom:"12px"},children:[Object(d.jsx)(o.a,{sm:10,children:Object(d.jsxs)(c.a,{children:[Object(d.jsx)(o.a,{sm:6,children:Object(d.jsxs)("div",{className:"form-group fill",children:[Object(d.jsxs)("label",{className:"floating-label",htmlFor:"Phone",children:["Tipo de Documentos"," ",b&&Object(d.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(d.jsxs)("select",{defaultValue:e.tipodocumento,onChange:t=>{!function(e,t){const a=g.findIndex(e=>e.id===t);g[a]={id:t,tipodocumento:e,numero:g[a].numero,dataemissao:g[a].dataemissao,datavalidade:g[a].datavalidade,anexo:g[a].anexo},x(!0),f(g.concat([])),p&&p(g)}(t.target.value,e.id)},className:"form-control",id:"perfil",required:b,"aria-required":"true",children:[Object(d.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),t.map(e=>Object(d.jsx)("option",{value:e.ID,children:e.DESIG},e.ID))]})]})}),!O&&Object(d.jsx)(o.a,{sm:3,children:Object(d.jsxs)("div",{className:"form-group fill",children:[Object(d.jsx)("label",{className:"floating-label",htmlFor:"text",children:"N\xfamero   "}),Object(d.jsx)("input",{defaultValue:e.numero,onChange:t=>{!function(e,t){const a=g.findIndex(e=>e.id===t);g[a]={id:t,numero:e,tipodocumento:g[a].tipodocumento,dataemissao:g[a].dataemissao,datavalidade:g[a].datavalidade,anexo:g[a].anexo},x(!0),f(g.concat([])),p&&p(g)}(t.target.value,e.id)},type:"text",className:"form-control"})]})}),Object(d.jsxs)("div",{className:"sm-2 paddinhtop28OnlyPC",children:[Object(d.jsxs)("label",{htmlFor:"anexareditar"+e.id,className:"btn",style:{backgroundColor:"#d2b32a",color:"#fff"},children:[null==(null===e||void 0===e||null===(s=e.anexo)||void 0===s?void 0:s.file)?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("i",{className:"feather icon-download"}),Object(d.jsx)(d.Fragment,{children:" Anexar"})]}):"Anexado"," "]}),Object(d.jsx)("input",{id:"anexareditar"+e.id,style:{display:"none"},onChange:t=>function(e,t,a){const s=g.findIndex(e=>e.id===t);if(console.log(g[s]),console.log(t),""==g[s].tipodocumento)return h("Preencha o campos obrigat\xf3rios"),void(a.target.value="");g[s]={id:t,tipodocumento:g[s].tipodocumento,dataemissao:g[s].dataemissao,datavalidade:g[s].datavalidade,numero:g[s].numero,anexo:{type:2,file:e}},x(!0),f(g.concat([])),p&&p(g)}(t.target.files[0],e.id,t),accept:O?void 0:"image/x-png,image/jpeg,.mp4",type:"file"})]}),!O&&Object(d.jsx)(o.a,{sm:6,children:Object(d.jsxs)("div",{className:"form-group fill",children:[Object(d.jsx)("label",{className:"floating-label",htmlFor:"date",children:"Data de Emiss\xe3o"}),Object(d.jsx)("input",{defaultValue:e.dataemissao,onChange:t=>{!function(e,t){const a=g.findIndex(e=>e.id===t);g[a]={id:t,dataemissao:e,numero:g[a].numero,tipodocumento:g[a].tipodocumento,datavalidade:g[a].datavalidade,anexo:g[a].anexo},x(!0),f(g.concat([])),p&&p(g)}(t.target.value,e.id)},type:"date",className:"form-control"})]})}),!O&&Object(d.jsx)(o.a,{sm:6,children:Object(d.jsxs)("div",{className:"form-group fill",children:[Object(d.jsx)("label",{className:"floating-label",htmlFor:"text",children:"Data de Validade"}),Object(d.jsx)("input",{defaultValue:e.datavalidade,onChange:t=>{!function(e,t){const a=g.findIndex(e=>e.id===t);g[a]={id:t,datavalidade:e,numero:g[a].numero,tipodocumento:g[a].tipodocumento,dataemissao:g[a].dataemissao,anexo:g[a].anexo},x(!0),f(g.concat([])),p&&p(g)}(t.target.value,e.id)},type:"date",className:"form-control"})]})})]})}),g.length>1?Object(d.jsx)("div",{className:"paddinhtop66OnlyPC sm-2",children:Object(d.jsx)(l.a,{onClick:()=>function(e){if(g.length>1){const a=g.findIndex(t=>t.id===e);if(a>-1){var t=g;t.splice(a,1),f(t.concat([])),p&&p(g),x(!0)}}}(e.id),variant:"danger",children:Object(d.jsx)("i",{className:"feather icon-trash-2"})})}):null]},e.id)}),Object(d.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(d.jsxs)(i.a,{className:"justify-content-end",children:[Object(d.jsx)(i.a.First,{onClick:()=>D(0)}),Object(d.jsx)(i.a.Prev,{onClick:()=>D(y>0?y-1:0)}),Object(d.jsx)("span",{style:{display:"flex",padding:"8px 20px",alignItems:"center",justifyContent:"center"},children:y+1}),Object(d.jsx)(i.a.Next,{onClick:()=>D(y>=g.length-1?g.length-1:y+1)}),Object(d.jsx)(i.a.Last,{onClick:()=>D(g.length-1)})]})})]})}},824:function(e,t,a){"use strict";var s=a(0),o=a(814),l=a(812),c=a(404),i=a(403),n=a(7),r=a(1);t.a=e=>{let{Open:t,setOpen:a,list:d}=e;const[j,u]=Object(s.useState)(""),[p,O]=Object(s.useState)("");return Object(s.useEffect)(()=>{console.log("ROberto",d),u("")},[d]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(o.a,{size:"lg",show:t,onHide:()=>a(!1),children:[Object(r.jsx)(o.a.Body,{children:Object(r.jsx)(l.a,{children:Object(r.jsxs)(c.a,{xl:12,className:"task-detail-right",children:[Object(r.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"spaceAround"},children:Object(r.jsxs)("span",{style:{paddingBottom:"4px",cursor:"pointer",borderBottom:"2px solid #d2b32a",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(r.jsx)("i",{className:"feather icon-file-text m-r-5"}),"Anexos"]})}),Object(r.jsxs)("div",{style:{width:"100%",height:"500px"},children:[Object(r.jsx)("div",{style:{width:"100%",borderBottom:"1px solid #d2b32a",paddingTop:"20px",paddingBottom:"20px",marginBottom:"20px",overflow:"auto",height:"70px"},children:"undefined"!=typeof d?d.map(e=>{var t;return Object(r.jsx)(n.b,{onClick:()=>{var t,a,s,o;"PDF"==(null===(t=e.DOC_URL)||void 0===t?void 0:t.substring((null===(a=e.DOC_URL)||void 0===a?void 0:a.lastIndexOf("."))+1))||"pdf"==(null===(s=e.DOC_URL)||void 0===s?void 0:s.substring((null===(o=e.DOC_URL)||void 0===o?void 0:o.lastIndexOf("."))+1))?O(e.DOC_URL):u(e.DOC_URL)},style:{margin:"2px"},to:"#",className:"mb-1 text-muted d-flex align-items-end text-h-primary",children:"::"+(null===e||void 0===e||null===(t=e.sgigjprdocumentotp)||void 0===t?void 0:t.DESIG)},e.ID)}):null}),Object(r.jsx)("div",{style:{width:"100%",display:j?"flex":"none",justifyContent:"center",marginBottom:"10px"},children:Object(r.jsxs)("span",{children:[Object(r.jsx)("i",{className:"feather icon-eye m-r-5"}),"Pr\xe9-vizualiza\xe7\xe3o"]})}),Object(r.jsx)("a",{style:{display:j?"block":"none"},href:j+"?alt=media&token=0",target:"_blank",rel:"noopener noreferrer",children:Object(r.jsx)("div",{className:""==j?"previewdoc":"previewdoc-img",style:{backgroundImage:'url("'+j+'?alt=media&token=0")',height:"350px"}})})]})]})})}),Object(r.jsx)(o.a.Footer,{children:Object(r.jsx)(i.a,{variant:"danger",onClick:()=>a(!1),children:"Fechar"})})]}),Object(r.jsx)(o.a,{size:"xl",show:p,onHide:()=>{O(null),setTimeout(()=>a(!0),150)},children:Object(r.jsx)("iframe",{height:1e3,src:p+"?alt=media&token=0",title:"pdf-viewer",width:"100%s"})})]})}},836:function(e,t,a){"use strict";var s=a(0),o=a.n(s),l=a(812),c=a(404),i=a(403),n=a(814),r=a(7),d=a(76),j=a(30),u=a(8),p=a(807),O=a(26),b=a(1);var h=e=>{let{uploadlist:t,voltar:a,InterrompidoTipo:o,setInterrompidoTipo:r,INSTRUCAO_ID:d}=e;const[h,m]=Object(s.useState)(!1),[x,g]=Object(s.useState)(""),{popUp_alertaOK:f}=Object(O.a)(),[v,y]=Object(s.useState)([]),[D,N]=Object(s.useState)(-1),[C,I]=Object(s.useState)([{id:Date.now(),tipodocumento:"",numero:"",dataemissao:"",datavalidade:"",anexo:{type:0,file:null},main:""}]),[S,A]=Object(s.useState)(!1),[E,_]=Object(s.useState)(!1);Object(s.useEffect)(()=>{m(""!==o),async function(){try{const e=await j.a.get("/sgigjprdocumentotp");"200"==e.status&&y(e.data)}catch(e){console.error(e.response)}}()},[o]);const T=(e,t,a)=>{I(s=>s.map(s=>s.id===e?Object(u.a)(Object(u.a)({},s),{},{[t]:a}):s)),A(!0)};async function R(e){var t={status:!1,file:null};try{const a=new FormData;a.append("file",e);const s={headers:{"content-type":"multipart/form-data"}};t={status:!0,file:await j.a.post("/upload",a,s)}}catch(a){console.error(a.response),t={status:!1,file:null}}return t}return Object(b.jsxs)(n.a,{size:"lg",show:h,onHide:()=>m(!1),children:[Object(b.jsx)(n.a.Header,{closeButton:!0,children:Object(b.jsx)(n.a.Title,{as:"h5",children:"A"===o?"Arquivar":"Prescrever"})}),Object(b.jsx)(n.a.Body,{children:Object(b.jsxs)("form",{id:"GO",onSubmit:async e=>{e.preventDefault();let s=!1,l=[];try{for(let e=0;e<C.length;e++){if(console.log("pkoko",C[e]),!C[e].anexo||null==C[e].anexo.file)return void f("Por favor anexa documento");if(1!==v.find(t=>t.ID===C[e].tipodocumento).IDENTIFICACAO||""!=C[e].datavalidade&&""!=C[e].numero&&""!=C[e].dataemissao){if(""!=C[e].tipodocumento&&""!=C[e].numero){var c="";if("1"==C[e].anexo.type&&(c=C[e].anexo.file),"2"==C[e].anexo.type){c=(await R(C[e].anexo.file)).file.data}const t={PR_DOCUMENTO_TP_ID:C[e].tipodocumento,NUMERO:C[e].numero,DOC_URL:c,DT_EMISSAO:C[e].dataemissao,DT_VALIDADE:C[e].datavalidade,ESTADO:"1",MAIN:C[e].main};if(l.push(t),s){_(!1),f("Preenche os campos que representam um documento de identifica\xe7\xe3o");break}}}else s=!0}try{200===(await j.a.put("/sgigjrelprocessoinstrucao/".concat(d,"/interrompido"),{OBS:x,TIPO:o,documentos:l})).status&&(r(""),t(),a())}catch(i){console.error(i.response)}}catch(i){console.error(i.response)}},children:[Object(b.jsx)(l.a,{children:Object(b.jsx)(c.a,{sm:12,children:Object(b.jsxs)(p.a.Group,{children:[Object(b.jsxs)(p.a.Label,{children:["Justifica\xe7\xe3o ",Object(b.jsx)("span",{className:"text-danger",children:"*"})]}),Object(b.jsx)(p.a.Control,{as:"textarea",rows:3,style:{height:"250px"},required:!0,value:x,onChange:e=>g(e.target.value),placeholder:"Justifica\xe7\xe3o..."})]})})}),C.map((e,t)=>{const a=v.find(t=>t.ID===parseInt(e.tipodocumento,10)),s=1===(null===a||void 0===a?void 0:a.IDENTIFICACAO);return Object(b.jsxs)(l.a,{className:"mb-3",children:[Object(b.jsx)(c.a,{sm:12,children:Object(b.jsxs)(l.a,{children:[Object(b.jsx)(c.a,{sm:4,children:Object(b.jsxs)(p.a.Group,{children:[Object(b.jsxs)(p.a.Label,{children:["Tipo de Documento"," ",Object(b.jsx)("span",{className:"text-danger",children:"*"})]}),Object(b.jsxs)(p.a.Control,{as:"select",required:!0,onChange:t=>T(e.id,"tipodocumento",t.target.value),children:[Object(b.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),v.map(e=>Object(b.jsx)("option",{value:e.ID,children:e.DESIG},e.ID))]})]})}),Object(b.jsx)(c.a,{sm:4,children:Object(b.jsxs)(p.a.Group,{children:[Object(b.jsxs)(p.a.Label,{children:["N\xfamero ",Object(b.jsx)("span",{className:"text-danger",children:"*"})]}),Object(b.jsx)(p.a.Control,{required:!0,type:"text",onChange:t=>T(e.id,"numero",t.target.value)})]})}),Object(b.jsxs)(c.a,{sm:4,className:"d-flex",style:{alignItems:"center",paddingTop:"20px"},children:[Object(b.jsxs)(i.a,{style:{backgroundColor:"#d2b32a",color:"#fff"},as:"label",htmlFor:"anexar".concat(e.id),children:[" ",e.anexo.file?"Anexado":"Anexar"," "]}),Object(b.jsx)(p.a.Control,{type:"file",id:"anexar".concat(e.id),style:{display:"none"},accept:"image/png,image/jpeg",onChange:t=>((e,t)=>{const a=C.find(t=>t.id===e);a.tipodocumento&&a.numero?T(e,"anexo",{type:2,file:t}):f("Preencha os campos obrigat\xf3rios")})(e.id,t.target.files[0])}),Object(b.jsx)(p.a.Check,{style:{marginLeft:"10px",paddingTop:"-100px"},inline:!0,type:"radio",name:"documento",onChange:()=>N(t),label:"Usar este"})]}),Object(b.jsx)(c.a,{sm:6,children:Object(b.jsxs)(p.a.Group,{children:[Object(b.jsxs)(p.a.Label,{children:["Data de Emiss\xe3o"," ",s&&Object(b.jsx)("span",{className:"text-danger",children:"*"})]}),Object(b.jsx)(p.a.Control,{type:"date",required:s,onChange:t=>T(e.id,"dataemissao",t.target.value)})]})}),Object(b.jsx)(c.a,{sm:6,children:Object(b.jsxs)(p.a.Group,{children:[Object(b.jsxs)(p.a.Label,{children:["Data de Validade"," ",s&&Object(b.jsx)("span",{className:"text-danger",children:"*"})]}),Object(b.jsx)(p.a.Control,{type:"date",required:s,onChange:t=>T(e.id,"datavalidade",t.target.value)})]})})]})}),C.length>1&&Object(b.jsx)(c.a,{sm:2,className:"d-flex align-items-center",children:Object(b.jsx)(i.a,{variant:"danger",onClick:()=>{return t=e.id,void(C.length>1&&I(C.filter(e=>e.id!==t)));var t},children:Object(b.jsx)("i",{className:"feather icon-trash-2"})})})]},e.id)}),Object(b.jsx)(i.a,{variant:"secondary",onClick:()=>{I([...C,{id:Date.now(),tipodocumento:"",numero:"",dataemissao:"",datavalidade:"",anexo:{type:0,file:null},main:""}])},children:"Adicionar Documento"})]})}),Object(b.jsxs)(n.a.Footer,{children:[Object(b.jsx)(i.a,{type:"submit",form:"GO",variant:"primary",children:"A"===o?"Arquivar":"Prescrever"}),Object(b.jsx)(i.a,{variant:"danger",onClick:()=>m(!1),children:"Fechar"})]})]})},m=a(240),x=a.n(m),g=a(820),f=a.n(g);(new Date).toISOString().slice(0,10);var v=a(817),y=a(816);var D=e=>{let{data:t}=e;const a=o.a.useMemo(()=>[{Header:"Pe\xe7as Processual",accessor:"PECAS"},{Header:"Data",accessor:"DATA2"},{Header:"Anexos",accessor:"ANEXOS"},{Header:"A\xe7\xf5es",accessor:"action"}],[]),{getTableProps:s,getTableBodyProps:l,headerGroups:c,prepareRow:i,page:n,setPageSize:r,state:{pageIndex:d,pageSize:j}}=Object(y.useTable)({columns:a,data:t,initialState:{pageIndex:0,pageSize:Number.MAX_VALUE}},y.useGlobalFilter,y.useSortBy,y.usePagination);return Object(b.jsxs)(v.a,Object(u.a)(Object(u.a)({striped:!0,bordered:!0,hover:!0,responsive:!0},s()),{},{children:[Object(b.jsx)("thead",{children:c.map(e=>Object(b.jsx)("tr",Object(u.a)(Object(u.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map(e=>Object(b.jsxs)("th",Object(u.a)(Object(u.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),Object(b.jsx)("span",{children:e.isSorted?e.isSortedDesc?Object(b.jsx)("span",{className:"feather icon-arrow-down text-muted float-right"}):Object(b.jsx)("span",{className:"feather icon-arrow-up text-muted float-right"}):""})]})))})))}),Object(b.jsx)("tbody",Object(u.a)(Object(u.a)({},l()),{},{children:n.map((e,t)=>(i(e),Object(b.jsx)("tr",Object(u.a)(Object(u.a)({},e.getRowProps()),{},{children:e.cells.map(e=>Object(b.jsx)("td",Object(u.a)(Object(u.a)({},e.getCellProps()),{},{children:e.render("Cell")})))}))))}))]}))},N=a(824),C=a(821),I=a(822),S=a(823);function A(e){let{k:t,value:a,set:o}=e;const[l,i]=Object(s.useState)([]);return Object(s.useEffect)(()=>{!async function(){try{const e=await j.a.get("/sgigjprdecisaotp");"200"==e.status&&i(e.data)}catch(e){console.error(e.response)}}()}),Object(b.jsx)(c.a,{sm:12,children:Object(b.jsxs)("div",{className:"form-group fill",children:[Object(b.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Decis\xe3o ",Object(b.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(b.jsxs)("select",{value:a,className:"form-control",onChange:e=>{o(t,e.target.value)},id:"perfil",required:!0,"aria-required":"true",children:[Object(b.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),l.map(e=>Object(b.jsx)("option",{value:e.ID,children:e.DESIG},e.ID))]})]})})}function E(e){let{k:t,value:a,set:o}=e;const[l,i]=Object(s.useState)([]);return Object(s.useEffect)(()=>{!async function(){try{const e=await j.a.get("/sgigjinfracaocoima");"200"==e.status&&i(e.data)}catch(e){console.error(e.response)}}()},[]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(c.a,{sm:8,children:Object(b.jsxs)("div",{className:"form-group fill",children:[Object(b.jsx)("label",{className:"floating-label",htmlFor:"Name",children:"Infra\xe7\xe3o"}),Object(b.jsxs)("select",{id:"perfil",value:null===a||void 0===a?void 0:a.INFRACAO,onChange:e=>{o(t,Object(u.a)(Object(u.a)({},a),{},{INFRACAO:e.target.value}))},className:"form-control",required:!0,"aria-required":"true",children:[Object(b.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),l.map(e=>{var t;return Object(b.jsx)("option",{value:e.ID,children:null===e||void 0===e||null===(t=e.sgigjprinfracaotp)||void 0===t?void 0:t.DESIG},e.ID)})]})]})}),Object(b.jsx)(c.a,{sm:4,children:Object(b.jsxs)("div",{className:"form-group fill",children:[Object(b.jsx)("label",{className:"floating-label",htmlFor:"Name",children:"Coima "}),Object(b.jsx)("input",{maxLength:"128",type:"number",onChange:e=>{o(t,Object(u.a)(Object(u.a)({},a),{},{COIMA:e.target.value}))},defaultValue:null===a||void 0===a?void 0:a.COIMA,className:"form-control",placeholder:"Valor...",required:!0})]})})]})}function _(e){let{k:t,value:a,set:o,documentolist:l,selected_relinstrucaopeca:i,ID_C:n,documentosgeral_lista_save:r,required:d=!0}=e;const[j,u]=Object(s.useState)([]);return Object(s.useEffect)(()=>{u(null==i?[]:i.sgigjreldocumento)},[i]),Object(b.jsx)(c.a,{sm:12,children:Object(b.jsx)(S.a,{required:d,documentolist:l,list:j,save:r,item:null==i?{ID:n,ENTIDADE:"REL_INSTRUTOR_PECAS_ID"}:{ID:i.ID,ENTIDADE:"REL_INSTRUTOR_PECAS_ID"},hidden:!0})})}function T(e){let{k:t,value:a,set:s,obsRef:o}=e;return Object(b.jsx)(c.a,{sm:12,children:Object(b.jsx)("div",{className:"form-group fill",children:Object(b.jsx)(f.a,{value:a,config:{readonly:!1},ref:o})})})}function R(e){let{k:t,value:a,set:o,selected_relinstrucaopeca:l,pessoalist:n,documentolist:r}=e;const[d,u]=Object(s.useState)([]),[p,O]=Object(s.useState)([]),[h,m]=Object(s.useState)([]),[x,g]=Object(s.useState)([]),[f,v]=Object(s.useState)({code:0,value:!1}),[y,D]=Object(s.useState)([]);return Object(s.useEffect)(()=>{D(n),console.log(l),async function(){try{const e=await j.a.get("/sgigjprgenero");"200"==e.status&&u(e.data)}catch(e){console.error(e.response)}}(),async function(){try{const e=await j.a.get("/sgigjprestadocivil");"200"==e.status&&O(e.data)}catch(e){console.error(e.response)}}(),async function(){try{const e=await j.a.get("/glbgeografia");"200"==e.status&&m(e.data)}catch(e){console.error(e.response)}}(),async function(){try{const e=await j.a.get("/sgigjprcontactotp");"200"==e.status&&g(e.data)}catch(e){console.error(e.response)}}()},[]),Object(b.jsxs)(c.a,{sm:12,children:[Object(b.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["Pessoa ",Object(b.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(b.jsxs)("div",{style:{display:"flex"},children:[Object(b.jsx)("div",{className:"form-group fill",style:{width:"100%"},children:Object(b.jsx)(C.a,{className:"basic-single",classNamePrefix:"select",onChange:e=>o(t,e.value),name:"pessoa",options:y,value:y.map(e=>e.ID==a?e:null),required:!0,menuPlacement:"auto",menuPosition:"fixed",placeholder:"Pessoa..."})}),Object(b.jsx)(i.a,{onClick:()=>v({code:f.code+1,value:!0}),style:{marginLeft:"8px",height:"38px"},variant:"primary",children:Object(b.jsx)("i",{className:"feather icon-plus"})})]}),Object(b.jsx)(I.a,{generolist:d,estadocivillist:p,glbgeografialist:h,documentolist:r,contactolist:x,pessoaopenDO:f,uploadpessoa:async function(){try{const t=await j.a.get("/sgigjpessoa");if("200"==t.status){for(var e=0;e<t.data.length;e++)t.data[e].value=t.data[e].ID,t.data[e].label=t.data[e].NOME;D(t.data)}}catch(t){console.error(t.response)}}})]})}function w(e){var t;let{DATA:a,peca:o,selected_relinstrucaopeca:n,pessoalist:r,documentolist:d,setdocumentosgeral_lista:p,item:h,uploadinstrucaopecaslist:m,setselected_relinstrucaopeca:g}=e;const[f,v]=Object(s.useState)(!1),[y,D]=Object(s.useState)(""),[N,C]=Object(s.useState)({}),{popUp_alertaOK:I}=Object(O.a)(),S=Object(s.useRef)();function w(e,t){C(Object(u.a)(Object(u.a)({},N),{},{[e]:t}))}function P(e){if(e)return"1"==e.FLAG_ANEXO_DOC?"ANEXO_DOC":"1"==e.FLAG_DECISAO?"DECISAO":"1"==e.FLAG_DESTINATARIO?"DESTINATARIO":"1"==e.FLAG_INFRACAO_COIMA?"INFRACAO_COIMA":"1"==e.FLAG_OBS?"OBS":"1"==e.FLAG_PERIODO_EXCLUSAO?"PERIODO_EXCLUSAO":"1"==e.FLAG_PESSOA?"PESSOA":"1"==e.FLAG_TEXTO?"TEXTO":void 0}Object(s.useEffect)(()=>{C({DESTINATARIO:(null===n||void 0===n?void 0:n.DESTINATARIO_ID)||"",PESSOA:(null===n||void 0===n?void 0:n.PESSOA_TESTEMUNHA_ID)||"",COIMA:(null===n||void 0===n?void 0:n.COIMA)||"",OBS:(null===n||void 0===n?void 0:n.OBS)||(null===o||void 0===o?void 0:o.OBS)||"",DECISAO:(null===n||void 0===n?void 0:n.PR_DECISAO_TP_ID)||"",INFRACAO_COIMA:null}),S.current&&(S.current.value=(null===n||void 0===n?void 0:n.OBS)||(null===o||void 0===o?void 0:o.OBS)||"")},[n,o]);const L=(null===o||void 0===o||null===(t=o.sgigjrelpecaprocessualcampo)||void 0===t?void 0:t.map(e=>({key:P(e.sigjprcampo),value:N[P(e.sigjprcampo)],ORDEM:e.ORDEM,required:1==e.FLAG_OBRIGATORIEDADE})).sort((e,t)=>e.ORDEM-t.ORDEM))||[];return Object(b.jsx)("form",{id:"itemGO",onSubmit:async function(e){if(e.preventDefault(),""==a)I("Escolha uma data");else try{var t,s,l;const e={REL_PROCESSO_INSTRUCAO_ID:null===h||void 0===h?void 0:h.sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao[0].ID,PR_PECAS_PROCESSUAIS_ID:o.ID,PESSOA_TESTEMUNHA_ID:N.PESSOA||null,DESTINATARIO_ID:N.DESTINATARIO||null,PR_DECISAO_TP_ID:N.DECISAO||null,INFRACAO_COIMA_ID:(null===(t=N.INFRACAO_COIMA)||void 0===t?void 0:t.INFRACAO)||null,COIMA:(null===(s=N.INFRACAO_COIMA)||void 0===s?void 0:s.COIMA)||null,DATA:a,OBS:(null===S||void 0===S||null===(l=S.current)||void 0===l?void 0:l.value)||""};if(console.log(e),null==n){const t=await j.a.post("/sgigjrelinstrutorpeca",e);if("200"==t.status){D(t.data.ID),v(!f);const e=await m();if(1==e.done)for(let a=0;a<e.list.length;a++){const s=e.list[a];s.ID==t.data.ID&&g(s)}}}else{"200"==(await j.a.put("/sgigjrelinstrutorpeca/"+n.ID,e)).status&&(x.a.success("Documento Guardado!",{duration:4e3}),v(!f),m())}}catch(c){console.error(c)}},children:o&&Object(b.jsxs)(l.a,{children:[L.map(e=>((e,t,a,s,o,l,c,i,n,r)=>{switch(e){case"PESSOA":case"DESTINATARIO":return Object(b.jsx)(R,{k:e,set:a,value:t,selected_relinstrucaopeca:s,pessoalist:o,documentolist:l});case"OBS":case"TEXTO":case"PERIODO_EXCLUSAO":return Object(b.jsx)(T,{k:e,set:a,value:t,obsRef:n});case"ANEXO_DOC":return Object(b.jsx)(_,{k:e,set:a,value:t,selected_relinstrucaopeca:s,pessoalist:o,documentolist:l,documentosgeral_lista_save:c,ID_C:i,required:r});case"INFRACAO_COIMA":return Object(b.jsx)(E,{k:e,set:a,value:t});case"DECISAO":return Object(b.jsx)(A,{k:e,set:a,value:t});default:return}})(e.key,e.value,w,n,r,d,f,y,S,e.required)),Object(b.jsxs)(c.a,{sm:12,style:{display:"flex",justifyContent:"flex-end",marginTop:"10px",gridGap:"15px"},children:[null!=n&&Object(b.jsxs)(b.Fragment,{children:[null!=n.URL_DOC&&Object(b.jsxs)("a",{href:(null===n||void 0===n?void 0:n.URL_DOC)+"?alt=media&token=0",target:"_blank",children:[Object(b.jsx)(i.a,{variant:"primary",children:"Abrir DOC Gerado"})," "]}),Object(b.jsx)(i.a,{onClick:()=>async function(){try{if("200"==(await j.a.put("/sgigjrelinstrutorpeca/"+(null===n||void 0===n?void 0:n.ID)+"/despacho",{})).status){const e=await m();if(1==e.done)for(let t=0;t<e.list.length;t++){const a=e.list[t];a.ID==(null===n||void 0===n?void 0:n.ID)&&g(a)}}}catch(e){console.error(e.response)}}(),variant:"primary",children:"Gerar DOC"})]}),Object(b.jsx)(i.a,{type:"submit",form:"itemGO",variant:"primary",children:"Guardar"})]})]})})}t.a=e=>{var t,a,u;let{item:p,setinstrucaoitem:m,uploadlist:x,instrucaoitem:g,decisaolist:f}=e;const{popUp_removerItem:v,popUp_alertaOK:y}=Object(O.a)(),[C,I]=Object(s.useState)(""),[S,A]=Object(s.useState)([]),[E,_]=Object(s.useState)(""),[T,R]=Object(s.useState)({}),[P,L]=Object(s.useState)([]);const[F,k]=Object(s.useState)([]);const[B,U]=Object(s.useState)([]),[G,M]=Object(s.useState)(""),[q,H]=Object(s.useState)("");async function V(){let e={done:!1,list:[]};if(oe()){const i=p.sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao[0].ID;M(i),H(p.sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].ID);try{const c=await j.a.get("/sgigjrelinstrutorpeca?REL_PROCESSO_INSTRUCAO_ID="+i);if("200"==c.status){for(var t=0;t<c.data.length;t++){var a,s,l;const e=c.data[t].ID,i=c.data[t];c.data[t].id=c.data[t].ID,c.data[t].DATA2=Object(d.f)(c.data[t].DATA),c.data[t].PECAS=c.data[t].sgigjprpecasprocessual.DESIG,null==c.data[t].FLAG_NOTA_COMUNICACAO?c.data[t].QUEM="------------------":("1"==c.data[t].FLAG_NOTA_COMUNICACAO&&(c.data[t].QUEM="Visado"),"2"==c.data[t].FLAG_NOTA_COMUNICACAO&&(c.data[t].QUEM="Entidade Decisora"),"3"==c.data[t].FLAG_NOTA_COMUNICACAO&&(c.data[t].QUEM="Entidade Visada")),!i.sgigjreldocumento&&null!==(a=c.data[t])&&void 0!==a&&a.URL_DOC&&(i.sgigjreldocumento=[]),i.sgigjreldocumento.push({DOC_URL:null===(s=c.data[t])||void 0===s?void 0:s.URL_DOC,sgigjprdocumentotp:{DESIG:"Documento Gerado"}}),null===(l=c.data[t])||void 0===l||l.sgigjreldocumento.length,c.data[t].ANEXOS=Object(b.jsx)(o.a.Fragment,{children:Object(b.jsx)(r.b,{to:"#",onClick:()=>se(i),children:Object(b.jsx)("i",{className:"feather icon-file"})})}),c.data[t].action=Object(b.jsxs)(o.a.Fragment,{children:[Object(b.jsx)(r.b,{to:"#",onClick:()=>ne(i),className:"text-primary mx-1",children:Object(b.jsx)("i",{className:"text-primary feather icon-edit"})}),Object(b.jsx)(r.b,{to:"#",onClick:()=>je(e),className:"text-danger",children:Object(b.jsx)("i",{className:"feather icon-trash-2"})})]})}e={done:!0,list:c.data},U(c.data)}}catch(c){console.error(c.response)}}return e}const[z,X]=Object(s.useState)(""),[J,W]=Object(s.useState)("*"),[K,Q]=Object(s.useState)(""),[Z,Y]=Object(s.useState)(""),[$,ee]=Object(s.useState)(!1),[te,ae]=Object(s.useState)([]);function se(e){ee(!0),console.log("sgigjreldocumento",null===e||void 0===e?void 0:e.sgigjreldocumento),ae(null===e||void 0===e?void 0:e.sgigjreldocumento)}function oe(){if(null!=p)return p.sgigjprocessodespacho.length>0&&(p.sgigjprocessodespacho[0].sgigjrelprocessoinstrutor.length>0&&p.sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao.length>0)}async function le(){x(),m(null)}const[ce,ie]=Object(s.useState)("");function ne(e){ie(e)}function re(e){return E==e||function(e){if(B.findIndex(t=>t.PR_PECAS_PROCESSUAIS_ID===e)>=0&&"6b4729e2b01da73d490dc1b04671ea570d49"==e)return!1;if(B.findIndex(t=>t.PR_PECAS_PROCESSUAIS_ID===e)>=0&&"0a2557ff1b8e966ae041183b8bbcb4d2ce1d"==e)return!1;let t=0;if("4ce0c01543457df12a96bc3eac9492e81657"==e){for(let e=0;e<B.length;e++)null!=B[e].FLAG_NOTA_COMUNICACAO&&t++;if(t>=3)return!1}return!0}(e)}Object(s.useEffect)(()=>{null!=ce&&(_(ce.PR_PECAS_PROCESSUAIS_ID),X(ce.PESSOA_TESTEMUNHA_ID),W(ce.REF),Q(Object(d.e)(ce.DATA)),Y(ce.OBS))},[ce]),Object(s.useEffect)(()=>{null!=E&&R(S.find(e=>e.ID==E))},[E]),Object(s.useEffect)(()=>{!async function(){try{const e=await j.a.get("/sgigjprpecasprocessual");"200"==e.status&&A(e.data)}catch(e){console.error(e.response)}}(),async function(){try{const t=await j.a.get("/sgigjpessoa");if("200"==t.status){for(var e=0;e<t.data.length;e++)t.data[e].value=t.data[e].ID,t.data[e].label=t.data[e].NOME;L(t.data)}}catch(t){console.error(t.response)}}(),async function(){try{const e=await j.a.get("/sgigjprdocumentotp");"200"==e.status&&k(e.data)}catch(e){console.error(e.response)}}(),V()},[]);const de=async e=>{let t=!0;try{await j.a.delete("/sgigjrelinstrutorpeca/"+e)}catch(a){t=!1,console.error(a.response),y("Falha. Tente mais tarde")}return V(),t},je=async e=>{v({delete:de,id:e})};const[ue,pe]=Object(s.useState)(),[Oe,be]=Object(s.useState)(!1);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(l.a,{className:"mb-3",children:Object(b.jsx)(c.a,{className:"d-flex align-items-center",style:{fontSize:"16px"},children:"Instru\xe7\xe3o do Processo"})}),oe()?Object(b.jsxs)(l.a,{children:[Object(b.jsx)(c.a,{sm:2,children:Object(b.jsxs)("div",{className:"form-group fill",children:[Object(b.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Refer\xeancia ",Object(b.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(b.jsx)("input",{disabled:!0,type:"text",className:"form-control",id:"Name",value:J,required:!0})]})}),Object(b.jsx)(c.a,{sm:7,children:Object(b.jsxs)("div",{className:"form-group fill",children:[Object(b.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Pe\xe7a Processual ",Object(b.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(b.jsxs)("select",{value:E,onChange:e=>{var t;t=e.target.value,ie(null),_(t),X(""),W("*"),Q(""),Y("")},className:"form-control",id:"pessoa",required:!0,"aria-required":"true",children:[Object(b.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),S.map(e=>re(e.ID)&&Object(b.jsx)("option",{title:e.CODIGO,value:e.ID,children:e.DESIG},e.ID))]})]})}),Object(b.jsx)(c.a,{sm:3,children:Object(b.jsxs)("div",{className:"form-group fill",children:[Object(b.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Data ",Object(b.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(b.jsx)("input",{type:"date",onChange:e=>{Q(e.target.value)},value:K,className:"form-control",placeholder:"Data...",required:!0})]})})]}):Object(b.jsx)("div",{className:"form-group fill",style:{display:"flex",padding:"50px 0px",width:"100%",justifyContent:"center"},children:Object(b.jsx)(i.a,{variant:"primary",onClick:()=>async function(){const e={PROCESSO_DESPACHO_ID:p.sgigjprocessodespacho[0].ID};try{if("200"==(await j.a.post("/sgigjrelprocessoinstrucao",e)).status){const e=await j.a.get("/sgigjprocessoexclusao/"+p.id);"200"==e.status&&e.data.length>0&&(e.data[0].id=e.data[0].ID,m(e.data[0]))}}catch(t){console.error(t.response)}}(),children:"Iniciar Instru\xe7\xe3o"})}),Object(b.jsx)(w,{DATA:K,PESSOA_TESTEMUNHA_ID:z,setPESSOA_TESTEMUNHA_ID:X,OBS:Z,setOBS:Y,item:p,uploadinstrucaopecaslist:V,PECAselected:E,selected_relinstrucaopeca:ce,setselected_relinstrucaopeca:ie,pessoalist:P,documentolist:F,peca:T}),Object(b.jsx)("br",{}),oe()&&Object(b.jsx)(D,{data:B}),Object(b.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"10px",gridGap:"10px"},children:[oe()&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(i.a,{onClick:()=>async function(e){try{console.log("GO_ER");const a=await j.a.get("/juntada/"+e);if("200"==a.status){const e=a.data.buffer.data,s=new Uint8Array(e).buffer;var t=new Blob([s],{type:"application/pdf"});const o=URL.createObjectURL(t);pe(o),be(!0),V()}}catch(a){console.error(a)}}(p.sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao[0].ID),variant:"primary",children:"Juntada"}),Object(b.jsx)(i.a,{variant:"primary",onClick:()=>I("A"),children:"Arquivar"}),Object(b.jsx)(i.a,{variant:"primary",onClick:()=>I("P"),children:"Prescrever"}),Object(b.jsx)(i.a,{variant:"primary",onClick:()=>async function(){try{"200"==(await j.a.put("/sgigjrelprocessoinstrucao/"+p.sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao[0].ID,{TIPO:"concluir"})).status&&(x(),y("Instruc\xe3o conclu\xedda"),m(null))}catch(a){var e,t;console.error(a.response),"567785636745684"==(null===a||void 0===a||null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.code)&&y("S\xf3 \xe9 poss\xedvel concluir essa instru\xe7\xe3o, ap\xf3s inser\xe7\xe3o de pe\xe7a Relatorio Final")}}(),children:"Concluir Instru\xe7\xe3o do Processo"})]}),Object(b.jsx)(i.a,{variant:"danger",onClick:()=>le(),children:"Voltar"})]}),Object(b.jsx)(N.a,{Open:$,setOpen:ee,list:te}),Object(b.jsx)(n.a,{size:"xl",show:Oe,onHide:()=>be(!1),children:Object(b.jsx)("iframe",{height:1e3,src:"".concat(ue),title:"pdf-viewer",width:"100%s"})}),Object(b.jsx)(h,{voltar:le,INSTRUCAO_ID:null===p||void 0===p||null===(t=p.sgigjprocessodespacho[0])||void 0===t||null===(a=t.sgigjrelprocessoinstrutor[0])||void 0===a||null===(u=a.sgigjrelprocessoinstrucao[0])||void 0===u?void 0:u.ID,InterrompidoTipo:C,setInterrompidoTipo:I,uploadlist:x})]})}},891:function(e,t,a){"use strict";a.r(t);var s=a(8),o=a(0),l=a.n(o),c=a(812),i=a(404),n=a(840),r=a(814),d=a(403),j=a(807),u=a(7),p=a(821),O=a(823),b=a(816),h=a(1);const m=e=>{let{filter:t,setFilter:a}=e;const[s,l]=Object(o.useState)(t),c=Object(b.useAsyncDebounce)(e=>{a(e||void 0)},1e3);return Object(h.jsxs)("span",{className:"d-flex align-items-center justify-content-end",children:["Procurar:"," ",Object(h.jsx)("input",{className:"form-control ml-2 w-auto",value:s||"",onChange:e=>{l(e.target.value),c(e.target.value)}})]})};var x=a(818),g=a(817),f=a(30),v=a(26),y=a(22),D=a(76),N=a(240),C=a.n(N),I=a(822),S=a(824),A=a(820),E=a.n(A),_=a(836);const T="/processos/exclusaointerdicao";function R(e){let{uploadList:t,columns:a,listAno:l,data:n,modalOpen:r}=e;const[d,j]=Object(o.useState)(""),[u,p]=Object(o.useState)(""),O=Object(o.useRef)(null),{permissoes:f}=Object(v.a)(),[y,D]=Object(o.useState)(),{getTableProps:N,getTableBodyProps:C,headerGroups:I,prepareRow:S,globalFilter:A,setGlobalFilter:E,page:_,canPreviousPage:T,canNextPage:R,pageOptions:w,pageCount:P,gotoPage:L,nextPage:F,previousPage:k,setPageSize:B,state:{pageIndex:U,pageSize:G}}=Object(b.useTable)({columns:a,data:n,initialState:{pageIndex:0,pageSize:10}},b.useGlobalFilter,b.useSortBy,b.usePagination);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(c.a,{className:"mb-3",children:[Object(h.jsxs)(i.a,{md:3,className:"d-flex align-items-center",children:["Mostrar",Object(h.jsx)("select",{className:"form-control w-auto mx-2",value:G,onChange:e=>{B(Number(e.target.value))},children:[5,10,20,30,40,50].map(e=>Object(h.jsx)("option",{value:e,children:e},e))}),"entradas"]}),Object(h.jsxs)(i.a,{md:9,className:"d-flex justify-content-end",children:[Object(h.jsxs)("div",{className:"d-flex align-items-center mr-2",children:[Object(h.jsx)("div",{className:"d-flex",children:Object(h.jsxs)("div",{className:"d-flex align-items-center mr-1",children:[Object(h.jsxs)("span",{className:"floating-label",htmlFor:"Name",children:["Ano:",Object(h.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(h.jsxs)("select",{onChange:e=>{var a;a=e.target.value,t(a)},className:"form-control",id:"perfil",required:!0,"aria-required":"true",children:[Object(h.jsx)("option",{value:"",children:" Selecione um Ano "}),l.map(e=>Object(h.jsx)("option",{value:e,children:e},e))]})]})}),""!==d||""!==u?Object(h.jsx)("div",{style:{cursor:"pointer"},onClick:()=>{j(""),p(""),t()},className:"ml-2",children:Object(h.jsx)("i",{className:"feather icon-x-circle"})}):""]}),Object(h.jsx)(m,{filter:A,setFilter:E})]})]}),Object(h.jsxs)(g.a,Object(s.a)(Object(s.a)({ref:O,striped:!0,bordered:!0,hover:!0,responsive:!0},N()),{},{children:[Object(h.jsx)("thead",{children:I.map(e=>Object(h.jsx)("tr",Object(s.a)(Object(s.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map(e=>Object(h.jsxs)("th",Object(s.a)(Object(s.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),Object(h.jsx)("span",{children:e.isSorted?e.isSortedDesc?Object(h.jsx)("span",{className:"feather icon-arrow-down text-muted float-right"}):Object(h.jsx)("span",{className:"feather icon-arrow-up text-muted float-right"}):""})]})))})))}),Object(h.jsx)("tbody",Object(s.a)(Object(s.a)({},C()),{},{children:_.map((e,t)=>(S(e),Object(h.jsx)("tr",Object(s.a)(Object(s.a)({},e.getRowProps()),{},{children:e.cells.map(e=>{const t=e.column.centered;return Object(h.jsx)("td",Object(s.a)(Object(s.a)({},e.getCellProps()),{},{className:t?"text-center":"text-right",children:e.render("Cell")}))})}))))}))]})),Object(h.jsxs)(c.a,{className:"justify-content-between",children:[Object(h.jsx)(i.a,{children:Object(h.jsxs)("span",{className:"d-flex align-items-center",children:["P\xe1gina"," ",Object(h.jsxs)("strong",{children:[" ",U+1," de ",w.length," "]})," ","| Ir para a p\xe1gina:"," ",Object(h.jsx)("input",{type:"number",className:"form-control ml-2",defaultValue:U+1,onChange:e=>{const t=e.target.value?Number(e.target.value)-1:0;L(t)},style:{width:"100px"}})]})}),Object(h.jsx)(i.a,{children:Object(h.jsxs)(x.a,{className:"justify-content-end",children:[Object(h.jsx)(x.a.First,{onClick:()=>L(0),disabled:!T}),Object(h.jsx)(x.a.Prev,{onClick:()=>k(),disabled:!T}),Object(h.jsx)(x.a.Next,{onClick:()=>F(),disabled:!R}),Object(h.jsx)(x.a.Last,{onClick:()=>L(P-1),disabled:!R})]})})]})]})}t.default=()=>{var e,t,a,s,b,m,x,g,N,A,w,P,L,F,k,B,U,G,M,q,H,V;const{permissoes:z,user:X,popUp_simcancelar:J}=Object(v.a)(),W=Object(y.i)(),[K,Q]=(Object(y.g)(),Object(o.useState)(null)),{popUp_removerItem:Z,popUp_alertaOK:Y}=Object(v.a)();Object(o.useRef)(null);const $=l.a.useMemo(()=>[{Header:"EST",accessor:"COLOR_STATUS",centered:!1},{Header:"Refer\xeancia",accessor:"REF",centered:!1},{Header:"Despacho",accessor:"TIPO_DESPACHO",centered:!0},{Header:"Entidade Decisora",accessor:"ENTIDADEREGISTO",centered:!0},{Header:"Pessoa",accessor:"PESSOAREGISTO",centered:!0},{Header:"Visado",accessor:"PESSOA",centered:!0},{Header:"Data",accessor:"DATA2",centered:!0},{Header:"A\xe7\xf5es",accessor:"action",centered:!0}],[]),[ee,te]=Object(o.useState)([]),[ae,se]=Object(o.useState)(""),[oe,le]=Object(o.useState)(""),[ce,ie]=Object(o.useState)(""),[ne,re]=Object(o.useState)([]),[de,je]=Object(o.useState)("dados"),[ue,pe]=Object(o.useState)(null),[Oe,be]=Object(o.useState)(null),[he,me]=Object(o.useState)([]),[xe,ge]=Object(o.useState)([]),[fe,ve]=Object(o.useState)(!1),[ye,De]=Object(o.useState)(!1);var Ne=(new Date).toJSON().slice(0,10);const[Ce,Ie]=Object(o.useState)({}),[Se,Ae]=Object(o.useState)([]);async function Ee(){try{const t=await f.a.get("/sgigjpessoa");if("200"==t.status){for(var e=0;e<t.data.length;e++)t.data[e].value=t.data[e].ID,t.data[e].label=t.data[e].NOME;Ae(t.data)}}catch(t){console.error(t.response)}}const[_e,Te]=Object(o.useState)([]);const[Re,we]=Object(o.useState)([]);const[Pe,Le]=Object(o.useState)([]);const[Fe,ke]=Object(o.useState)([]);const[Be,Ue]=Object(o.useState)([]);const[Ge,Me]=Object(o.useState)([]);const[qe,He]=Object(o.useState)([]);async function Ve(e){let t,a=[];try{if(t=e?await f.a.get("/sgigjprocessoexclusao?ENTIDADE_ID=".concat(W.id,"&ano=").concat(e)):await f.a.get("/sgigjprocessoexclusao?ENTIDADE_ID=".concat(W.id)),"200"==t.status){console.log(t.data);for(var s=0;s<t.data.length;s++){var o,c,i,n,r,d,j,p,O,b;t.data[s].ID;t.data[s].id=t.data[s].ID,t.data[s].DATA2=Object(D.f)(t.data[s].DATA);let e=new Date(t.data[s].DATA);e&&!a.includes(e.getFullYear())&&a.push(e.getFullYear()),t.data[s].PESSOA=t.data[s].sgigjrelinterveniente.map(e=>e.sgigjpessoa.NOME).join(", "),t.data[s].ORIGEM=null===(o=t.data[s].sgigjprorigemtp)||void 0===o?void 0:o.DESIG,t.data[s].PESSOAREGISTO=null===(c=t.data[s].sgigjrelpessoaentidade)||void 0===c||null===(i=c.sgigjpessoa)||void 0===i?void 0:i.NOME,t.data[s].ENTIDADEREGISTO=null===(n=t.data[s])||void 0===n||null===(r=n.sgigjentidade)||void 0===r?void 0:r.DESIG;const f=t.data[s];let _="grey",w="";try{var m,x,g,v,y,N;const e=t.data[s],a=null===e||void 0===e||null===(m=e.sgigjprocessodespacho)||void 0===m?void 0:m[0],o=null===a||void 0===a||null===(x=a.sgigjrelprocessoinstrutor)||void 0===x?void 0:x[0],l=null===o||void 0===o||null===(g=o.sgigjrelprocessoinstrucao)||void 0===g?void 0:g[0],c=null===e||void 0===e||null===(v=e.sgigjdespachofinal)||void 0===v?void 0:v[0];if("ENCERRADO"==e.ESTADO_ENCERRAMENTO)_="black";else if((null===e||void 0===e||null===(y=e.sgigjprocessodespacho)||void 0===y?void 0:y.length)>0){var C,I;if("I"==(null===a||void 0===a?void 0:a.TIPO_PROCESSO_EXCLUSAO)&&(w="Inqu\xe9rito"),"C"==(null===a||void 0===a?void 0:a.TIPO_PROCESSO_EXCLUSAO)&&(w="Contraordena\xe7\xe3o"),"A"==(null===a||void 0===a?void 0:a.TIPO_PROCESSO_EXCLUSAO)&&(w="Averigua\xe7\xe3o Sum\xe1ria"),null!=(null===a||void 0===a?void 0:a.URL_DOC_GERADO)&&(_="green"),(null===o||void 0===o||null===(C=o.sgigjrelprocessoinstrucao)||void 0===C?void 0:C.length)>0)if(null!=(null===l||void 0===l?void 0:l.RELATORIO_FINAL)&&(_="orange"),(null===l||void 0===l||null===(I=l.sgigjdespachointerrompido)||void 0===I?void 0:I.length)>0){var S,A;const e=null===l||void 0===l||null===(S=l.sgigjdespachointerrompido)||void 0===S||null===(A=S[0])||void 0===A?void 0:A.TIPO;"A"!=e&&"P"!=e||(_="blue")}}(null===e||void 0===e||null===(N=e.sgigjdespachofinal)||void 0===N?void 0:N.length)>0&&(null!=(null===c||void 0===c?void 0:c.URL_DOC_GERADO)&&0!=(null===c||void 0===c?void 0:c.ESTADO)&&(_="blue"),w="Despacho Decis\xe3o")}catch(R){var E;console.error("ERRO colorx processo:",null===(E=t.data[s])||void 0===E?void 0:E.ID,R)}t.data[s].TIPO_DESPACHO=w,t.data[s].action=Object(h.jsxs)(l.a.Fragment,{children:[0==Object(D.s)(T,z,"Editar")?null:Object(h.jsx)(u.b,{to:"#",title:"Desi\xe7\xe3o Tribunal",onClick:()=>{dt(!0),Ie(f)},className:"text-primary mx-1",children:Object(h.jsx)("i",{className:"text-primary  feather icon-file"})}),0==Object(D.s)(T,z,"Editar")?null:Object(h.jsx)(u.b,{to:"#",title:"Notifica\xe7\xe3o",onClick:()=>st(f),className:"text-primary mx-1",children:Object(h.jsx)("i",{className:"text-primary  feather icon-mail"})}),null!=(null===(d=f.sgigjprocessodespacho[0])||void 0===d?void 0:d.URL_DOC_GERADO)&&0==Object(D.s)(T,z,"DespachoFinal")?null:"grey"!=_&&Object(h.jsx)(u.b,{to:"#",title:"Documento",onClick:()=>{var e;return window.open((null===(e=f.sgigjprocessodespacho[0])||void 0===e?void 0:e.URL_DOC_GERADO)+"?alt=media&token=0")},className:"text-primary mx-1",children:Object(h.jsx)("i",{className:"text-primary  feather icon-file-text"})}),0==Object(D.s)(T,z,"Ler")?null:Object(h.jsx)(u.b,{to:"#",title:Object(D.u)(T,z,"Ler"),onClick:()=>tt(f),className:"text-primary mx-1",children:Object(h.jsx)("i",{className:"text-primary "+Object(D.t)(T,z,"Ler")})}),"black"!=_&&0!=Object(D.s)(T,z,"Instrucao")&&Object(h.jsx)(u.b,{to:"#",title:"Instru\xe7\xe3o",onClick:()=>ot(f),className:"text-primary mx-1",children:Object(h.jsx)("i",{className:"text-primary "+Object(D.t)(T,z,"Instrucao")})}),0==Object(D.s)(T,z,"Editar")&&null==(null===(j=t.data[s])||void 0===j||null===(p=j.sgigjprocessodespacho[0])||void 0===p||null===(O=p.sgigjrelprocessoinstrutor[0])||void 0===O||null===(b=O.sgigjrelprocessoinstrucao[0])||void 0===b?void 0:b.RELATORIO_FINAL)?null:Object(h.jsx)(u.b,{to:"#",title:"Instru\xe7\xe3o Despacho",onClick:()=>J("Deseja resgatar o processo?",{doit:Qt,id:f.id}),className:"text-primary mx-1",children:Object(h.jsx)("i",{className:"text-primary feather icon-power"})})]}),t.data[s].colorx=_,t.data[s].COLOR_STATUS=Object(h.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(h.jsx)("div",{style:{backgroundColor:"red",width:"20px",height:"20px",borderRadius:"50%"}}),Object(h.jsx)("div",{style:{backgroundColor:"orange",width:"20px",height:"20px",borderRadius:"50%"}}),Object(h.jsx)("div",{style:{backgroundColor:"yellow",width:"20px",height:"20px",borderRadius:"50%"}}),Object(h.jsx)("div",{style:{backgroundColor:"green",width:"20px",height:"20px",borderRadius:"50%"}}),Object(h.jsx)("div",{style:{backgroundColor:"#fff",width:"20px",height:"20px",borderRadius:"50%",border:"2px solid blue"}}),Object(h.jsx)("div",{style:{backgroundColor:"#fff",width:"20px",height:"20px",borderRadius:"50%",border:"2px solid brown"}}),Object(h.jsx)("div",{style:{backgroundColor:"#fff",width:"20px",height:"20px",borderRadius:"50%",border:"2px solid purple"}})]})}var _=t.data.filter(e=>"black"==e.colorx||"blue"==e.colorx||"orange"==e.colorx);He(_)}0==ne.length&&re(a)}catch(w){console.error(w.response)}}const[ze,Xe]=Object(o.useState)(null),[Je,We]=Object(o.useState)({}),[Ke,Qe]=Object(o.useState)("Despacho"),[Ze,Ye]=Object(o.useState)(""),[$e,et]=Object(o.useState)(!1),tt=async e=>{try{const r=await f.a.get("/sgigjprocessoexclusao/"+e.id);if("200"==r.status&&r.data.length>0){var t,a,s,o,l,c;r.data[0].id=r.data[0].ID,r.data[0].id=r.data[0].ID,r.data[0].DATA2=Object(D.f)(r.data[0].DATA),r.data[0].PESSOA=null===(t=r.data[0].sgigjpessoa)||void 0===t?void 0:t.NOME,r.data[0].ORIGEM=null===(a=r.data[0].sgigjprorigemtp)||void 0===a?void 0:a.DESIG,r.data[0].PESSOAREGISTO=null===(s=r.data[0].sgigjrelpessoaentidade)||void 0===s||null===(o=s.sgigjpessoa)||void 0===o?void 0:o.NOME,r.data[0].ENTIDADEREGISTO=null===(l=r.data[0])||void 0===l||null===(c=l.sgigjentidade)||void 0===c?void 0:c.DESIG;let e=null,d=null,j=null;var i,n;if(r.data[0].sgigjprocessodespacho.length>0)if(null!=r.data[0].sgigjprocessodespacho[0].URL_DOC_GERADO&&(e={DATA:Object(D.f)(r.data[0].sgigjprocessodespacho[0].DATA),REFERENCIA:r.data[0].sgigjprocessodespacho[0].REFERENCIA,PRAZO:r.data[0].sgigjprocessodespacho[0].PRAZO,OBS:r.data[0].sgigjprocessodespacho[0].OBS,DOC:r.data[0].sgigjprocessodespacho[0].URL_DOC_GERADO,INSTRUTOR:""}),e&&r.data[0].sgigjprocessodespacho[0].sgigjrelprocessoinstrutor.length>0)e.INSTRUTOR=null===(i=r.data[0].sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelpessoaentidade)||void 0===i||null===(n=i.sgigjpessoa)||void 0===n?void 0:n.NOME,r.data[0].sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao.length>0&&(d={list:r.data[0].sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao[0].sgigjrelinstrutorpeca},r.data[0].sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao[0].sgigjprocessodespacho.length>0&&null!=r.data[0].sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao[0].sgigjprocessodespacho[0].URL_DOC_GERADO&&(j={DOC:r.data[0].sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao[0].sgigjprocessodespacho[0].URL_DOC_GERADO,DATA:Object(D.f)(r.data[0].sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao[0].sgigjprocessodespacho[0].DATA),DESICAO:r.data[0].sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao[0].sgigjprocessodespacho[0].sgigjprdecisaotp.TIPO}));r.data[0].sgigjdespachofinal.length>0&&null!=r.data[0].sgigjdespachofinal[0].URL_DOC_GERADO&&(j={DOC:r.data[0].sgigjdespachofinal[0].URL_DOC_GERADO,DATA:Object(D.f)(r.data[0].sgigjdespachofinal[0].DATA),DESICAO:r.data[0].sgigjdespachofinal[0].sgigjprdecisaotp.TIPO}),console.log(j),r.data[0].despacho=e,r.data[0].instrucao=d,r.data[0].despachofinal=j,console.log(d),Xe(r.data[0]),et(!0),console.log(r.data[0])}}catch(r){console.error(r)}};async function at(e){var t={status:!1,file:null};try{const a=new FormData;a.append("file",e);const s={headers:{"content-type":"multipart/form-data"}};t={status:!0,file:await f.a.post("/upload",a,s)}}catch(a){console.error(a.response),t={status:!1,file:null}}return t}const st=e=>{ct(!0),Ie(e),nt("")};const ot=async e=>{Q(e)};Object(o.useEffect)(()=>{Ve(),Ee(),async function(){try{const e=await f.a.get("/sgigjprdocumentotp");"200"==e.status&&ke(e.data)}catch(e){console.error(e.response)}}()},[]);const[lt,ct]=Object(o.useState)(!1),[it,nt]=Object(o.useState)(""),[rt,dt]=Object(o.useState)(!1),[jt,ut]=Object(o.useState)(null),[pt,Ot]=Object(o.useState)(!1),[bt,ht]=Object(o.useState)(!1),[mt,xt]=Object(o.useState)(!1);const[gt,ft]=Object(o.useState)({code:0,value:!1}),[vt,yt]=Object(o.useState)(!1),[Dt,Nt]=Object(o.useState)(""),[Ct,It]=Object(o.useState)(""),[St,At]=Object(o.useState)(""),[Et,_t]=Object(o.useState)(""),[Tt,Rt]=Object(o.useState)(""),[wt,Pt]=Object(o.useState)(""),[Lt,Ft]=Object(o.useState)(""),[kt,Bt]=Object(o.useState)(""),[Ut,Gt]=Object(o.useState)(""),[Mt,qt]=Object(o.useState)("");(new Date).toISOString().substring(0,10);const[Ht,Vt]=Object(o.useState)(!1),[zt,Xt]=Object(o.useState)(!1),[Jt,Wt]=Object(o.useState)([]);function Kt(e){var t=[];t=null===e||void 0===e?void 0:e.sgigjreldocumento,console.log("Roberto",e),null==e.URL_DOC&&null==e.URL_DOC_GERADO||t.push({DOC_URL:e.URL_DOC?e.URL_DOC:e.URL_DOC_GERADO,sgigjprdocumentotp:{DESIG:"Documento gerado"}}),Xt(!0),Wt(null===e||void 0===e?void 0:e.sgigjreldocumento)}async function Qt(e){let t=!1;try{200===(await f.a.get("/sgigjprocessoexclusao/".concat(e,"/resgatar"))).status&&(Ve(),C.a.success("Processo Resgatado!",{duration:4e3}),t=!0)}catch(a){console.error(a.response)}return t}const[Zt,Yt]=Object(o.useState)(),[$t,ea]=Object(o.useState)(!1);async function ta(e){let t=[];try{const o=await f.a.get("/sgigjprocessoexclusao/"+e);"200"==o.status&&o.data.length>0&&(o.data[0].id=o.data[0].ID,o.data[0].sgigjprocessodespacho.length>0&&o.data[0].sgigjprocessodespacho[0].sgigjrelprocessoinstrutor.length>0&&o.data[0].sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao.length>0&&(t=o.data[0].sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao[0].sgigjrelinstrutorpeca));var a=[];if(t.length>0)for(let e=0;e<t.length;e++){const s=t[e];for(let e=0;e<s.sgigjreldocumento.length;e++){const t=s.sgigjreldocumento[e];a.push(t.DOC_URL)}null!=s.URL_DOC&&a.push(s.URL_DOC)}console.log("GO_ER");const l=await f.a.get("/juntada/"+e);if("200"==l.status){const e=l.data.buffer.data,t=new Uint8Array(e).buffer;var s=new Blob([t],{type:"application/pdf"});const a=URL.createObjectURL(s);console.log(s),Yt(a),ea(!0)}}catch(o){console.error(o)}}return Object(h.jsx)(l.a.Fragment,{children:Object(h.jsx)(c.a,{children:Object(h.jsxs)(i.a,{sm:12,children:[Object(h.jsx)(n.a,{children:Object(h.jsx)(n.a.Body,{children:null==K?Object(h.jsx)(R,{listAno:ne,uploadList:Ve,columns:$,data:qe,modalOpen:()=>{Ot(!0),ht(!1),et(!1),te([]),se(""),le(""),ie("")},pageAcess:T,permissoes:z}):Object(h.jsx)(_.a,{decisaolist:Ge,uploadlist:Ve,setinstrucaoitem:Q,pageAcess:T,permissoes:z,item:K})})}),Object(h.jsxs)(r.a,{size:"lg",show:$e,onHide:()=>et(!1),children:[Object(h.jsxs)(r.a.Header,{style:{border:"0"},closeButton:!0,children:[Object(h.jsx)(r.a.Title,{as:"h5"}),Object(h.jsx)(r.a.Title,{as:"h5",children:"Processo"})]}),null!=ze&&Object(h.jsx)(r.a.Body,{children:Object(h.jsxs)(c.a,{children:[Object(h.jsxs)(i.a,{xl:4,className:"task-detail-right",children:[Object(h.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:Object(h.jsxs)("span",{children:[Object(h.jsx)("i",{className:"feather icon-shield m-r-5"}),"Pedido"]})}),Object(h.jsx)("div",{style:{borderBottom:"1px solid #d2b32a",borderTop:"1px solid #d2b32a",marginBottom:"20px",marginTop:"6px",paddingTop:"20px"},children:Object(h.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",marginBottom:"15px"},children:[Object(h.jsxs)("span",{children:[Object(h.jsx)("i",{className:"feather icon-map-pin m-r-5"}),"Visado"]}),Object(h.jsx)("span",{style:{color:"#6c757d"},children:ze.PESSOA})]})}),Object(h.jsxs)("div",{style:{borderBottom:"1px solid #d2b32a",marginBottom:"20px"},children:[Object(h.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",marginBottom:"15px"},children:[Object(h.jsxs)("span",{children:[Object(h.jsx)("i",{className:"feather icon-map-pin m-r-5"}),"Entidade Decisora"]}),Object(h.jsx)("span",{style:{color:"#6c757d"},children:"IGJ"})]}),Object(h.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",marginBottom:"15px"},children:[Object(h.jsxs)("span",{children:[Object(h.jsx)("i",{className:"feather icon-map-pin m-r-5"}),"Pedido por"]}),Object(h.jsx)("span",{style:{color:"#6c757d"},children:ze.PESSOAREGISTO})]}),Object(h.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",marginBottom:"15px"},children:[Object(h.jsxs)("span",{children:[Object(h.jsx)("i",{className:"feather icon-map-pin m-r-5"}),"Data do Pedido"]}),Object(h.jsx)("span",{style:{color:"#6c757d"},children:ze.DATA2})]})]}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",marginBottom:"15px"},children:[Object(h.jsxs)("span",{children:[Object(h.jsx)("i",{className:"feather icon-phone m-r-5"}),"Descri\xe7\xe3o"]}),Object(h.jsx)("span",{style:{color:"#6c757d"},children:ze.DESCR})]}),null!=ze.URL_DOC_GERADO&&Object(h.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",marginBottom:"15px"},children:Object(h.jsx)("a",{target:"_blank",href:(null===ze||void 0===ze?void 0:ze.URL_DOC_GERADO)+"?alt=media&token=0",children:Object(h.jsx)("span",{style:{display:"flex",fontWeight:"bold"},children:"Abrir Pedido"})})})]})]}),Object(h.jsxs)(i.a,{xl:8,className:"task-detail-right",children:[Object(h.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"spaceAround"},children:[Object(h.jsxs)("span",{onClick:()=>Qe("Despacho"),style:"Despacho"==Ke?{paddingBottom:"4px",cursor:"pointer",borderBottom:"2px solid #d2b32a",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}:{paddingBottom:"4px",cursor:"pointer",borderBottom:"1px solid #E5E5E5",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(h.jsx)("i",{className:"feather icon-film m-r-5"}),"Despacho"]}),Object(h.jsxs)("span",{onClick:()=>Qe("Instrucao"),style:"Instrucao"==Ke?{paddingBottom:"4px",cursor:"pointer",borderBottom:"2px solid #d2b32a",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}:{paddingBottom:"4px",cursor:"pointer",borderBottom:"1px solid #E5E5E5",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(h.jsx)("i",{className:"feather icon-voicemail m-r-5"}),"Instru\xe7\xe3o"]}),Object(h.jsxs)("span",{onClick:()=>Qe("Despachofinal"),style:"Despachofinal"==Ke?{paddingBottom:"4px",cursor:"pointer",borderBottom:"2px solid #d2b32a",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}:{paddingBottom:"4px",cursor:"pointer",borderBottom:"1px solid #E5E5E5",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(h.jsx)("i",{className:"feather icon-file-text m-r-5"}),"Despacho Decis\xe3o"]})]}),Object(h.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"spaceAround",marginTop:"20px"},children:[Object(h.jsxs)("span",{onClick:()=>Qe("Notificacao"),style:"Notificacao"==Ke?{paddingBottom:"4px",cursor:"pointer",borderBottom:"2px solid #d2b32a",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}:{paddingBottom:"4px",cursor:"pointer",borderBottom:"1px solid #E5E5E5",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(h.jsx)("i",{className:"feather icon-file-text m-r-5"}),"Notifica\xe7\xe3o"]}),Object(h.jsxs)("span",{onClick:()=>Qe("DesicaoTutela"),style:"DesicaoTutela"==Ke?{paddingBottom:"4px",cursor:"pointer",borderBottom:"2px solid #d2b32a",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}:{paddingBottom:"4px",cursor:"pointer",borderBottom:"1px solid #E5E5E5",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(h.jsx)("i",{className:"feather icon-file-text m-r-5"}),"Decis\xe3o Tutela"]}),Object(h.jsxs)("span",{onClick:()=>Qe("DesicaoTribunal"),style:"DesicaoTribunal"==Ke?{paddingBottom:"4px",cursor:"pointer",borderBottom:"2px solid #d2b32a",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}:{paddingBottom:"4px",cursor:"pointer",borderBottom:"1px solid #E5E5E5",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(h.jsx)("i",{className:"feather icon-file-text m-r-5"}),"Decis\xe3o Tribunal"]})]}),Object(h.jsx)("div",{style:"Despacho"==Ke?{width:"100%",height:"450px",overflow:"auto"}:{display:"none"},children:null!=(null===ze||void 0===ze?void 0:ze.despacho)&&Object(h.jsxs)("div",{style:{width:"100%",paddingTop:"20px",marginTop:"20px"},children:[Object(h.jsxs)("div",{style:{padding:"5px",borderBottom:"1px solid #d2b32a",width:"100%",display:"flex",marginBottom:"10px"},children:[Object(h.jsx)("span",{style:{color:"#6c757d",width:"37%"},children:"Refer\xeancia"}),Object(h.jsx)("span",{style:{color:"#6c757d",width:"37%"},children:null===ze||void 0===ze||null===(e=ze.despacho)||void 0===e?void 0:e.REFERENCIA})]}),Object(h.jsxs)("div",{style:{padding:"5px",borderBottom:"1px solid #d2b32a",width:"100%",display:"flex",marginBottom:"10px"},children:[Object(h.jsx)("span",{style:{color:"#6c757d",width:"37%"},children:"Data"}),Object(h.jsx)("span",{style:{color:"#6c757d",width:"37%"},children:null===ze||void 0===ze||null===(t=ze.despacho)||void 0===t?void 0:t.DATA})]}),Object(h.jsxs)("div",{style:{padding:"5px",borderBottom:"1px solid #d2b32a",width:"100%",display:"flex",marginBottom:"10px"},children:[Object(h.jsx)("span",{style:{color:"#6c757d",width:"37%"},children:"Prazo"}),Object(h.jsx)("span",{style:{color:"#6c757d",width:"37%"},children:null===ze||void 0===ze||null===(a=ze.despacho)||void 0===a?void 0:a.PRAZO})]}),Object(h.jsxs)("div",{style:{padding:"5px",borderBottom:"1px solid #d2b32a",width:"100%",display:"flex",marginBottom:"10px"},children:[Object(h.jsx)("span",{style:{color:"#6c757d",width:"37%"},children:"Instrutor"}),Object(h.jsx)("span",{style:{color:"#6c757d",width:"37%"},children:null===ze||void 0===ze||null===(s=ze.despacho)||void 0===s?void 0:s.INSTRUTOR})]}),Object(h.jsxs)("div",{style:{padding:"5px",borderBottom:"1px solid #d2b32a",width:"100%",display:"flex",marginBottom:"10px"},children:[Object(h.jsx)("span",{style:{color:"#6c757d",width:"37%"},children:"Observa\xe7\xe3o"}),Object(h.jsx)("span",{style:{color:"#6c757d",width:"37%"},children:null===ze||void 0===ze||null===(b=ze.despacho)||void 0===b?void 0:b.OBS})]}),null!=(null===ze||void 0===ze||null===(m=ze.despacho)||void 0===m?void 0:m.DOC)&&Object(h.jsx)("div",{style:{width:"100%",display:"flex",marginBottom:"15px",display:"flex",justifyContent:"center"},children:Object(h.jsx)("a",{target:"_blank",href:(null===ze||void 0===ze||null===(x=ze.despacho)||void 0===x?void 0:x.DOC)+"?alt=media&token=0",children:Object(h.jsx)("span",{style:{display:"flex",fontWeight:"bold"},children:"Abrir Documento"})})})]})}),Object(h.jsx)("div",{style:"Instrucao"==Ke?{width:"100%",height:"450px",overflow:"auto"}:{display:"none"},children:null!=(null===ze||void 0===ze||null===(g=ze.sgigjprocessodespacho[0])||void 0===g||null===(N=g.sgigjrelprocessoinstrutor[0])||void 0===N||null===(A=N.sgigjrelprocessoinstrucao[0])||void 0===A?void 0:A.sgigjrelinstrutorpeca)&&Object(h.jsxs)("div",{style:{width:"100%",paddingTop:"20px",marginTop:"20px"},children:[null===ze||void 0===ze||null===(w=ze.sgigjprocessodespacho[0])||void 0===w||null===(P=w.sgigjrelprocessoinstrutor[0])||void 0===P||null===(L=P.sgigjrelprocessoinstrucao[0])||void 0===L||null===(F=L.sgigjrelinstrutorpeca)||void 0===F?void 0:F.map(e=>Object(h.jsxs)("div",{style:{padding:"5px",borderBottom:"1px solid #d2b32a",width:"100%",display:"flex",marginBottom:"10px"},children:[Object(h.jsx)("span",{style:{color:"#6c757d"},children:null===e||void 0===e?void 0:e.sgigjprpecasprocessual.DESIG}),Object(h.jsx)("span",{style:{color:"#6c757d"},children:Object(h.jsx)(u.b,{to:"#",onClick:()=>Kt(e),children:Object(h.jsx)("i",{className:"feather icon-file"})})})]})),Object(h.jsx)("div",{style:{width:"100%",display:"flex",marginBottom:"15px",display:"flex",justifyContent:"center"},children:Object(h.jsx)("a",{href:"#",children:Object(h.jsx)("span",{onClick:()=>ta(ze.ID),style:{display:"flex",fontWeight:"bold"},children:"Juntada"})})})]})}),Object(h.jsx)("div",{style:"Despachofinal"==Ke?{width:"100%",height:"450px",overflow:"auto"}:{display:"none"},children:null!=(null===ze||void 0===ze?void 0:ze.despachofinal)&&Object(h.jsxs)("div",{style:{width:"100%",paddingTop:"20px",marginTop:"20px"},children:[Object(h.jsxs)("div",{style:{padding:"5px",borderBottom:"1px solid #d2b32a",width:"100%",display:"flex",marginBottom:"10px"},children:[Object(h.jsx)("span",{style:{color:"#6c757d",width:"37%"},children:"Decis\xe3o"}),Object(h.jsx)("span",{style:{color:"#6c757d",width:"37%"},children:null===ze||void 0===ze||null===(k=ze.despachofinal)||void 0===k?void 0:k.DESICAO})]}),Object(h.jsxs)("div",{style:{padding:"5px",borderBottom:"1px solid #d2b32a",width:"100%",display:"flex",marginBottom:"10px"},children:[Object(h.jsx)("span",{style:{color:"#6c757d",width:"37%"},children:"Data"}),Object(h.jsx)("span",{style:{color:"#6c757d",width:"37%"},children:null===ze||void 0===ze||null===(B=ze.despachofinal)||void 0===B?void 0:B.DATA})]}),null!=(null===ze||void 0===ze||null===(U=ze.despachofinal)||void 0===U?void 0:U.DOC)&&Object(h.jsx)("div",{style:{width:"100%",display:"flex",marginBottom:"15px",display:"flex",justifyContent:"center"},children:Object(h.jsx)("a",{target:"_blank",href:(null===ze||void 0===ze||null===(G=ze.despachofinal)||void 0===G?void 0:G.DOC)+"?alt=media&token=0",children:Object(h.jsx)("span",{style:{display:"flex",fontWeight:"bold"},children:"Abrir Documento"})})})]})}),Object(h.jsx)("div",{style:"Notificacao"==Ke?{width:"100%",height:"450px",overflow:"auto"}:{display:"none"},children:null!=(null===ze||void 0===ze?void 0:ze.notificacao)&&Object(h.jsxs)("div",{style:{width:"100%",paddingTop:"20px",marginTop:"20px"},children:[null===ze||void 0===ze||null===(M=ze.notificacao)||void 0===M?void 0:M.map(e=>{var t;return console.log("okokok",e),Object(h.jsx)("div",{children:null===(t=e.visados)||void 0===t?void 0:t.map((t,a)=>{var s;return Object(h.jsx)("div",{style:{padding:"5px",borderBottom:"1px solid #d2b32a",width:"100%",display:"flex",marginBottom:"10px"},children:Object(h.jsxs)("span",{style:{color:"#6c757d"},children:[":: Notif."," ",null===Se||void 0===Se||null===(s=Se.find(e=>e.value==t.VISADO_ID))||void 0===s?void 0:s.label,null!=e.URL_DOC_GERADO||e.sgigjreldocumento.length>0?Object(h.jsx)(u.b,{to:"#",onClick:()=>Kt(e),children:Object(h.jsx)("i",{className:"feather icon-file"})},a):""]})})})})}),Object(h.jsx)("div",{style:{width:"100%",display:"flex",marginBottom:"15px",display:"flex",justifyContent:"center"},children:Object(h.jsx)("a",{href:"#",children:Object(h.jsx)("span",{onClick:()=>ta(ze.ID),style:{display:"flex",fontWeight:"bold"},children:"Juntada"})})})]})}),Object(h.jsx)("div",{style:"DesicaoTutela"==Ke||"DesicaoTribunal"==Ke?{width:"100%",height:"450px",overflow:"auto"}:{display:"none"},children:null!=("DesicaoTutela"==Ke?null===ze||void 0===ze?void 0:ze.decisaoTutelar:"DesicaoTribunal"==Ke?null===ze||void 0===ze?void 0:ze.decisaoTribunal:null)&&Object(h.jsxs)("div",{style:{width:"100%",paddingTop:"20px",marginTop:"20px"},children:[null===(q="DesicaoTutela"==Ke?null===ze||void 0===ze?void 0:ze.decisaoTutelar:null===ze||void 0===ze?void 0:ze.decisaoTribunal)||void 0===q?void 0:q.map((e,t)=>{var a;return Object(h.jsx)("div",{style:{padding:"5px",borderBottom:"1px solid #d2b32a",width:"100%",display:"flex",marginBottom:"10px"},children:null===e||void 0===e||null===(a=e.sgigjreldocumento)||void 0===a?void 0:a.map((e,a)=>{var s;return Object(h.jsxs)("span",{style:{color:"#6c757d"},children:[":: Anexo"," ",(null===(s="DesicaoTutela"==Ke?null===ze||void 0===ze?void 0:ze.decisaoTutelar:null===ze||void 0===ze?void 0:ze.decisaoTribunal)||void 0===s?void 0:s.slice(0,t).reduce((e,t,a)=>{var s;return null!==(s=t.sgigjreldocumento)&&void 0!==s&&s.length?e+1:e},0))+(a+1)+" ",Object(h.jsx)(u.b,{to:"#",onClick:()=>Kt(e.DOC_URL),children:Object(h.jsx)("i",{className:"feather icon-file"})})]})})})}),Object(h.jsx)("div",{style:{width:"100%",display:"flex",marginBottom:"15px",display:"flex",justifyContent:"center"},children:Object(h.jsx)("a",{href:"#",children:Object(h.jsx)("span",{onClick:()=>ta(ze.ID),style:{display:"flex",fontWeight:"bold"},children:"Juntada"})})})]})})]})]})}),Object(h.jsx)(r.a.Footer,{children:Object(h.jsx)(d.a,{variant:"danger",onClick:()=>et(!1),children:"Fechar"})})]}),Object(h.jsx)(I.a,{generolist:_e,estadocivillist:Re,glbgeografialist:Pe,documentolist:Fe,contactolist:Be,pessoaopenDO:gt,uploadpessoa:Ee}),Object(h.jsx)(S.a,{Open:zt,setOpen:Xt,list:Jt}),Object(h.jsx)(r.a,{size:"xl",show:$t,onHide:()=>ea(!1),children:Object(h.jsx)("iframe",{height:1e3,src:"".concat(Zt),title:"pdf-viewer",width:"100%s"})}),Object(h.jsxs)(r.a,{size:"lg",show:lt,onHide:()=>ct(!1),children:[Object(h.jsx)(r.a.Header,{style:{border:"0"},closeButton:!0,children:Object(h.jsx)(r.a.Title,{as:"h5",children:"Notifica\xe7\xe3o"})}),Object(h.jsxs)(r.a.Body,{style:"dados"===de?{}:{display:"none"},children:[Object(h.jsx)("form",{id:"notificate",onSubmit:async function(e){if(e.preventDefault(),null==ee||0==ee.length)Y("Escolha uma Pessoa");else{De(!0);var t=[];if(ue)for(let s=0;s<ue.length;s++){var a;const e=ue[s],o=await at(e.anexo.file);t.push({PR_DOCUMENTO_TP_ID:e.tipodocumento,NUMERO:e.numero,DOC_URL:null===o||void 0===o||null===(a=o.file)||void 0===a?void 0:a.data,DT_EMISSAO:e.dataemissao,DT_VALIDADE:e.datavalidade,MAIN:"0"})}console.log(W);const e={PROCESSO_EXCLUSAO_ID:Ce.ID,CORPO:ae,documentos:t||[],visados:ee,DATA:oe,TIPO_NOTIFICACAO:it};console.log(e);try{"200"==(await f.a.post("/notificacao-processos",e)).status&&(Ve(),ve(!fe),C.a.success("Todos os dados foram gravados com sucesso!",{duration:4e3}),De(!1),ct(!1))}catch(s){De(!1),console.error(s.response)}}},children:Object(h.jsxs)(c.a,{children:[Object(h.jsx)(i.a,{sm:12,children:Object(h.jsxs)(c.a,{children:[Object(h.jsx)(i.a,{sm:3,children:Object(h.jsxs)("div",{className:"form-group fill",children:[Object(h.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Refer\xeancia ",Object(h.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(h.jsx)("input",{disabled:!0,type:"text",className:"form-control",id:"Name",value:Ce.REF,required:!0})]})}),Object(h.jsx)(i.a,{sm:3,children:Object(h.jsxs)("div",{className:"form-group fill",children:[Object(h.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Data ",Object(h.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(h.jsx)("input",{type:"date",max:Ne,onChange:e=>{le(e.target.value)},defaultValue:oe,className:"form-control",placeholder:"Data...",required:!0})]})}),Object(h.jsx)(i.a,{sm:3,children:Object(h.jsxs)("div",{className:"form-group fill",children:[Object(h.jsxs)("label",{className:"floating-label",htmlFor:"tipoNotificacao",children:["Tipo de Notifica\xe7\xe3o ",Object(h.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(h.jsxs)("select",{className:"form-control",value:it,onChange:e=>nt(e.target.value),required:!0,children:[Object(h.jsx)("option",{value:"",children:"Selecionar..."}),Object(h.jsx)("option",{value:"PESSOAL",children:"Pessoal"}),Object(h.jsx)("option",{value:"POSTAL",children:"Postal"}),Object(h.jsx)("option",{value:"PUBLICACAO",children:"Publica\xe7\xe3o"})]})]})}),Object(h.jsxs)(i.a,{sm:6,children:[Object(h.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["Visado(s) ",Object(h.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(h.jsx)("div",{style:{display:"flex"},children:Object(h.jsx)("div",{className:"form-group fill",style:{width:"100%"},children:Object(h.jsx)(p.a,{className:"basic-single",classNamePrefix:"select",onChange:e=>te(t=>{let a=ee.indexOf(e.value);return-1!=a?t.splice(a,1):t.push(e.value),t}),name:"pessoa",options:Se,defaultValue:Se.map(e=>ee.includes(e.ID)?e:null),required:!0,menuPlacement:"auto",menuPosition:"fixed",placeholder:"Pessoa..."})})})]})]})}),Object(h.jsx)("div",{className:"col-sm-12",children:Object(h.jsxs)("div",{className:"form-group fill",children:[Object(h.jsxs)("label",{className:"floating-label",htmlFor:"Address",children:["Notifica\xe7\xe3o ",Object(h.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(h.jsx)(E.a,{onChange:e=>se(e)})]})})]})}),Object(h.jsx)("div",{children:null!==Ce&&void 0!==Ce&&Ce.sgigjdespachofinal&&null!==Ce&&void 0!==Ce&&null!==(H=Ce.sgigjdespachofinal[0])&&void 0!==H&&H.URL_DOC_GERADO?Object(h.jsx)("a",{target:"_blank",href:(null===Ce||void 0===Ce||null===(V=Ce.sgigjdespachofinal[0])||void 0===V?void 0:V.URL_DOC_GERADO)+"?alt=media&token=0",children:Object(h.jsxs)("span",{style:{display:"flex",fontWeight:"bold"},children:[Object(h.jsx)("i",{className:"feather icon-file",style:{alignContent:"center"}}),"Documentos de Decis\xe3o"]})}):null})]}),Object(h.jsxs)(r.a.Footer,{children:[Object(h.jsx)(d.a,{variant:"danger",onClick:()=>ct(!1),children:"Fechar"}),ye?Object(h.jsx)(d.a,{variant:"primary",children:"Guardando"}):Object(h.jsx)(d.a,{type:"submit",form:"notificate",variant:"primary",children:"Guardar"})]})]}),Object(h.jsxs)(r.a,{size:"lg",show:1==rt,onHide:()=>dt(!1),children:[Object(h.jsx)(r.a.Header,{style:{border:"0"},closeButton:!0,children:Object(h.jsx)(r.a.Title,{as:"h5",children:"T"==jt?"Decicao Tulela":"Desicao Tribunal"})}),Object(h.jsx)("ul",{className:"nav nav-tabs profile-tabs nav-fill",id:"myTab",role:"tablist"}),Object(h.jsx)(r.a.Body,{children:Object(h.jsxs)("form",{id:"tutelaform",onSubmit:async function(e){e.preventDefault(),De(!0);var t=[];for(let l=0;l<Oe.length;l++){var a;const e=Oe[l],s=await at(e.anexo.file);t.push({PR_DOCUMENTO_TP_ID:e.tipodocumento,NUMERO:e.numero,DOC_URL:null===s||void 0===s||null===(a=s.file)||void 0===a?void 0:a.data,DT_EMISSAO:e.dataemissao,DT_VALIDADE:e.datavalidade,MAIN:"0"})}console.log(W);const s={PROCESSO_EXCLUSAO_ID:Ce.ID,CORPO:ae,documentos:t||[]};console.log(s);try{"200"==(await f.a.post("T"==jt?"/decisao-tutelar-processos":"/decisao-tribunal-processos",s)).status&&(Ve(),ve(!fe),C.a.success("Todos os dados foram gravados com sucesso!",{duration:4e3}),De(!1),dt(!1))}catch(o){De(!1),console.error(o.response)}},children:[Object(h.jsx)(i.a,{sm:12,children:Object(h.jsxs)(j.a.Group,{style:{display:"flex",justifyContent:"center",flexWrap:"wrap"},children:[Object(h.jsx)(j.a.Check,{inline:!0,custom:!0,required:!0,type:"radio",label:"Desicao Tutela",name:"supportedRadio",id:"averiguacao",checked:"T"==jt,onChange:()=>ut("T")}),Object(h.jsx)(j.a.Check,{inline:!0,custom:!0,required:!0,type:"radio",label:"Desicao Tribunal",name:"supportedRadio",id:"contraordenacao",checked:"TR"==jt,onChange:()=>ut("TR")})]})}),Object(h.jsx)(O.a,{onSendData:be,documentolist:Fe,list:xe,save:fe,item:{ID:Ce.ID,ENTIDADE:"TUTELA_ID"}})]})}),Object(h.jsxs)(r.a.Footer,{children:[Object(h.jsx)(d.a,{variant:"danger",onClick:()=>dt(!1),children:"Fechar"}),ye?Object(h.jsx)(d.a,{variant:"primary",children:"Guardando"}):Object(h.jsx)(d.a,{type:"submit",form:"tutelaform",variant:"primary",children:"Guardar"})]})]}),Object(h.jsx)(r.a,{size:"lg",show:mt,onHide:()=>xt(!1),children:Object(h.jsxs)(r.a.Footer,{children:[Object(h.jsx)(d.a,{variant:"danger",onClick:()=>xt(!1),children:"Fechar"}),Object(h.jsx)(d.a,{variant:"primary",children:"Guardar"})]})})]})})})}}}]);
//# sourceMappingURL=6.a58599d0.chunk.js.map