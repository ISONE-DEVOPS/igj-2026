{"version":3,"sources":["components/Widgets/KpiCard.js","components/Widgets/ChartCard.js","pages/processos/reclamacao/estatisticas/charts/reclamacaoMensalChart.js","pages/processos/reclamacao/estatisticas/charts/reclamacaoEntidadeChart.js","pages/processos/reclamacao/estatisticas/charts/reclamacaoAnualChart.js","pages/processos/reclamacao/estatisticas/index.js"],"names":["KpiCard","_ref","title","value","icon","color","subtitle","change","sparklineData","loading","format","sparklineOptions","chart","type","height","sparkline","enabled","animations","easing","speed","stroke","curve","width","fill","gradient","shadeIntensity","opacityFrom","opacityTo","stops","colors","tooltip","sparklineSeries","name","data","map","d","total","_jsx","Card","className","children","Body","_jsxs","style","borderLeft","concat","val","toFixed","Number","toLocaleString","undefined","Math","abs","length","Chart","options","series","ChartCard","Header","getReclamacaoMensalOptions","toolbar","show","plotOptions","bar","borderRadius","columnWidth","xaxis","categories","mes","year","month","split","parseInt","slice","formatMonth","labels","fontSize","rotateAlways","yaxis","forceNiceScale","grid","borderColor","strokeDashArray","y","formatter","dataLabels","getReclamacaoEntidadeOptions","horizontal","barHeight","maxWidth","x","entidade","getReclamacaoAnualOptions","String","ano","offsetY","ReclamacaoEstatisticas","permissoes","useAuth","setData","useState","setLoading","anoFiltro","setAnoFiltro","exporting","setExporting","contentRef","useRef","anos","Array","from","Date","getFullYear","_","i","fetchData","useCallback","async","params","response","api","get","error","console","useEffect","mensalChart","porMes","entidadeChart","porEntidade","anualChart","porAno","handleExportPDF","current","container","canvas","html2canvas","scale","useCORS","logging","backgroundColor","pdf","jsPDF","pageWidth","internal","pageSize","getWidth","pageHeight","getHeight","margin","setFontSize","setTextColor","text","hoje","toLocaleDateString","day","imgData","toDataURL","imgWidth","imgHeight","cursorY","availableHeight","addImage","srcY","srcWidth","pageImgHeight","addPage","sliceHeight","min","sliceCanvas","document","createElement","getContext","drawImage","sliceImg","sliceDisplayHeight","save","replace","pageEnable","Form","Control","as","size","onChange","e","target","a","Button","variant","onClick","disabled","ref","Row","Col","lg","sm","totalAnoCorrente","mediaMensal","topEntidade"],"mappings":"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","file":"static/js/23.93d8a659.chunk.js","sourcesContent":["import React from 'react';\nimport { Card } from 'react-bootstrap';\n// eslint-disable-next-line import/no-unresolved\nimport Chart from 'react-apexcharts/dist/react-apexcharts.esm';\n\nconst KpiCard = ({ title, value, icon, color, subtitle, change, sparklineData, loading, format }) => {\n\n    const formatValue = (val) => {\n        if (format === 'currency') {\n            if (val >= 1000000) return `${(val / 1000000).toFixed(1)}M CVE`;\n            if (val >= 1000) return `${(val / 1000).toFixed(0)}K CVE`;\n            return `${Number(val).toLocaleString('pt-CV')} CVE`;\n        }\n        if (format === 'percent') return `${val}%`;\n        if (val >= 1000000) return `${(val / 1000000).toFixed(1)}M`;\n        if (val >= 1000) return `${(val / 1000).toFixed(0)}K`;\n        return Number(val).toLocaleString('pt-CV');\n    };\n\n    const sparklineOptions = {\n        chart: {\n            type: 'area',\n            height: 40,\n            sparkline: { enabled: true },\n            animations: { enabled: true, easing: 'easeinout', speed: 800 }\n        },\n        stroke: { curve: 'smooth', width: 2 },\n        fill: {\n            type: 'gradient',\n            gradient: { shadeIntensity: 1, opacityFrom: 0.4, opacityTo: 0.1, stops: [0, 100] }\n        },\n        colors: [color || '#2B7FB9'],\n        tooltip: { enabled: false }\n    };\n\n    const sparklineSeries = sparklineData ? [{\n        name: title,\n        data: sparklineData.map(d => d.total || d)\n    }] : [];\n\n    if (loading) {\n        return (\n            <Card className=\"kpi-card\">\n                <Card.Body>\n                    <div className=\"kpi-skeleton\">\n                        <div className=\"skeleton-line skeleton-title\" />\n                        <div className=\"skeleton-line skeleton-value\" />\n                        <div className=\"skeleton-line skeleton-sparkline\" />\n                    </div>\n                </Card.Body>\n            </Card>\n        );\n    }\n\n    return (\n        <Card className=\"kpi-card\" style={{ borderLeft: `4px solid ${color || '#2B7FB9'}` }}>\n            <Card.Body className=\"p-3\">\n                <div className=\"d-flex justify-content-between align-items-start mb-2\">\n                    <div>\n                        <p className=\"kpi-title mb-0\">{title}</p>\n                        <h3 className=\"kpi-value mb-0\">{formatValue(value || 0)}</h3>\n                    </div>\n                    <div className=\"kpi-icon\" style={{ color: color || '#2B7FB9' }}>\n                        <i className={icon} />\n                    </div>\n                </div>\n                {subtitle && (\n                    <p className=\"kpi-subtitle mb-1\">\n                        {change !== undefined && (\n                            <span className={`kpi-change ${change >= 0 ? 'positive' : 'negative'}`}>\n                                <i className={`feather ${change >= 0 ? 'icon-trending-up' : 'icon-trending-down'}`} />\n                                {' '}{Math.abs(change)}%\n                            </span>\n                        )}\n                        {' '}{subtitle}\n                    </p>\n                )}\n                {sparklineData && sparklineData.length > 1 && (\n                    <div className=\"kpi-sparkline\">\n                        <Chart options={sparklineOptions} series={sparklineSeries} type=\"area\" height={40} />\n                    </div>\n                )}\n            </Card.Body>\n        </Card>\n    );\n};\n\nexport default KpiCard;\n","import React from 'react';\nimport { Card } from 'react-bootstrap';\n\nconst ChartCard = ({ title, subtitle, children, loading, height }) => {\n\n    if (loading) {\n        return (\n            <Card className=\"chart-card\">\n                <Card.Header className=\"chart-card-header\">\n                    <div className=\"skeleton-line skeleton-title\" style={{ width: '60%' }} />\n                </Card.Header>\n                <Card.Body className=\"chart-card-body\">\n                    <div className=\"chart-skeleton\" style={{ height: height || 300 }}>\n                        <div className=\"skeleton-chart-placeholder\" />\n                    </div>\n                </Card.Body>\n            </Card>\n        );\n    }\n\n    return (\n        <Card className=\"chart-card\">\n            <Card.Header className=\"chart-card-header\">\n                <h6 className=\"chart-card-title mb-0\">{title}</h6>\n                {subtitle && <small className=\"chart-card-subtitle\">{subtitle}</small>}\n            </Card.Header>\n            <Card.Body className=\"chart-card-body p-2\">\n                {children}\n            </Card.Body>\n        </Card>\n    );\n};\n\nexport default ChartCard;\n","export const getReclamacaoMensalOptions = (data) => {\n    if (!data || !data.length) return null;\n\n    const formatMonth = (mes) => {\n        const [year, month] = mes.split('-');\n        const monthNames = ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'];\n        return `${monthNames[parseInt(month) - 1]} ${year.slice(2)}`;\n    };\n\n    return {\n        options: {\n            chart: {\n                type: 'bar',\n                height: 320,\n                toolbar: { show: false },\n                animations: { enabled: true, easing: 'easeinout', speed: 600 }\n            },\n            plotOptions: {\n                bar: { borderRadius: 4, columnWidth: '55%' }\n            },\n            colors: ['#FF8C00'],\n            xaxis: {\n                categories: data.map(d => formatMonth(d.mes)),\n                labels: { style: { colors: '#636E72', fontSize: '11px' }, rotateAlways: false }\n            },\n            yaxis: {\n                labels: { style: { colors: '#636E72', fontSize: '11px' } },\n                forceNiceScale: true\n            },\n            grid: { borderColor: '#f1f1f1', strokeDashArray: 3 },\n            tooltip: {\n                y: { formatter: (val) => `${val} reclamacao(oes)` }\n            },\n            dataLabels: { enabled: false }\n        },\n        series: [\n            { name: 'Reclamacoes', data: data.map(d => d.total) }\n        ]\n    };\n};\n\nexport default getReclamacaoMensalOptions;\n","export const getReclamacaoEntidadeOptions = (data) => {\n    if (!data || !data.length) return null;\n\n    return {\n        options: {\n            chart: {\n                type: 'bar',\n                height: 320,\n                toolbar: { show: false },\n                animations: { enabled: true, easing: 'easeinout', speed: 600 }\n            },\n            plotOptions: {\n                bar: { borderRadius: 4, horizontal: true, barHeight: '60%' }\n            },\n            colors: ['#1B4965'],\n            xaxis: {\n                labels: { style: { colors: '#636E72', fontSize: '11px' } },\n                forceNiceScale: true\n            },\n            yaxis: {\n                labels: { style: { colors: '#636E72', fontSize: '11px' }, maxWidth: 160 }\n            },\n            grid: { borderColor: '#f1f1f1', strokeDashArray: 3 },\n            tooltip: {\n                y: { formatter: (val) => `${val} reclamacao(oes)` }\n            },\n            dataLabels: {\n                enabled: true,\n                style: { fontSize: '11px', colors: ['#fff'] }\n            }\n        },\n        series: [\n            {\n                name: 'Reclamacoes',\n                data: data.map(d => ({\n                    x: d.entidade,\n                    y: d.total\n                }))\n            }\n        ]\n    };\n};\n\nexport default getReclamacaoEntidadeOptions;\n","export const getReclamacaoAnualOptions = (data) => {\n    if (!data || !data.length) return null;\n\n    return {\n        options: {\n            chart: {\n                type: 'bar',\n                height: 320,\n                toolbar: { show: false },\n                animations: { enabled: true, easing: 'easeinout', speed: 600 }\n            },\n            plotOptions: {\n                bar: { borderRadius: 4, columnWidth: '45%' }\n            },\n            colors: ['#C5A55A'],\n            xaxis: {\n                categories: data.map(d => String(d.ano)),\n                labels: { style: { colors: '#636E72', fontSize: '11px' } }\n            },\n            yaxis: {\n                labels: { style: { colors: '#636E72', fontSize: '11px' } },\n                forceNiceScale: true\n            },\n            grid: { borderColor: '#f1f1f1', strokeDashArray: 3 },\n            tooltip: {\n                y: { formatter: (val) => `${val} reclamacao(oes)` }\n            },\n            dataLabels: {\n                enabled: true,\n                style: { fontSize: '12px', colors: ['#1B4965'] },\n                offsetY: -20\n            }\n        },\n        series: [\n            { name: 'Reclamacoes', data: data.map(d => d.total) }\n        ]\n    };\n};\n\nexport default getReclamacaoAnualOptions;\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Row, Col, Form, Button } from 'react-bootstrap';\n// eslint-disable-next-line import/no-unresolved\nimport Chart from 'react-apexcharts/dist/react-apexcharts.esm';\nimport html2canvas from 'html2canvas';\nimport jsPDF from 'jspdf';\n\nimport api from '../../../../services/api';\nimport useAuth from '../../../../hooks/useAuth';\nimport KpiCard from '../../../../components/Widgets/KpiCard';\nimport ChartCard from '../../../../components/Widgets/ChartCard';\n\nimport { getReclamacaoMensalOptions } from './charts/reclamacaoMensalChart';\nimport { getReclamacaoEntidadeOptions } from './charts/reclamacaoEntidadeChart';\nimport { getReclamacaoAnualOptions } from './charts/reclamacaoAnualChart';\n\nimport { pageEnable } from '../../../../functions';\n\nimport './estatisticas.scss';\n\nconst pageAcess = '/processos/reclamacao/estatisticas';\n\nconst ReclamacaoEstatisticas = () => {\n    const { permissoes } = useAuth();\n    const [data, setData] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [anoFiltro, setAnoFiltro] = useState('');\n    const [exporting, setExporting] = useState(false);\n    const contentRef = useRef(null);\n\n    const anos = Array.from({ length: new Date().getFullYear() - 2022 + 1 }, (_, i) => 2022 + i);\n\n    const fetchData = useCallback(async () => {\n        setLoading(true);\n        try {\n            const params = {};\n            if (anoFiltro) params.ano = anoFiltro;\n            const response = await api.get('/reclamacao/estatisticas', { params });\n            setData(response.data);\n        } catch (error) {\n            console.error('Erro ao carregar estatisticas:', error);\n        }\n        setLoading(false);\n    }, [anoFiltro]);\n\n    useEffect(() => {\n        fetchData();\n    }, [fetchData]);\n\n    const mensalChart = data ? getReclamacaoMensalOptions(data.porMes) : null;\n    const entidadeChart = data ? getReclamacaoEntidadeOptions(data.porEntidade) : null;\n    const anualChart = data ? getReclamacaoAnualOptions(data.porAno) : null;\n\n    const handleExportPDF = useCallback(async () => {\n        if (!contentRef.current) return;\n        setExporting(true);\n        try {\n            const container = contentRef.current;\n            const canvas = await html2canvas(container, {\n                scale: 1.5,\n                useCORS: true,\n                logging: false,\n                backgroundColor: '#F5F7FA'\n            });\n\n            const pdf = new jsPDF('l', 'mm', 'a4');\n            const pageWidth = pdf.internal.pageSize.getWidth();\n            const pageHeight = pdf.internal.pageSize.getHeight();\n            const margin = 10;\n\n            pdf.setFontSize(14);\n            pdf.setTextColor(27, 73, 101);\n            pdf.text('SGIGJ - Estatisticas SGIGJ', margin, 12);\n            pdf.setFontSize(9);\n            pdf.setTextColor(99, 110, 114);\n            const hoje = new Date().toLocaleDateString('pt-CV', { day: '2-digit', month: '2-digit', year: 'numeric' });\n            pdf.text(`Exportado em ${hoje}`, pageWidth - margin - 40, 12);\n\n            const imgData = canvas.toDataURL('image/png');\n            const imgWidth = pageWidth - margin * 2;\n            const imgHeight = (canvas.height * imgWidth) / canvas.width;\n\n            let cursorY = 18;\n            const availableHeight = pageHeight - cursorY - margin;\n\n            if (imgHeight <= availableHeight) {\n                pdf.addImage(imgData, 'PNG', margin, cursorY, imgWidth, imgHeight);\n            } else {\n                // Multi-page\n                let srcY = 0;\n                const srcWidth = canvas.width;\n                const pageImgHeight = (availableHeight * srcWidth) / imgWidth;\n\n                while (srcY < canvas.height) {\n                    if (srcY > 0) {\n                        pdf.addPage();\n                        cursorY = margin;\n                    }\n                    const sliceHeight = Math.min(pageImgHeight, canvas.height - srcY);\n                    const sliceCanvas = document.createElement('canvas');\n                    sliceCanvas.width = srcWidth;\n                    sliceCanvas.height = sliceHeight;\n                    const ctx = sliceCanvas.getContext('2d');\n                    ctx.drawImage(canvas, 0, srcY, srcWidth, sliceHeight, 0, 0, srcWidth, sliceHeight);\n\n                    const sliceImg = sliceCanvas.toDataURL('image/png');\n                    const sliceDisplayHeight = (sliceHeight * imgWidth) / srcWidth;\n                    pdf.addImage(sliceImg, 'PNG', margin, cursorY, imgWidth, sliceDisplayHeight);\n\n                    srcY += sliceHeight;\n                }\n            }\n\n            pdf.save(`estatisticas-sgigj-${hoje.replace(/\\//g, '-')}.pdf`);\n        } catch (error) {\n            console.error('Erro ao exportar PDF:', error);\n        }\n        setExporting(false);\n    }, []);\n\n    if (!pageEnable(pageAcess, permissoes)) {\n        return (\n            <div className=\"reclamacao-stats\">\n                <div className=\"empty-state\">\n                    <i className=\"fas fa-lock\" />\n                    <p>Sem permissao para aceder a esta pagina.</p>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"reclamacao-stats\">\n            <div className=\"stats-header\">\n                <h4>Estatisticas SGIGJ</h4>\n                <div className=\"stats-actions\">\n                    <Form.Control\n                        as=\"select\"\n                        className=\"filter-select\"\n                        size=\"sm\"\n                        value={anoFiltro}\n                        onChange={(e) => setAnoFiltro(e.target.value)}\n                    >\n                        <option value=\"\">Todos os anos</option>\n                        {anos.map(a => (\n                            <option key={a} value={a}>{a}</option>\n                        ))}\n                    </Form.Control>\n                    <Button\n                        variant=\"outline-secondary\"\n                        size=\"sm\"\n                        onClick={fetchData}\n                        disabled={loading}\n                    >\n                        <i className=\"fas fa-sync-alt\" />\n                    </Button>\n                    <Button\n                        variant=\"outline-primary\"\n                        size=\"sm\"\n                        onClick={handleExportPDF}\n                        disabled={exporting || loading}\n                    >\n                        <i className=\"fas fa-file-pdf\" /> {exporting ? 'A exportar...' : 'PDF'}\n                    </Button>\n                </div>\n            </div>\n\n            <div ref={contentRef}>\n                {/* KPIs */}\n                <Row className=\"mb-4\">\n                    <Col lg={3} sm={6} className=\"mb-3\">\n                        <KpiCard\n                            title=\"Total Reclamacoes\"\n                            value={data?.total || 0}\n                            icon=\"fas fa-exclamation-circle\"\n                            color=\"#FF8C00\"\n                            loading={loading}\n                        />\n                    </Col>\n                    <Col lg={3} sm={6} className=\"mb-3\">\n                        <KpiCard\n                            title=\"Ano Corrente\"\n                            value={data?.totalAnoCorrente || 0}\n                            icon=\"fas fa-calendar\"\n                            color=\"#2B7FB9\"\n                            subtitle={`${new Date().getFullYear()}`}\n                            loading={loading}\n                        />\n                    </Col>\n                    <Col lg={3} sm={6} className=\"mb-3\">\n                        <KpiCard\n                            title=\"Media Mensal\"\n                            value={data?.mediaMensal || 0}\n                            icon=\"fas fa-chart-line\"\n                            color=\"#C5A55A\"\n                            loading={loading}\n                        />\n                    </Col>\n                    <Col lg={3} sm={6} className=\"mb-3\">\n                        <KpiCard\n                            title=\"Top Entidade\"\n                            value={data?.topEntidade || '-'}\n                            icon=\"fas fa-building\"\n                            color=\"#1B4965\"\n                            loading={loading}\n                        />\n                    </Col>\n                </Row>\n\n                {/* Charts Row 1: Mensal + Anual */}\n                <Row className=\"mb-4\">\n                    <Col lg={8} className=\"mb-3\">\n                        <ChartCard title=\"Evolucao Mensal\" subtitle=\"Reclamacoes por mes\" loading={loading}>\n                            {mensalChart ? (\n                                <Chart\n                                    options={mensalChart.options}\n                                    series={mensalChart.series}\n                                    type=\"bar\"\n                                    height={320}\n                                    width=\"100%\"\n                                />\n                            ) : (\n                                <div className=\"empty-state\">\n                                    <i className=\"fas fa-chart-bar\" />\n                                    <p>Sem dados disponiveis</p>\n                                </div>\n                            )}\n                        </ChartCard>\n                    </Col>\n                    <Col lg={4} className=\"mb-3\">\n                        <ChartCard title=\"Por Ano\" subtitle=\"Distribuicao anual\" loading={loading}>\n                            {anualChart ? (\n                                <Chart\n                                    options={anualChart.options}\n                                    series={anualChart.series}\n                                    type=\"bar\"\n                                    height={320}\n                                    width=\"100%\"\n                                />\n                            ) : (\n                                <div className=\"empty-state\">\n                                    <i className=\"fas fa-chart-bar\" />\n                                    <p>Sem dados disponiveis</p>\n                                </div>\n                            )}\n                        </ChartCard>\n                    </Col>\n                </Row>\n\n                {/* Charts Row 2: Por Entidade */}\n                <Row>\n                    <Col lg={12} className=\"mb-3\">\n                        <ChartCard title=\"Top Entidades\" subtitle=\"Entidades com mais reclamacoes\" loading={loading}>\n                            {entidadeChart ? (\n                                <Chart\n                                    options={entidadeChart.options}\n                                    series={entidadeChart.series}\n                                    type=\"bar\"\n                                    height={320}\n                                    width=\"100%\"\n                                />\n                            ) : (\n                                <div className=\"empty-state\">\n                                    <i className=\"fas fa-building\" />\n                                    <p>Sem dados disponiveis</p>\n                                </div>\n                            )}\n                        </ChartCard>\n                    </Col>\n                </Row>\n            </div>\n        </div>\n    );\n};\n\nexport default ReclamacaoEstatisticas;\n"],"sourceRoot":""}