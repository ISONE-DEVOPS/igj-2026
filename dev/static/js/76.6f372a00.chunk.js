(this["webpackJsonpigj-frontend"]=this["webpackJsonpigj-frontend"]||[]).push([[76],{1020:function(e,a,t){"use strict";t.r(a);var s=t(8),c=t(0),r=t.n(c),n=t(812),l=t(404),i=t(840),o=t(403),d=t(814),j=t(240),b=t.n(j),O=t(7),m=t(32),u=t(26),x=t(816),h=t(1);const p=e=>{let{filter:a,setFilter:t}=e;const[s,r]=Object(c.useState)(a),n=Object(x.useAsyncDebounce)(e=>{t(e||void 0)},1e3);return Object(h.jsxs)("span",{className:"d-flex align-items-center justify-content-end",children:["Procurar:"," ",Object(h.jsx)("input",{className:"form-control ml-2 w-auto",value:s||"",onChange:e=>{r(e.target.value),n(e.target.value)}})]})};var g=t(818),f=t(817),v=t(22),N=t(76);const E="/processos/reclamacao";function P(e){let{columns:a,data:t,modalOpen:r,uploadList:i}=e;const{permissoes:o}=Object(u.a)(),d=Object(c.useRef)(null),{getTableProps:j,getTableBodyProps:b,headerGroups:O,prepareRow:m,globalFilter:v,setGlobalFilter:N,page:E,canPreviousPage:P,canNextPage:D,pageOptions:y,pageCount:A,gotoPage:S,nextPage:R,previousPage:F,setPageSize:w,state:{pageIndex:C,pageSize:I}}=Object(x.useTable)({columns:a,data:t,initialState:{pageIndex:0,pageSize:10}},x.useGlobalFilter,x.useSortBy,x.usePagination);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(n.a,{className:"mb-3",children:[Object(h.jsxs)(l.a,{md:3,className:"d-flex align-items-center",children:["Mostrar",Object(h.jsx)("select",{className:"form-control w-auto mx-2",value:I,onChange:e=>{w(Number(e.target.value))},children:[5,10,20,30,40,50].map(e=>Object(h.jsx)("option",{value:e,children:e},e))}),"entradas"]}),Object(h.jsx)(l.a,{md:9,className:"d-flex justify-content-end",children:Object(h.jsx)(p,{filter:v,setFilter:N})})]}),Object(h.jsxs)(f.a,Object(s.a)(Object(s.a)({ref:d,striped:!0,bordered:!0,hover:!0,responsive:!0},j()),{},{children:[Object(h.jsx)("thead",{children:O.map(e=>Object(h.jsx)("tr",Object(s.a)(Object(s.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map(e=>Object(h.jsxs)("th",Object(s.a)(Object(s.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),Object(h.jsx)("span",{children:e.isSorted?e.isSortedDesc?Object(h.jsx)("span",{className:"feather icon-arrow-down text-muted float-right"}):Object(h.jsx)("span",{className:"feather icon-arrow-up text-muted float-right"}):""})]})))})))}),Object(h.jsx)("tbody",Object(s.a)(Object(s.a)({},b()),{},{children:E.map((e,a)=>(m(e),Object(h.jsx)("tr",Object(s.a)(Object(s.a)({},e.getRowProps()),{},{children:e.cells.map(e=>{const a=e.column.centered;return Object(h.jsx)("td",Object(s.a)(Object(s.a)({},e.getCellProps()),{},{className:a?"text-center":"text-right",children:e.render("Cell")}))})}))))}))]})),Object(h.jsxs)(n.a,{className:"justify-content-between",children:[Object(h.jsx)(l.a,{children:Object(h.jsxs)("span",{className:"d-flex align-items-center",children:["P\xe1gina"," ",Object(h.jsxs)("strong",{children:[" ",C+1," de ",y.length," "]})," ","| Ir para a p\xe1gina:"," ",Object(h.jsx)("input",{type:"number",className:"form-control ml-2",defaultValue:C+1,onChange:e=>{const a=e.target.value?Number(e.target.value)-1:0;S(a)},style:{width:"100px"}})]})}),Object(h.jsx)(l.a,{children:Object(h.jsxs)(g.a,{className:"justify-content-end",children:[Object(h.jsx)(g.a.First,{onClick:()=>S(0),disabled:!P}),Object(h.jsx)(g.a.Prev,{onClick:()=>F(),disabled:!P}),Object(h.jsx)(g.a.Next,{onClick:()=>R(),disabled:!D}),Object(h.jsx)(g.a.Last,{onClick:()=>S(A-1),disabled:!D})]})})]})]})}a.default=()=>{const{permissoes:e,user:a,popUp_removerItem:t,popUp_alertaOK:j}=Object(u.a)(),x=(Object(v.g)(),r.a.useMemo(()=>[{Header:"C\xf3digo",accessor:"CODIGO",centered:!1},{Header:"Processo",accessor:"PROCESSO_REF",centered:!0},{Header:"Visado",accessor:"VISADO_NOME",centered:!0},{Header:"Entidade",accessor:"ENTIDADE_NOME",centered:!0},{Header:"Data",accessor:"DATA_FORMATADA",centered:!0},{Header:"A\xe7\xf5es",accessor:"action",centered:!0}],[])),[p,g]=Object(c.useState)([]),[D,y]=Object(c.useState)(!1),[A,S]=Object(c.useState)(!1),[R,F]=Object(c.useState)(null);async function w(){try{const t=await m.a.get("/sgigjexclusaoreclamacao");if("200"==t.status){for(var a=0;a<t.data.length;a++){const s=t.data[a],c=s.sgigjprocessoexclusao||{},n=c.sgigjentidade||{},l=c.sgigjrelinterveniente||[],i=l.length>0&&l[0].sgigjpessoa||{},o=(s.sgigjrelpessoaentidade||{}).sgigjpessoa||{};t.data[a].PROCESSO_REF=c.REF||"",t.data[a].VISADO_NOME=i.NOME||"",t.data[a].ENTIDADE_NOME=n.DESIG||"",t.data[a].DATA_FORMATADA=Object(N.f)(s.DATA),t.data[a].REGISTADO_POR=o.NOME||"";const d=t.data[a];t.data[a].action=Object(h.jsx)(r.a.Fragment,{children:0==Object(N.s)(E,e,"Ler")?null:Object(h.jsx)(O.b,{to:"#",title:Object(N.u)(E,e,"Ler"),onClick:()=>C(d),className:"text-primary mx-1",children:Object(h.jsx)("i",{className:"text-primary "+Object(N.t)(E,e,"Ler")})})})}g(t.data)}}catch(t){console.error(t.response)}}const C=async e=>{try{const a=await m.a.get("/sgigjexclusaoreclamacao/"+e.ID);if("200"==a.status&&a.data.length>0){const e=a.data[0],t=e.sgigjprocessoexclusao||{},c=t.sgigjentidade||{},r=t.sgigjrelinterveniente||[],n=r.length>0&&r[0].sgigjpessoa||{},l=(e.sgigjrelpessoaentidade||{}).sgigjpessoa||{};e.PROCESSO_REF=t.REF||"",e.VISADO_NOME=n.NOME||"",e.ENTIDADE_NOME=c.DESIG||"",e.DATA_FORMATADA=Object(N.f)(e.DATA),e.REGISTADO_POR=l.NOME||"",e.pecas=(e.sgigjrelreclamacaopeca||[]).map(e=>{var a;return Object(s.a)({DESIG:(null===(a=e.sgigjprpecasprocessual)||void 0===a?void 0:a.DESIG)||""},e)}),F(e),S(!0)}}catch(a){console.error(a)}};return Object(c.useEffect)(()=>{w()},[]),Object(h.jsxs)(r.a.Fragment,{children:[Object(h.jsx)(n.a,{children:Object(h.jsx)(l.a,{children:Object(h.jsxs)(i.a,{children:[Object(h.jsxs)(i.a.Header,{children:[Object(h.jsx)(i.a.Title,{as:"h5",children:"Reclama\xe7\xf5es"}),Object(h.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(h.jsxs)(o.a,{variant:"outline-danger",className:"btn-sm mr-2",onClick:async function(){try{y(!0);const e=await m.a.get("/export-pdf/sgigjexclusaoreclamacao");"200"==e.status&&e.data.url&&(window.open(e.data.url+"?alt=media&token=0","_blank"),b.a.success("PDF exportado com sucesso!",{duration:4e3}))}catch(e){console.error(e.response),b.a.error("Erro ao exportar PDF",{duration:4e3})}finally{y(!1)}},disabled:D,children:[Object(h.jsx)("i",{className:"feather icon-file-text mr-1"}),"PDF"]}),Object(h.jsxs)(o.a,{variant:"outline-success",className:"btn-sm",onClick:async function(){try{y(!0);const e=await m.a.get("/export-csv/sgigjexclusaoreclamacao",{responseType:"blob"});if("200"==e.status){const a=window.URL.createObjectURL(new Blob([e.data])),t=document.createElement("a");t.href=a,t.setAttribute("download","reclamacoes.csv"),document.body.appendChild(t),t.click(),t.remove(),b.a.success("CSV exportado com sucesso!",{duration:4e3})}}catch(e){console.error(e.response),b.a.error("Erro ao exportar CSV",{duration:4e3})}finally{y(!1)}},disabled:D,children:[Object(h.jsx)("i",{className:"feather icon-download mr-1"}),"CSV"]})]})]}),Object(h.jsx)(i.a.Body,{children:Object(h.jsx)(P,{columns:x,data:p,uploadList:w})})]})})}),Object(h.jsxs)(d.a,{show:A,onHide:()=>S(!1),size:"lg",centered:!0,children:[Object(h.jsx)(d.a.Header,{closeButton:!0,children:Object(h.jsx)(d.a.Title,{children:"Detalhes da Reclama\xe7\xe3o"})}),Object(h.jsx)(d.a.Body,{children:R&&Object(h.jsxs)("div",{children:[Object(h.jsxs)(n.a,{className:"mb-3",children:[Object(h.jsxs)(l.a,{md:6,children:[Object(h.jsx)("strong",{children:"C\xf3digo:"})," ",R.CODIGO]}),Object(h.jsxs)(l.a,{md:6,children:[Object(h.jsx)("strong",{children:"Data:"})," ",R.DATA_FORMATADA]})]}),Object(h.jsxs)(n.a,{className:"mb-3",children:[Object(h.jsxs)(l.a,{md:6,children:[Object(h.jsx)("strong",{children:"Processo:"})," ",R.PROCESSO_REF]}),Object(h.jsxs)(l.a,{md:6,children:[Object(h.jsx)("strong",{children:"Entidade:"})," ",R.ENTIDADE_NOME]})]}),Object(h.jsxs)(n.a,{className:"mb-3",children:[Object(h.jsxs)(l.a,{md:6,children:[Object(h.jsx)("strong",{children:"Visado:"})," ",R.VISADO_NOME]}),Object(h.jsxs)(l.a,{md:6,children:[Object(h.jsx)("strong",{children:"Registado por:"})," ",R.REGISTADO_POR]})]}),R.OBS&&Object(h.jsx)(n.a,{className:"mb-3",children:Object(h.jsxs)(l.a,{md:12,children:[Object(h.jsx)("strong",{children:"Observa\xe7\xf5es:"}),Object(h.jsx)("p",{children:R.OBS})]})}),R.pecas&&R.pecas.length>0&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("hr",{}),Object(h.jsx)("h6",{children:"Pe\xe7as Processuais"}),Object(h.jsxs)(f.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(h.jsx)("thead",{children:Object(h.jsx)("tr",{children:Object(h.jsx)("th",{children:"Pe\xe7a Processual"})})}),Object(h.jsx)("tbody",{children:R.pecas.map((e,a)=>Object(h.jsx)("tr",{children:Object(h.jsx)("td",{children:e.DESIG})},a))})]})]})]})}),Object(h.jsx)(d.a.Footer,{children:Object(h.jsx)(o.a,{variant:"secondary",onClick:()=>S(!1),children:"Fechar"})})]})]})}},817:function(e,a,t){"use strict";var s=t(2),c=t(3),r=t(6),n=t.n(r),l=t(0),i=t.n(l),o=t(9),d=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],j=i.a.forwardRef(function(e,a){var t=e.bsPrefix,r=e.className,l=e.striped,j=e.bordered,b=e.borderless,O=e.hover,m=e.size,u=e.variant,x=e.responsive,h=Object(c.a)(e,d),p=Object(o.a)(t,"table"),g=n()(r,p,u&&p+"-"+u,m&&p+"-"+m,l&&p+"-striped",j&&p+"-bordered",b&&p+"-borderless",O&&p+"-hover"),f=i.a.createElement("table",Object(s.a)({},h,{className:g,ref:a}));if(x){var v=p+"-responsive";return"string"===typeof x&&(v=v+"-"+x),i.a.createElement("div",{className:v},f)}return f});a.a=j},818:function(e,a,t){"use strict";var s=t(2),c=t(3),r=t(6),n=t.n(r),l=t(0),i=t.n(l),o=t(9),d=t(131),j=["active","disabled","className","style","activeLabel","children"],b=["children"],O=i.a.forwardRef(function(e,a){var t=e.active,r=e.disabled,l=e.className,o=e.style,b=e.activeLabel,O=e.children,m=Object(c.a)(e,j),u=t||r?"span":d.a;return i.a.createElement("li",{ref:a,style:o,className:n()(l,"page-item",{active:t,disabled:r})},i.a.createElement(u,Object(s.a)({className:"page-link",disabled:r},m),O,t&&b&&i.a.createElement("span",{className:"sr-only"},b)))});O.defaultProps={active:!1,disabled:!1,activeLabel:"(current)"},O.displayName="PageItem";var m=O;function u(e,a,t){function s(e){var s=e.children,r=Object(c.a)(e,b);return i.a.createElement(O,r,i.a.createElement("span",{"aria-hidden":"true"},s||a),i.a.createElement("span",{className:"sr-only"},t))}return void 0===t&&(t=e),s.displayName=e,s}var x=u("First","\xab"),h=u("Prev","\u2039","Previous"),p=u("Ellipsis","\u2026","More"),g=u("Next","\u203a"),f=u("Last","\xbb"),v=["bsPrefix","className","children","size"],N=i.a.forwardRef(function(e,a){var t=e.bsPrefix,r=e.className,l=e.children,d=e.size,j=Object(c.a)(e,v),b=Object(o.a)(t,"pagination");return i.a.createElement("ul",Object(s.a)({ref:a},j,{className:n()(r,b,d&&b+"-"+d)}),l)});N.First=x,N.Prev=h,N.Ellipsis=p,N.Item=m,N.Next=g,N.Last=f;a.a=N}}]);
//# sourceMappingURL=76.6f372a00.chunk.js.map