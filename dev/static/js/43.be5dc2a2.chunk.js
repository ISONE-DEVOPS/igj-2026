(this["webpackJsonpigj-frontend"]=this["webpackJsonpigj-frontend"]||[]).push([[43],{826:function(e,t,a){"use strict";var c=a(0),s=a.n(c).a.createContext(null);s.displayName="CardContext",t.a=s},864:function(e,t,a){"use strict";var c=a(2),s=a(3),n=a(6),r=a.n(n),l=a(0),i=a.n(l),o=a(9),d=a(35),b=a(241),j=a(826),u=["bsPrefix","className","variant","as"],O=i.a.forwardRef(function(e,t){var a=e.bsPrefix,n=e.className,l=e.variant,d=e.as,b=void 0===d?"img":d,j=Object(s.a)(e,u),O=Object(o.a)(a,"card-img");return i.a.createElement(b,Object(c.a)({ref:t,className:r()(l?O+"-"+l:O,n)},j))});O.displayName="CardImg",O.defaultProps={variant:null};var p=O,h=["bsPrefix","className","bg","text","border","body","children","as"],f=Object(b.a)("h5"),m=Object(b.a)("h6"),g=Object(d.a)("card-body"),x=Object(d.a)("card-title",{Component:f}),v=Object(d.a)("card-subtitle",{Component:m}),y=Object(d.a)("card-link",{Component:"a"}),I=Object(d.a)("card-text",{Component:"p"}),S=Object(d.a)("card-header"),D=Object(d.a)("card-footer"),N=Object(d.a)("card-img-overlay"),E=i.a.forwardRef(function(e,t){var a=e.bsPrefix,n=e.className,d=e.bg,b=e.text,u=e.border,O=e.body,p=e.children,f=e.as,m=void 0===f?"div":f,x=Object(s.a)(e,h),v=Object(o.a)(a,"card"),y=Object(l.useMemo)(function(){return{cardHeaderBsPrefix:v+"-header"}},[v]);return i.a.createElement(j.a.Provider,{value:y},i.a.createElement(m,Object(c.a)({ref:t},x,{className:r()(n,v,d&&"bg-"+d,b&&"text-"+b,u&&"border-"+u)}),O?i.a.createElement(g,null,p):p))});E.displayName="Card",E.defaultProps={body:!1},E.Img=p,E.Title=x,E.Subtitle=v,E.Body=g,E.Link=y,E.Text=I,E.Header=S,E.Footer=D,E.ImgOverlay=N;t.a=E},972:function(e,t,a){"use strict";a.r(t);var c=a(0),s=a.n(c),n=a(807),r=a(812),l=a(404),i=a(864),o=a(30),d=a(26),b=a(22),j=a(76),u=a(1);const O="/administracao/permissoes";function p(e){let{newdata:t,perfil:a,uploadlist:s}=e;const[r,l]=Object(c.useState)(t),[i,b]=Object(c.useState)(a);Object(c.useEffect)(()=>{b(a)},[a]);const{popUp_alertaOK:j,tempdata:O}=Object(d.a)();function h(e,t){for(var a=0;a<e.length;a++)e[a].ID==t?e[a].open=!e[a].open:e[a].hasOwnProperty("list")&&e[a].list.length>0&&h(e[a].list,t);return e}function f(e){var a=h(t,e);l(a.concat([]))}function m(e,t){for(var a=0;a<e.length;a++)e[a].ID==t?e[a].checked=!e[a].checked:e[a].hasOwnProperty("list")&&e[a].list.length>0&&m(e[a].list,t);return e}return r.length>0?r.map(e=>Object(u.jsxs)("div",{children:[Object(u.jsxs)("span",{children:[1==e.hasOwnProperty("list")?1==e.open?Object(u.jsx)("i",{onClick:()=>f(e.ID),style:{marginRight:"12px"},className:"feather icon-minus"}):Object(u.jsx)("i",{onClick:()=>f(e.ID),style:{marginRight:"12px"},className:"feather icon-plus"}):Object(u.jsx)("i",{style:{marginRight:"12px"},className:"feather icon-minus"}),Object(u.jsxs)("label",{children:[Object(u.jsx)(n.a.Group,{style:{margin:"0",padding:"0"},children:Object(u.jsx)(n.a.Check,{custom:!0,style:{margin:"0"},type:"checkbox",id:e.ID,checked:e.checked,onChange:()=>async function(e,a){if(console.log(O),0==a){const a={PERFIL_ID:O.perfil,MENUS_ID:e};console.log(a);try{if("200"==(await o.a.post("/glbperfilmenu",a)).status){var c=m(t,e);l(c.concat([]))}}catch(s){console.error(s.response),j("Falha. Tente novamente"),O.uploadlist()}}else try{"200"==(await o.a.delete("/glbperfilmenu/0?PERFIL_ID="+O.perfil+"&MENUS_ID="+e)).status&&(c=m(t,e),l(c.concat([])))}catch(s){console.error(s.response),j("Falha. Tente novamente"),O.uploadlist()}}(e.ID,e.checked)})}),Object(u.jsx)("i",{className:e.URL_ICON}),Object(u.jsx)("p",{children:e.DS_MENU})]})]}),1==e.hasOwnProperty("list")&&1==e.open&&e.list.length>0?Object(u.jsx)(p,{newdata:e.list}):null]},e.ID)):null}t.default=()=>{const{permissoes:e}=Object(d.a)(),t=Object(b.g)(),{popUp_alertaOK:a,settempdata:n}=Object(d.a)(),[h,f]=Object(c.useState)(""),[m,g]=Object(c.useState)(""),[x,v]=Object(c.useState)(""),[y,I]=Object(c.useState)(""),[S,D]=Object(c.useState)(""),[N,E]=Object(c.useState)(""),[w,P]=Object(c.useState)({});var[k,C]=Object(c.useState)("");const[_,F]=Object(c.useState)(!1),[L,R]=Object(c.useState)([]);async function U(){F(!0);try{const t=await o.a.get("/glbmenu");if("200"==t.status){for(var e=0;e<t.data.length;e++){t.data[e].ID;t.data[e].id=t.data[e].ID,null==t.data[e].SELF_ID?t.data[e].open=!0:t.data[e].open=!1,1==A(t.data[e].glbperfil)?t.data[e].checked=!0:t.data[e].checked=!1}q(t.data),console.log(z(t.data)),R(z(t.data))}}catch(t){console.error(t.response)}F(!1)}const[M,T]=Object(c.useState)([]);Object(c.useEffect)(()=>{0==Object(j.l)(O,e)?t.push("/"):(!async function(){try{const e=await o.a.get("/glbperfil");"200"==e.status&&T(e.data)}catch(e){console.error(e.response)}}(),n({perfil:k,uploadlist:U}))},[]),Object(c.useEffect)(()=>{U(),n({perfil:k,uploadlist:U})},[k]);const[B,X]=Object(c.useState)(!1),[G,H]=Object(c.useState)(!1),[J,K]=Object(c.useState)(!1);function q(e){for(var t=0;t<e.length;t++)if(null!=e[t].SELF_ID)for(var a=0;a<e.length;a++)if(e[a].ID==e[t].SELF_ID)0==e[a].hasOwnProperty("list")&&(e[a].list=[]),e[a].list.push(e[t]);else if(1==e[a].hasOwnProperty("list")&&e[a].list.length>0)for(var c=0;c<e[a].list.length;c++)q(e[a].list[c])}function z(e){for(var t=0;t<e.length;t++)null!=e[t].SELF_ID?e[t].EX=!1:e[t].EX=!0;return e.filter(function(e){return 1==e.EX})}function A(e){for(var t=!1,a=0;a<e.length;a++)e[a].ID==k&&(t=!0);return t}return Object(u.jsx)(s.a.Fragment,{children:0==Object(j.s)(O,e,"atribuir")?null:Object(u.jsx)(r.a,{children:Object(u.jsx)(l.a,{sm:12,children:Object(u.jsx)(i.a,{children:Object(u.jsxs)(i.a.Body,{children:[Object(u.jsx)(r.a,{className:"mb-3",children:Object(u.jsx)(l.a,{children:Object(u.jsxs)("select",{className:"form-control",onChange:e=>{C(e.target.value)},id:"perfil",children:[Object(u.jsx)("option",{hidden:!0,value:"",children:"--- Selecione um Perfil ---"}),M.map(e=>Object(u.jsx)("option",{value:e.ID,children:e.DESIG},e.ID))]})})}),""!=k&&0==_?Object(u.jsx)(r.a,{className:"mb-3",children:Object(u.jsx)(l.a,{children:Object(u.jsx)("div",{className:"permissoes_box",children:Object(u.jsx)(p,{newdata:L,perfil:k,uploadlist:U})})})}):null]})})})})})}}}]);
//# sourceMappingURL=43.be5dc2a2.chunk.js.map