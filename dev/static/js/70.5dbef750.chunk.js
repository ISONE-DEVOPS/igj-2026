(this["webpackJsonpigj-frontend"]=this["webpackJsonpigj-frontend"]||[]).push([[70],{951:function(e,t,a){},985:function(e,t,a){"use strict";a.r(t);var s=a(8),o=a(0),i=a(812),n=a(404),r=a(873),c=a(839),l=a(1);var d=e=>{let{title:t,value:a,icon:s,color:o,subtitle:i,change:n,sparklineData:d,loading:p,format:b}=e;const m={chart:{type:"area",height:40,sparkline:{enabled:!0},animations:{enabled:!0,easing:"easeinout",speed:800}},stroke:{curve:"smooth",width:2},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.4,opacityTo:.1,stops:[0,100]}},colors:[o||"#2B7FB9"],tooltip:{enabled:!1}},h=d?[{name:t,data:d.map(e=>e.total||e)}]:[];return p?Object(l.jsx)(c.a,{className:"kpi-card",children:Object(l.jsx)(c.a.Body,{children:Object(l.jsxs)("div",{className:"kpi-skeleton",children:[Object(l.jsx)("div",{className:"skeleton-line skeleton-title"}),Object(l.jsx)("div",{className:"skeleton-line skeleton-value"}),Object(l.jsx)("div",{className:"skeleton-line skeleton-sparkline"})]})})}):Object(l.jsx)(c.a,{className:"kpi-card",style:{borderLeft:"4px solid ".concat(o||"#2B7FB9")},children:Object(l.jsxs)(c.a.Body,{className:"p-3",children:[Object(l.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{className:"kpi-title mb-0",children:t}),Object(l.jsx)("h3",{className:"kpi-value mb-0",children:(j=a||0,"currency"===b?j>=1e6?"".concat((j/1e6).toFixed(1),"M CVE"):j>=1e3?"".concat((j/1e3).toFixed(0),"K CVE"):"".concat(Number(j).toLocaleString("pt-CV")," CVE"):"percent"===b?"".concat(j,"%"):j>=1e6?"".concat((j/1e6).toFixed(1),"M"):j>=1e3?"".concat((j/1e3).toFixed(0),"K"):Number(j).toLocaleString("pt-CV"))})]}),Object(l.jsx)("div",{className:"kpi-icon",style:{color:o||"#2B7FB9"},children:Object(l.jsx)("i",{className:s})})]}),i&&Object(l.jsxs)("p",{className:"kpi-subtitle mb-1",children:[void 0!==n&&Object(l.jsxs)("span",{className:"kpi-change ".concat(n>=0?"positive":"negative"),children:[Object(l.jsx)("i",{className:"feather ".concat(n>=0?"icon-trending-up":"icon-trending-down")})," ",Math.abs(n),"%"]})," ",i]}),d&&d.length>1&&Object(l.jsx)("div",{className:"kpi-sparkline",children:Object(l.jsx)(r.a,{options:m,series:h,type:"area",height:40})})]})});var j};var p=e=>{let{title:t,subtitle:a,children:s,loading:o,height:i}=e;return o?Object(l.jsxs)(c.a,{className:"chart-card",children:[Object(l.jsx)(c.a.Header,{className:"chart-card-header",children:Object(l.jsx)("div",{className:"skeleton-line skeleton-title",style:{width:"60%"}})}),Object(l.jsx)(c.a.Body,{className:"chart-card-body",children:Object(l.jsx)("div",{className:"chart-skeleton",style:{height:i||300},children:Object(l.jsx)("div",{className:"skeleton-chart-placeholder"})})})]}):Object(l.jsxs)(c.a,{className:"chart-card",children:[Object(l.jsxs)(c.a.Header,{className:"chart-card-header",children:[Object(l.jsx)("h6",{className:"chart-card-title mb-0",children:t}),a&&Object(l.jsx)("small",{className:"chart-card-subtitle",children:a})]}),Object(l.jsx)(c.a.Body,{className:"chart-card-body p-2",children:s})]})},b=a(403),m=a(821);var h=e=>{var t;let{filtrosOpcoes:a,filters:o,onFilterChange:r,onRefresh:c,loading:d,permissions:p}=e;const h=!1!==(null===p||void 0===p||null===(t=p.sections)||void 0===t?void 0:t.filtroEntidade),j=null!==a&&void 0!==a&&a.anos?[{value:"",label:"Todos os Anos"},...a.anos.map(e=>({value:e,label:String(e)}))]:[{value:"",label:"Todos os Anos"}],u=null!==a&&void 0!==a&&a.entidades?[{value:"",label:"Todas as Entidades"},...a.entidades.map(e=>({value:e.id,label:e.nome}))]:[{value:"",label:"Todas as Entidades"}],x={control:e=>Object(s.a)(Object(s.a)({},e),{},{borderRadius:"8px",borderColor:"#e0e0e0",boxShadow:"none",minHeight:"38px","&:hover":{borderColor:"#C5A55A"}}),option:(e,t)=>Object(s.a)(Object(s.a)({},e),{},{backgroundColor:t.isSelected?"#2B7FB9":t.isFocused?"#f0f7ff":"white",color:t.isSelected?"white":"#2D3436",fontSize:"13px"}),singleValue:e=>Object(s.a)(Object(s.a)({},e),{},{fontSize:"13px",color:"#2D3436"}),placeholder:e=>Object(s.a)(Object(s.a)({},e),{},{fontSize:"13px"})};return Object(l.jsx)("div",{className:"dashboard-filters mb-4",children:Object(l.jsxs)(i.a,{className:"align-items-center",children:[Object(l.jsx)(n.a,{xs:12,md:h?3:5,children:Object(l.jsxs)("h4",{className:"dashboard-title mb-0",children:[Object(l.jsx)("i",{className:"feather icon-bar-chart-2 mr-2",style:{color:"#C5A55A"}}),"Dashboard"]})}),Object(l.jsx)(n.a,{xs:6,md:h?3:5,children:Object(l.jsx)(m.a,{value:j.find(e=>e.value===(o.ano||""))||j[0],onChange:e=>r(Object(s.a)(Object(s.a)({},o),{},{ano:e.value})),options:j,styles:x,placeholder:"Ano",isSearchable:!1})}),h&&Object(l.jsx)(n.a,{xs:6,md:4,children:Object(l.jsx)(m.a,{value:u.find(e=>e.value===(o.entidadeId||""))||u[0],onChange:e=>r(Object(s.a)(Object(s.a)({},o),{},{entidadeId:e.value})),options:u,styles:x,placeholder:"Entidade"})}),Object(l.jsx)(n.a,{xs:12,md:2,className:"mt-2 mt-md-0",children:Object(l.jsxs)(b.a,{variant:"outline-secondary",className:"btn-refresh w-100",onClick:c,disabled:d,children:[Object(l.jsx)("i",{className:"feather icon-refresh-cw ".concat(d?"spin":"")})," ","Atualizar"]})})]})})},j=a(32);const u=Promise.resolve({data:null});var x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const[a,i]=Object(o.useState)({kpis:null,financeiro:null,receitaEntidade:null,processos:null,eventos:null,entidades:null,atividade:null,handpay:null,casosSuspeitos:null,orcamento:null,filtrosOpcoes:null}),[n,r]=Object(o.useState)(!0),[c,l]=Object(o.useState)(null),d=Object(o.useCallback)(()=>{const a={};return e.ano&&(a.ano=e.ano),t&&"CASINO"===t.role||e.entidadeId&&(a.entidade_id=e.entidadeId),a},[e.ano,e.entidadeId,t]),p=Object(o.useCallback)(async()=>{if(!t)return;r(!0),l(null);const e={},a=d(),o=t.sections,n=o.kpiReceita||o.kpiImpostos||o.kpiProcessos||o.kpiEntidades||o.kpiEventos||o.kpiCasosSuspeitos||o.kpiOrcamento;try{const[t,r,c,l,d,p,b,m,h,x,O]=await Promise.allSettled([n?j.a.get("/dashboard/kpis",Object(s.a)(Object(s.a)({},e),{},{params:a})):u,o.visaoFinanceira?j.a.get("/dashboard/financeiro",Object(s.a)(Object(s.a)({},e),{},{params:a})):u,o.entidadesReceita?j.a.get("/dashboard/receita-entidade",Object(s.a)(Object(s.a)({},e),{},{params:a})):u,o.processosExclusoes?j.a.get("/dashboard/processos",Object(s.a)(Object(s.a)({},e),{},{params:a})):u,o.eventosAtividade?j.a.get("/dashboard/eventos",Object(s.a)(Object(s.a)({},e),{},{params:a})):u,o.entidadesReceita?j.a.get("/dashboard/entidades",e):u,o.eventosAtividade?j.a.get("/dashboard/atividade",e):u,o.handpayCasos?j.a.get("/dashboard/handpay",Object(s.a)(Object(s.a)({},e),{},{params:a})):u,o.handpayCasos?j.a.get("/dashboard/casos-suspeitos",e):u,o.orcamento?j.a.get("/dashboard/orcamento",Object(s.a)(Object(s.a)({},e),{},{params:a})):u,j.a.get("/dashboard/filtros",e)]),f=e=>"fulfilled"===e.status&&e.value&&e.value.data?e.value.data.restricted?null:e.value.data:null;i({kpis:f(t),financeiro:f(r),receitaEntidade:f(c),processos:f(l),eventos:f(d),entidades:f(p),atividade:f(b),handpay:f(m),casosSuspeitos:f(h),orcamento:f(x),filtrosOpcoes:f(O)})}catch(c){l(c.message||"Erro ao carregar dados do dashboard")}finally{r(!1)}},[d,t]);return Object(o.useEffect)(()=>{p()},[p]),Object(s.a)(Object(s.a)({},a),{},{loading:n,error:c,refetch:p})};var O=()=>{const[e,t]=Object(o.useState)(null),[a,s]=Object(o.useState)(!0);return Object(o.useEffect)(()=>{(async()=>{try{const e=await j.a.get("/dashboard/config");t(e.data)}catch(e){t({role:"ADMIN",entidadeId:null,sections:{kpiReceita:!0,kpiImpostos:!0,kpiProcessos:!0,kpiEntidades:!0,kpiEventos:!0,kpiCasosSuspeitos:!0,kpiOrcamento:!0,visaoFinanceira:!0,entidadesReceita:!0,processosExclusoes:!0,eventosAtividade:!0,handpayCasos:!0,orcamento:!0,filtroEntidade:!0}})}finally{s(!1)}})()},[]),{config:e,loading:a}};const f=["#2B7FB9","#C5A55A","#2ED8B6","#1B4965","#4099FF"],g=e=>{if(!e||0===e.length)return null;const t=e.map(e=>String(e.ano));return{options:{chart:{type:"area",height:320,toolbar:{show:!0,tools:{download:!0,selection:!1,zoom:!1,pan:!1}},animations:{enabled:!0,easing:"easeinout",speed:800}},colors:f,dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2.5},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.35,opacityTo:.05,stops:[0,95,100]}},xaxis:{categories:t,labels:{style:{colors:"#636E72",fontSize:"12px"}},axisBorder:{show:!1}},yaxis:{labels:{style:{colors:"#636E72",fontSize:"11px"},formatter:e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(0),"K"):e}},legend:{position:"top",horizontalAlign:"left",fontSize:"12px",markers:{radius:3}},grid:{borderColor:"#f1f1f1",strokeDashArray:3},tooltip:{y:{formatter:e=>"".concat(Number(e).toLocaleString("pt-CV")," CVE")}}},series:[{name:"Receita Bruta",data:e.map(e=>e.receita_bruta)},{name:"Impostos",data:e.map(e=>e.impostos)},{name:"Contrapartidas",data:e.map(e=>e.contrapartidas)},{name:"Contribui\xe7\xf5es",data:e.map(e=>e.contribuicoes)},{name:"Pr\xe9mios",data:e.map(e=>e.premios)}]}};const v=["#2B7FB9","#C5A55A","#2ED8B6","#1B4965","#4099FF"],y=e=>{if(!e||0===e.length)return null;const t=e.reduce((e,t)=>({premios:e.premios+(t.premios||0),impostos:e.impostos+(t.impostos||0),contrapartidas:e.contrapartidas+(t.contrapartidas||0),contribuicoes:e.contribuicoes+(t.contribuicoes||0)}),{premios:0,impostos:0,contrapartidas:0,contribuicoes:0}),a=[t.premios,t.impostos,t.contrapartidas,t.contribuicoes];return{options:{chart:{type:"donut",height:320,animations:{enabled:!0,easing:"easeinout",speed:800}},colors:v,labels:["Pr\xe9mios","Impostos","Contrapartidas","Contribui\xe7\xf5es IGJ"],legend:{position:"bottom",fontSize:"12px",markers:{radius:3}},plotOptions:{pie:{donut:{size:"65%",labels:{show:!0,name:{show:!0,fontSize:"14px",color:"#2D3436"},value:{show:!0,fontSize:"16px",fontWeight:700,color:"#2D3436",formatter:e=>{const t=Number(e);return t>=1e6?"".concat((t/1e6).toFixed(1),"M"):t>=1e3?"".concat((t/1e3).toFixed(0),"K"):t.toLocaleString("pt-CV")}},total:{show:!0,label:"Total",fontSize:"13px",color:"#636E72",formatter:e=>{const t=e.globals.seriesTotals.reduce((e,t)=>e+t,0);return t>=1e6?"".concat((t/1e6).toFixed(1),"M CVE"):"".concat((t/1e3).toFixed(0),"K CVE")}}}}}},dataLabels:{enabled:!1},tooltip:{y:{formatter:e=>"".concat(Number(e).toLocaleString("pt-CV")," CVE")}},stroke:{width:2,colors:["#fff"]}},series:a}};const N=e=>{if(!e||0===e.length)return null;const t=e.map(e=>e.entidade||"N/A");return{options:{chart:{type:"bar",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:600}},plotOptions:{bar:{horizontal:!0,borderRadius:4,barHeight:"60%",distributed:!1}},colors:["#2B7FB9"],dataLabels:{enabled:!0,formatter:e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(0),"K"):e,style:{fontSize:"11px",colors:["#fff"]},offsetX:-5},xaxis:{labels:{style:{colors:"#636E72",fontSize:"11px"},formatter:e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(0),"K"):e}},yaxis:{labels:{style:{colors:"#636E72",fontSize:"11px"},maxWidth:150}},grid:{borderColor:"#f1f1f1",strokeDashArray:3},tooltip:{y:{formatter:e=>"".concat(Number(e).toLocaleString("pt-CV")," CVE")}}},series:[{name:"Receita Bruta",data:e.map(e=>e.receita_bruta)}],categories:t}};const S=["#2B7FB9","#C5A55A","#2ED8B6","#1B4965","#4099FF","#D4A843","#F39C12"],k=e=>{if(!e||0===e.length)return null;const t=e.filter(e=>e.maquinas+e.bancas+e.equipamentos>0).map(e=>({x:e.entidade||"N/A",y:e.maquinas+e.bancas+e.equipamentos}));return{options:{chart:{type:"treemap",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:600}},colors:S,legend:{show:!1},plotOptions:{treemap:{distributed:!0,enableShades:!1}},dataLabels:{enabled:!0,style:{fontSize:"12px"},formatter:(e,t)=>"".concat(e,": ").concat(t.value),offsetY:-2},tooltip:{y:{formatter:(t,a)=>{let{dataPointIndex:s}=a;const o=e.filter(e=>e.maquinas+e.bancas+e.equipamentos>0)[s];return o?"M\xe1quinas: ".concat(o.maquinas," | Bancas: ").concat(o.bancas," | Equip.: ").concat(o.equipamentos):"".concat(t," total")}}}},series:[{data:t}]}};const E=e=>{if(!e)return null;const{exclusaoPorMes:t,autoExclusaoPorMes:a}=e,s=new Set;(t||[]).forEach(e=>s.add(e.mes)),(a||[]).forEach(e=>s.add(e.mes));const o=Array.from(s).sort(),i={},n={};(t||[]).forEach(e=>{i[e.mes]=e.total}),(a||[]).forEach(e=>{n[e.mes]=e.total});return{options:{chart:{type:"bar",height:320,stacked:!0,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:600}},plotOptions:{bar:{borderRadius:4,columnWidth:"50%"}},colors:["#1B4965","#C5A55A"],xaxis:{categories:o.map(e=>{const[t,a]=e.split("-");return"".concat(["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][parseInt(a)-1]," ").concat(t.slice(2))}),labels:{style:{colors:"#636E72",fontSize:"11px"},rotateAlways:!1}},yaxis:{labels:{style:{colors:"#636E72",fontSize:"11px"}}},legend:{position:"top",horizontalAlign:"left",fontSize:"12px",markers:{radius:3}},grid:{borderColor:"#f1f1f1",strokeDashArray:3},tooltip:{shared:!0,intersect:!1}},series:[{name:"Exclus\xe3o",data:o.map(e=>i[e]||0)},{name:"Auto-exclus\xe3o",data:o.map(e=>n[e]||0)}]}};const A=e=>{if(!e)return null;const{exclusaoStatus:t}=e;if(!t)return null;const a=t.total||1;return{options:{chart:{type:"radialBar",height:320,animations:{enabled:!0,easing:"easeinout",speed:800}},plotOptions:{radialBar:{offsetY:-10,startAngle:0,endAngle:270,hollow:{size:"30%"},dataLabels:{name:{fontSize:"13px",color:"#636E72"},value:{fontSize:"16px",fontWeight:700,color:"#2D3436"},total:{show:!0,label:"Total",formatter:()=>t.total}},track:{background:"#f1f1f1",strokeWidth:"100%"}}},colors:["#2B7FB9","#2ED8B6","#C5A55A","#F39C12"],labels:["Ativos","Finalizados","Arquivados","Prescritos"],legend:{show:!0,position:"bottom",fontSize:"12px",markers:{radius:3},formatter:(e,a)=>{const s=[t.ativos||0,t.finalizados||0,t.arquivados||0,t.prescritos||0];return"".concat(e,": ").concat(s[a.seriesIndex])}}},series:[Math.round((t.ativos||0)/a*100),Math.round((t.finalizados||0)/a*100),Math.round((t.arquivados||0)/a*100),Math.round((t.prescritos||0)/a*100)]}};const C=e=>{if(!e||!e.status)return null;const{aprovados:t,pendentes:a,recusados:s}=e.status;return{options:{chart:{type:"pie",height:320,animations:{enabled:!0,easing:"easeinout",speed:800}},colors:["#2ED8B6","#C5A55A","#F39C12"],labels:["Aprovados","Pendentes","Recusados"],legend:{position:"bottom",fontSize:"12px",markers:{radius:3}},dataLabels:{enabled:!0,formatter:(e,t)=>{const a=t.w.globals.series[t.seriesIndex];return"".concat(a," (").concat(e.toFixed(0),"%)")},style:{fontSize:"12px"}},stroke:{width:2,colors:["#fff"]},tooltip:{y:{formatter:e=>"".concat(e," eventos")}}},series:[t||0,a||0,s||0]}};const F=e=>{if(!e||0===e.length)return null;const t={};e.forEach(e=>{const a=e.modulo||"Outro";t[a]=(t[a]||0)+e.total});const a=Object.entries(t).sort((e,t)=>t[1]-e[1]).slice(0,8).map(e=>{let[t]=e;return t}),s=[...new Set(e.map(e=>e.mes))].sort(),o=e=>{const[t,a]=e.split("-");return"".concat(["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][parseInt(a)-1]," ").concat(t.slice(2))},i={};e.forEach(e=>{i["".concat(e.modulo,"-").concat(e.mes)]=e.total});return{options:{chart:{type:"heatmap",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:600}},plotOptions:{heatmap:{radius:4,enableShades:!0,shadeIntensity:.5,colorScale:{ranges:[{from:0,to:0,color:"#f1f1f1",name:"Nenhuma"},{from:1,to:10,color:"#4099FF",name:"Baixa"},{from:11,to:50,color:"#2B7FB9",name:"M\xe9dia"},{from:51,to:200,color:"#1B4965",name:"Alta"},{from:201,to:1e4,color:"#C5A55A",name:"Muito Alta"}]}}},dataLabels:{enabled:!1},xaxis:{labels:{style:{colors:"#636E72",fontSize:"10px"}}},yaxis:{labels:{style:{colors:"#636E72",fontSize:"10px"}}},grid:{padding:{right:10}},tooltip:{y:{formatter:e=>"".concat(e," registos")}}},series:a.map(e=>({name:e.replace("sgigj","").replace("glb",""),data:s.map(t=>({x:o(t),y:i["".concat(e,"-").concat(t)]||0}))}))}};const z=e=>{if(!e||0===e.length)return null;return{options:{chart:{type:"bar",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:600}},plotOptions:{bar:{borderRadius:4,columnWidth:"45%"}},colors:["#1B4965","#C5A55A"],xaxis:{categories:e.map(e=>e.entidade||"N/A"),labels:{style:{colors:"#636E72",fontSize:"10px"},rotate:-45,trim:!0,maxHeight:80}},yaxis:[{title:{text:"Valor (CVE)",style:{color:"#1B4965",fontSize:"11px"}},labels:{style:{colors:"#636E72",fontSize:"11px"},formatter:e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(0),"K"):e}},{opposite:!0,title:{text:"Quantidade",style:{color:"#C5A55A",fontSize:"11px"}},labels:{style:{colors:"#636E72",fontSize:"11px"}}}],legend:{position:"top",horizontalAlign:"left",fontSize:"12px",markers:{radius:3}},grid:{borderColor:"#f1f1f1",strokeDashArray:3},tooltip:{shared:!0,intersect:!1,y:{formatter:(e,t)=>{let{seriesIndex:a}=t;return 0===a?"".concat(Number(e).toLocaleString("pt-CV")," CVE"):"".concat(e," registos")}}},stroke:{width:[0,3],curve:"smooth"}},series:[{name:"Valor Total",type:"bar",data:e.map(e=>e.valor_total)},{name:"Quantidade",type:"line",data:e.map(e=>e.quantidade)}]}};const B=e=>{if(!e||0===e.length)return null;const t=e.map(e=>(e=>{const[t,a]=e.split("-");return"".concat(["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][parseInt(a)-1]," ").concat(t.slice(2))})(e.mes)),a=e.map(e=>e.total);let s=0;return{options:{chart:{type:"area",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:800}},colors:["#F39C12","#1B4965"],dataLabels:{enabled:!1},stroke:{curve:"smooth",width:[2.5,2]},fill:{type:["gradient","gradient"],gradient:{shadeIntensity:1,opacityFrom:.35,opacityTo:.05,stops:[0,95,100]}},xaxis:{categories:t,labels:{style:{colors:"#636E72",fontSize:"11px"}}},yaxis:[{title:{text:"Mensal",style:{color:"#F39C12",fontSize:"11px"}},labels:{style:{colors:"#636E72",fontSize:"11px"}}},{opposite:!0,title:{text:"Acumulado",style:{color:"#1B4965",fontSize:"11px"}},labels:{style:{colors:"#636E72",fontSize:"11px"}}}],legend:{position:"top",horizontalAlign:"left",fontSize:"12px",markers:{radius:3}},grid:{borderColor:"#f1f1f1",strokeDashArray:3},tooltip:{shared:!0,intersect:!1}},series:[{name:"Casos Mensais",data:a},{name:"Acumulado",data:e.map(e=>(s+=e.total,s))}]}};const w=e=>{if(!e||!e.porProjeto)return null;const{orcamento:t,despesas:a}=e.porProjeto;if(!t||0===t.length)return null;const s=new Set;t.forEach(e=>s.add(e.projeto||"Sem Projeto")),a.forEach(e=>s.add(e.projeto||"Sem Projeto"));const o=Array.from(s),i={},n={};return t.forEach(e=>{i[e.projeto||"Sem Projeto"]=e.orcamento_previsto}),a.forEach(e=>{n[e.projeto||"Sem Projeto"]=e.despesa_real}),{options:{chart:{type:"bar",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:600}},plotOptions:{bar:{horizontal:!1,borderRadius:4,columnWidth:"55%",dataLabels:{position:"top"}}},colors:["#2B7FB9","#C5A55A"],dataLabels:{enabled:!1},xaxis:{categories:o,labels:{style:{colors:"#636E72",fontSize:"10px"},rotate:-45,trim:!0,maxHeight:80}},yaxis:{labels:{style:{colors:"#636E72",fontSize:"11px"},formatter:e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(0),"K"):e}},legend:{position:"top",horizontalAlign:"left",fontSize:"12px",markers:{radius:3}},grid:{borderColor:"#f1f1f1",strokeDashArray:3},tooltip:{y:{formatter:e=>"".concat(Number(e).toLocaleString("pt-CV")," CVE")}}},series:[{name:"Or\xe7amento Previsto",data:o.map(e=>i[e]||0)},{name:"Despesa Real",data:o.map(e=>n[e]||0)}]}};const D=e=>{if(!e)return null;const t=e.taxaExecucao||0;return{options:{chart:{type:"radialBar",height:320,animations:{enabled:!0,easing:"easeinout",speed:800}},plotOptions:{radialBar:{startAngle:-135,endAngle:135,hollow:{size:"65%"},track:{background:"#f1f1f1",strokeWidth:"100%",margin:5,dropShadow:{enabled:!1}},dataLabels:{name:{show:!0,fontSize:"14px",color:"#636E72",offsetY:-10},value:{show:!0,fontSize:"32px",fontWeight:700,color:"#2D3436",offsetY:5,formatter:e=>"".concat(e,"%")}}}},colors:[(a=t,a>=80?"#2ED8B6":a>=50?"#C5A55A":a>=25?"#F39C12":"#E74C3C")],labels:["Execu\xe7\xe3o Or\xe7amental"],stroke:{lineCap:"round"}},series:[t],totalOrcamento:e.totalOrcamento,totalDespesa:e.totalDespesa};var a};a(951);t.default=()=>{var e,t;const[a,c]=Object(o.useState)({ano:"",entidadeId:""}),{config:b,loading:m}=O(),{kpis:j,financeiro:u,receitaEntidade:f,processos:v,eventos:S,entidades:M,atividade:I,handpay:V,casosSuspeitos:P,orcamento:R,filtrosOpcoes:L,loading:q,refetch:T}=x(a,b),J=(null===b||void 0===b?void 0:b.sections)||{},K=g(u),W=y(u),H=N(f),_=k(M),Y=E(v),G=A(v),Q=C(S),X=F(I),U=z(V),Z=B(P),$=w(R),ee=D(R),te=e=>e?e>=1e6?"".concat((e/1e6).toFixed(1),"M CVE"):e>=1e3?"".concat((e/1e3).toFixed(0),"K CVE"):"".concat(Number(e).toLocaleString("pt-CV")," CVE"):"0 CVE",ae=q||m,se=J.kpiReceita||J.kpiImpostos||J.kpiProcessos||J.kpiEntidades||J.kpiEventos||J.kpiCasosSuspeitos||J.kpiOrcamento;return Object(l.jsxs)("div",{className:"dashboard-wrapper",children:[Object(l.jsx)(h,{filtrosOpcoes:L,filters:a,onFilterChange:c,onRefresh:T,loading:ae,permissions:b}),se&&Object(l.jsxs)(i.a,{className:"mt-3",children:[J.kpiReceita&&Object(l.jsx)(n.a,{xs:6,lg:3,xl:!0,className:"mb-3",children:Object(l.jsx)(d,{title:"Receita Bruta",value:null===j||void 0===j?void 0:j.receitaBruta,icon:"feather icon-dollar-sign",color:"#2B7FB9",format:"currency",subtitle:"Total acumulado",sparklineData:null===j||void 0===j||null===(e=j.sparklines)||void 0===e?void 0:e.receita,loading:ae})}),J.kpiImpostos&&Object(l.jsx)(n.a,{xs:6,lg:3,xl:!0,className:"mb-3",children:Object(l.jsx)(d,{title:"Impostos",value:null===j||void 0===j?void 0:j.impostos,icon:"feather icon-trending-up",color:"#C5A55A",format:"currency",subtitle:"Arrecadados",loading:ae})}),J.kpiProcessos&&Object(l.jsx)(n.a,{xs:6,lg:3,xl:!0,className:"mb-3",children:Object(l.jsx)(d,{title:"Processos Ativos",value:null===j||void 0===j?void 0:j.processosAtivos,icon:"feather icon-file-text",color:"#1B4965",subtitle:"Exclus\xe3o + Auto-exclus\xe3o",sparklineData:null===j||void 0===j||null===(t=j.sparklines)||void 0===t?void 0:t.processos,loading:ae})}),J.kpiEntidades&&Object(l.jsx)(n.a,{xs:6,lg:3,xl:!0,className:"mb-3",children:Object(l.jsx)(d,{title:"Entidades",value:null===j||void 0===j?void 0:j.entidadesAtivas,icon:"feather icon-home",color:"#2ED8B6",subtitle:"Ativas",loading:ae})}),J.kpiEventos&&Object(l.jsx)(n.a,{xs:6,lg:3,xl:!0,className:"mb-3",children:Object(l.jsx)(d,{title:"Eventos",value:null===j||void 0===j?void 0:j.eventosAprovados,icon:"feather icon-calendar",color:"#4099FF",subtitle:"Registados",loading:ae})}),J.kpiCasosSuspeitos&&Object(l.jsx)(n.a,{xs:6,lg:3,xl:!0,className:"mb-3",children:Object(l.jsx)(d,{title:"Casos Suspeitos",value:null===j||void 0===j?void 0:j.casosSuspeitos,icon:"feather icon-alert-triangle",color:"#F39C12",subtitle:"Ativos",loading:ae})}),J.kpiOrcamento&&Object(l.jsx)(n.a,{xs:6,lg:3,xl:!0,className:"mb-3",children:Object(l.jsx)(d,{title:"Exec. Or\xe7amental",value:null===j||void 0===j?void 0:j.execucaoOrcamental,icon:"feather icon-pie-chart",color:"#D4A843",format:"percent",subtitle:"Taxa de execu\xe7\xe3o",loading:ae})})]}),J.visaoFinanceira&&Object(l.jsxs)("div",{className:"dashboard-section",children:[Object(l.jsx)("span",{className:"section-title",children:"Vis\xe3o Financeira"}),Object(l.jsxs)(i.a,{children:[Object(l.jsx)(n.a,{lg:7,className:"mb-3",children:Object(l.jsx)(p,{title:"Evolu\xe7\xe3o Financeira Anual",subtitle:"Receita, impostos, contrapartidas e contribui\xe7\xf5es",loading:ae,children:K?Object(l.jsx)(r.a,{options:K.options,series:K.series,type:"area",height:320}):Object(l.jsxs)("div",{className:"dashboard-empty-state",children:[Object(l.jsx)("i",{className:"feather icon-bar-chart-2"}),Object(l.jsx)("p",{children:"Sem dados financeiros dispon\xedveis"})]})})}),Object(l.jsx)(n.a,{lg:5,className:"mb-3",children:Object(l.jsx)(p,{title:"Composi\xe7\xe3o da Receita",subtitle:"Distribui\xe7\xe3o por categoria",loading:ae,children:W?Object(l.jsx)(r.a,{options:W.options,series:W.series,type:"donut",height:320}):Object(l.jsxs)("div",{className:"dashboard-empty-state",children:[Object(l.jsx)("i",{className:"feather icon-pie-chart"}),Object(l.jsx)("p",{children:"Sem dados dispon\xedveis"})]})})})]})]}),J.entidadesReceita&&Object(l.jsxs)("div",{className:"dashboard-section",children:[Object(l.jsx)("span",{className:"section-title",children:"Entidades & Receita por Casino"}),Object(l.jsxs)(i.a,{children:[Object(l.jsx)(n.a,{lg:7,className:"mb-3",children:Object(l.jsx)(p,{title:"Receita Bruta por Entidade",subtitle:"Top casinos por volume",loading:ae,children:H?Object(l.jsx)(r.a,{options:Object(s.a)(Object(s.a)({},H.options),{},{xaxis:Object(s.a)(Object(s.a)({},H.options.xaxis),{},{categories:H.categories})}),series:H.series,type:"bar",height:320}):Object(l.jsxs)("div",{className:"dashboard-empty-state",children:[Object(l.jsx)("i",{className:"feather icon-bar-chart"}),Object(l.jsx)("p",{children:"Sem dados de receita por entidade"})]})})}),Object(l.jsx)(n.a,{lg:5,className:"mb-3",children:Object(l.jsx)(p,{title:"Equipamentos por Entidade",subtitle:"M\xe1quinas, bancas e equipamentos",loading:ae,children:_?Object(l.jsx)(r.a,{options:_.options,series:_.series,type:"treemap",height:320}):Object(l.jsxs)("div",{className:"dashboard-empty-state",children:[Object(l.jsx)("i",{className:"feather icon-grid"}),Object(l.jsx)("p",{children:"Sem dados de equipamentos"})]})})})]})]}),J.processosExclusoes&&Object(l.jsxs)("div",{className:"dashboard-section",children:[Object(l.jsx)("span",{className:"section-title",children:"Processos & Exclus\xf5es"}),Object(l.jsxs)(i.a,{children:[Object(l.jsx)(n.a,{lg:7,className:"mb-3",children:Object(l.jsx)(p,{title:"Processos por M\xeas",subtitle:"Exclus\xe3o vs Auto-exclus\xe3o (\xfaltimos 12 meses)",loading:ae,children:Y?Object(l.jsx)(r.a,{options:Y.options,series:Y.series,type:"bar",height:320}):Object(l.jsxs)("div",{className:"dashboard-empty-state",children:[Object(l.jsx)("i",{className:"feather icon-file-text"}),Object(l.jsx)("p",{children:"Sem dados de processos"})]})})}),Object(l.jsx)(n.a,{lg:5,className:"mb-3",children:Object(l.jsx)(p,{title:"Status dos Processos",subtitle:"Distribui\xe7\xe3o por estado",loading:ae,children:G?Object(l.jsx)(r.a,{options:G.options,series:G.series,type:"radialBar",height:320}):Object(l.jsxs)("div",{className:"dashboard-empty-state",children:[Object(l.jsx)("i",{className:"feather icon-activity"}),Object(l.jsx)("p",{children:"Sem dados de processos"})]})})})]})]}),J.eventosAtividade&&Object(l.jsxs)("div",{className:"dashboard-section",children:[Object(l.jsx)("span",{className:"section-title",children:"Eventos & Atividade"}),Object(l.jsxs)(i.a,{children:[Object(l.jsx)(n.a,{lg:5,className:"mb-3",children:Object(l.jsx)(p,{title:"Eventos por Status",subtitle:"Aprovados, pendentes e recusados",loading:ae,children:Q?Object(l.jsx)(r.a,{options:Q.options,series:Q.series,type:"pie",height:320}):Object(l.jsxs)("div",{className:"dashboard-empty-state",children:[Object(l.jsx)("i",{className:"feather icon-calendar"}),Object(l.jsx)("p",{children:"Sem dados de eventos"})]})})}),Object(l.jsx)(n.a,{lg:7,className:"mb-3",children:Object(l.jsx)(p,{title:"Atividade do Sistema",subtitle:"Registos por m\xf3dulo (\xfaltimos 12 meses)",loading:ae,children:X?Object(l.jsx)(r.a,{options:X.options,series:X.series,type:"heatmap",height:320}):Object(l.jsxs)("div",{className:"dashboard-empty-state",children:[Object(l.jsx)("i",{className:"feather icon-activity"}),Object(l.jsx)("p",{children:"Sem dados de atividade"})]})})})]})]}),J.handpayCasos&&Object(l.jsxs)("div",{className:"dashboard-section",children:[Object(l.jsx)("span",{className:"section-title",children:"Handpay & Casos Suspeitos"}),Object(l.jsxs)(i.a,{children:[Object(l.jsx)(n.a,{lg:7,className:"mb-3",children:Object(l.jsx)(p,{title:"Handpay por Entidade",subtitle:"Valor total e quantidade de registos",loading:ae,children:U?Object(l.jsx)(r.a,{options:U.options,series:U.series,type:"bar",height:320}):Object(l.jsxs)("div",{className:"dashboard-empty-state",children:[Object(l.jsx)("i",{className:"feather icon-credit-card"}),Object(l.jsx)("p",{children:"Sem dados de handpay"})]})})}),Object(l.jsx)(n.a,{lg:5,className:"mb-3",children:Object(l.jsx)(p,{title:"Casos Suspeitos - Evolu\xe7\xe3o",subtitle:"Mensal e acumulado",loading:ae,children:Z?Object(l.jsx)(r.a,{options:Z.options,series:Z.series,type:"area",height:320}):Object(l.jsxs)("div",{className:"dashboard-empty-state",children:[Object(l.jsx)("i",{className:"feather icon-alert-triangle"}),Object(l.jsx)("p",{children:"Sem casos suspeitos registados"})]})})})]})]}),J.orcamento&&Object(l.jsxs)("div",{className:"dashboard-section",children:[Object(l.jsx)("span",{className:"section-title",children:"Or\xe7amento IGJ"}),Object(l.jsxs)(i.a,{children:[Object(l.jsx)(n.a,{lg:7,className:"mb-3",children:Object(l.jsx)(p,{title:"Or\xe7amento vs Despesa",subtitle:"Por projeto/rubrica",loading:ae,children:$?Object(l.jsx)(r.a,{options:$.options,series:$.series,type:"bar",height:320}):Object(l.jsxs)("div",{className:"dashboard-empty-state",children:[Object(l.jsx)("i",{className:"feather icon-book"}),Object(l.jsx)("p",{children:"Sem dados de or\xe7amento"})]})})}),Object(l.jsx)(n.a,{lg:5,className:"mb-3",children:Object(l.jsx)(p,{title:"Taxa de Execu\xe7\xe3o Or\xe7amental",subtitle:"Progresso de execu\xe7\xe3o",loading:ae,children:ee?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(r.a,{options:ee.options,series:ee.series,type:"radialBar",height:280}),Object(l.jsxs)(i.a,{className:"budget-info",children:[Object(l.jsxs)(n.a,{xs:6,children:[Object(l.jsx)("span",{className:"budget-label",children:"Or\xe7amento"}),Object(l.jsx)("span",{className:"budget-value",children:te(ee.totalOrcamento)})]}),Object(l.jsxs)(n.a,{xs:6,children:[Object(l.jsx)("span",{className:"budget-label",children:"Despesa"}),Object(l.jsx)("span",{className:"budget-value",children:te(ee.totalDespesa)})]})]})]}):Object(l.jsxs)("div",{className:"dashboard-empty-state",children:[Object(l.jsx)("i",{className:"feather icon-pie-chart"}),Object(l.jsx)("p",{children:"Sem dados de execu\xe7\xe3o"})]})})})]})]})]})}}}]);
//# sourceMappingURL=70.5dbef750.chunk.js.map