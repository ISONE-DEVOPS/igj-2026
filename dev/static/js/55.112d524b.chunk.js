(this["webpackJsonpigj-frontend"]=this["webpackJsonpigj-frontend"]||[]).push([[55],{817:function(e,a,t){"use strict";var s=t(2),r=t(3),c=t(6),l=t.n(c),n=t(0),o=t.n(n),i=t(9),d=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],j=o.a.forwardRef(function(e,a){var t=e.bsPrefix,c=e.className,n=e.striped,j=e.bordered,O=e.borderless,b=e.hover,m=e.size,h=e.variant,u=e.responsive,p=Object(r.a)(e,d),x=Object(i.a)(t,"table"),N=l()(c,x,h&&x+"-"+h,m&&x+"-"+m,n&&x+"-striped",j&&x+"-bordered",O&&x+"-borderless",b&&x+"-hover"),g=o.a.createElement("table",Object(s.a)({},p,{className:N,ref:a}));if(u){var f=x+"-responsive";return"string"===typeof u&&(f=f+"-"+u),o.a.createElement("div",{className:f},g)}return g});a.a=j},818:function(e,a,t){"use strict";var s=t(2),r=t(3),c=t(6),l=t.n(c),n=t(0),o=t.n(n),i=t(9),d=t(131),j=["active","disabled","className","style","activeLabel","children"],O=["children"],b=o.a.forwardRef(function(e,a){var t=e.active,c=e.disabled,n=e.className,i=e.style,O=e.activeLabel,b=e.children,m=Object(r.a)(e,j),h=t||c?"span":d.a;return o.a.createElement("li",{ref:a,style:i,className:l()(n,"page-item",{active:t,disabled:c})},o.a.createElement(h,Object(s.a)({className:"page-link",disabled:c},m),b,t&&O&&o.a.createElement("span",{className:"sr-only"},O)))});b.defaultProps={active:!1,disabled:!1,activeLabel:"(current)"},b.displayName="PageItem";var m=b;function h(e,a,t){function s(e){var s=e.children,c=Object(r.a)(e,O);return o.a.createElement(b,c,o.a.createElement("span",{"aria-hidden":"true"},s||a),o.a.createElement("span",{className:"sr-only"},t))}return void 0===t&&(t=e),s.displayName=e,s}var u=h("First","\xab"),p=h("Prev","\u2039","Previous"),x=h("Ellipsis","\u2026","More"),N=h("Next","\u203a"),g=h("Last","\xbb"),f=["bsPrefix","className","children","size"],v=o.a.forwardRef(function(e,a){var t=e.bsPrefix,c=e.className,n=e.children,d=e.size,j=Object(r.a)(e,f),O=Object(i.a)(t,"pagination");return o.a.createElement("ul",Object(s.a)({ref:a},j,{className:l()(c,O,d&&O+"-"+d)}),n)});v.First=u,v.Prev=p,v.Ellipsis=x,v.Item=m,v.Next=N,v.Last=g;a.a=v},878:function(e,a,t){"use strict";t.r(a);var s=t(8),r=t(0),c=t.n(r),l=t(812),n=t(404),o=t(403),i=t(818),d=t(839),j=t(814),O=t(817),b=t(7),m=t(816),h=t(24),u=t(32),p=t(22),x=t(83),N=t(1);const g="/configuracao/projetos";function f(e){let{columns:a,data:t,modalOpen:c,uploadlist:d}=e;const[j,b]=Object(r.useState)(""),[u,p]=Object(r.useState)(null),{permissoes:f}=Object(h.a)();const{getTableProps:v,getTableBodyProps:I,headerGroups:C,prepareRow:E,globalFilter:y,setGlobalFilter:A,page:T,canPreviousPage:R,canNextPage:P,pageOptions:S,pageCount:D,gotoPage:F,nextPage:_,previousPage:M,setPageSize:L,state:{pageIndex:w,pageSize:G}}=Object(m.useTable)({columns:a,data:t,initialState:{pageIndex:0,pageSize:10}},m.useGlobalFilter,m.useSortBy,m.usePagination);return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)(l.a,{className:"mb-3",children:[Object(N.jsx)(n.a,{md:4,children:Object(N.jsx)("input",{type:"number",className:"form-control ",placeholder:"Pesquise por ano...",onChange:e=>{!function(e){b(e),u&&clearTimeout(u);const a=setTimeout(()=>{d(e)},1500);p(a)}(e.target.value)}})}),Object(N.jsx)(n.a,{className:"d-flex justify-content-end",children:0==Object(x.s)(g,f,"Criar")?null:Object(N.jsxs)(o.a,{variant:"primary",className:"btn-sm btn-round has-ripple ml-2",onClick:c,children:[Object(N.jsx)("i",{className:"feather icon-plus"})," Adicionar"]})})]}),Object(N.jsxs)(O.a,Object(s.a)(Object(s.a)({striped:!0,bordered:!0,hover:!0,responsive:!0},v()),{},{children:[Object(N.jsx)("thead",{children:C.map(e=>Object(N.jsx)("tr",Object(s.a)(Object(s.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map(e=>Object(N.jsxs)("th",Object(s.a)(Object(s.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),Object(N.jsx)("span",{children:e.isSorted?e.isSortedDesc?Object(N.jsx)("span",{className:"feather icon-arrow-down text-muted float-right"}):Object(N.jsx)("span",{className:"feather icon-arrow-up text-muted float-right"}):""})]})))})))}),Object(N.jsx)("tbody",Object(s.a)(Object(s.a)({},I()),{},{children:T.map((e,a)=>(E(e),Object(N.jsx)("tr",Object(s.a)(Object(s.a)({},e.getRowProps()),{},{children:e.cells.map(e=>{const a=e.column.centered;return Object(N.jsx)("td",Object(s.a)(Object(s.a)({},e.getCellProps()),{},{className:a?"text-center":"text-right",children:e.render("Cell")}))})}))))}))]})),Object(N.jsxs)(l.a,{className:"justify-content-between",children:[Object(N.jsx)(n.a,{children:Object(N.jsxs)("span",{className:"d-flex align-items-center",children:["P\xe1gina"," "," ",Object(N.jsxs)("strong",{children:[" ",w+1," de ",S.length," "]})," ","| Ir para a p\xe1gina:"," ",Object(N.jsx)("input",{type:"number",className:"form-control ml-2",defaultValue:w+1,onChange:e=>{const a=e.target.value?Number(e.target.value)-1:0;F(a)},style:{width:"100px"}})]})}),Object(N.jsx)(n.a,{children:Object(N.jsxs)(i.a,{className:"justify-content-end",children:[Object(N.jsx)(i.a.First,{onClick:()=>F(0),disabled:!R}),Object(N.jsx)(i.a.Prev,{onClick:()=>M(),disabled:!R}),Object(N.jsx)(i.a.Next,{onClick:()=>_(),disabled:!P}),Object(N.jsx)(i.a.Last,{onClick:()=>F(D-1),disabled:!P})]})})]})]})}a.default=()=>{const{permissoes:e}=Object(h.a)(),a=Object(p.g)(),{popUp_removerItem:t,popUp_alertaOK:s}=Object(h.a)(),i=c.a.useMemo(()=>[{Header:"Ano",accessor:"ANO",centered:!0},{Header:"Designa\xe7\xe3o",accessor:"NOME",centered:!0},{Header:"Or\xe7amento Inical",accessor:"ORCAMENTO_INICIAL_FORMATTED",centered:!1},{Header:"Or\xe7amento Corrigido",accessor:"ORCAMENTO_CORRIGIDO_FORMATTED",centered:!1},{Header:"Or\xe7amento Dispon\xedvel",accessor:"ORCAMENTO_DISPONIVEL_FORMATTED",centered:!1},{Header:"Pago",accessor:"PAGO_FORMATTED",centered:!1},{Header:"Pago %",accessor:"PAGO_PERCENT",centered:!1},{Header:"Saldo Dispon\xedvel",accessor:"SALDO_DISPONIVEL_FORMATTED",centered:!1},{Header:"A\xe7\xf5es",accessor:"action",centered:!0}],[]),[O,m]=Object(r.useState)(""),[v,I]=Object(r.useState)(0),[C,E]=Object(r.useState)(""),[y,A]=Object(r.useState)(0),[T,R]=Object(r.useState)(0),[P,S]=Object(r.useState)(""),[D,F]=Object(r.useState)({}),[_,M]=Object(r.useState)([]);async function L(a){a=""===a?void 0:a;try{const s=await u.a.get("/projetos?"+Object(x.q)([["ANO",a]]));if("200"==s.status){for(var t=0;t<s.data.length;t++){const a=s.data[t].ID;s.data[t].id=s.data[t].ID,s.data[t].DT_REGISTO=Object(x.i)(s.data[t].DT_REGISTO),s.data[t].ORCAMENTO_CORRIGIDO_FORMATTED=Object(x.g)(s.data[t].ORCAMENTO_CORRIGIDO),s.data[t].ORCAMENTO_INICIAL_FORMATTED=Object(x.g)(s.data[t].ORCAMENTO_INICIAL),s.data[t].ORCAMENTO_DISPONIVEL_FORMATTED=Object(x.g)(s.data[t].ORCAMENTO_DISPONIVEL),s.data[t].SALDO_DISPONIVEL_FORMATTED=Object(x.g)(s.data[t].SALDO_DISPONIVEL),s.data[t].PAGO_FORMATTED=null==s.data[t].PAGO?0:Object(x.g)(s.data[t].PAGO);const r=s.data[t];s.data[t].action=Object(N.jsxs)(c.a.Fragment,{children:[0==Object(x.s)(g,e,"Editar")?null:Object(N.jsx)(b.b,{to:"#",title:Object(x.u)(g,e,"Editar"),onClick:()=>w(r),className:"text-primary mx-1",children:Object(N.jsx)("i",{className:"text-primary "+Object(x.t)(g,e,"Editar")})}),0==Object(x.s)(g,e,"Eliminar")?null:Object(N.jsx)(b.b,{to:"#",title:Object(x.u)(g,e,"Eliminar"),onClick:()=>H(a),className:"text-danger",children:Object(N.jsx)("i",{className:""+Object(x.t)(g,e,"Eliminar")})})]})}M(s.data)}}catch(s){console.error(s.response)}}const w=e=>{S(e.ID),m(e.NOME),E(e.OBS),R(e.ORCAMENTO_CORRIGIDO),A(e.ORCAMENTO_INICIAL),I(e.ANO),z(!0),k(!1),U(!1)};const G=async e=>{let a=!0;try{await u.a.delete("/projetos/"+e)}catch(t){a=!1,console.error(t.response),s("Falha. Tente mais tarde")}return L(),a},H=async e=>{t({delete:G,id:e})};Object(r.useEffect)(()=>{0==Object(x.l)(g,e)?a.push("/"):L()},[]);const[V,k]=Object(r.useState)(!1),[B,z]=Object(r.useState)(!1),[q,U]=Object(r.useState)(!1),[J,K]=Object(r.useState)(!1);return Object(N.jsx)(c.a.Fragment,{children:Object(N.jsx)(l.a,{children:Object(N.jsxs)(n.a,{sm:12,children:[Object(N.jsx)(d.a,{children:Object(N.jsx)(d.a.Body,{children:Object(N.jsx)(f,{columns:i,data:_,modalOpen:()=>{S(""),m(""),E(""),R(0),A(0),k(!0),z(!1),U(!1)},uploadlist:L})})}),Object(N.jsxs)(j.a,{size:"x",show:V,onHide:()=>k(!1),children:[Object(N.jsx)(j.a.Header,{closeButton:!0,children:Object(N.jsx)(j.a.Title,{as:"h5",children:"Criar"})}),Object(N.jsx)(j.a.Body,{className:"newuserbox",children:Object(N.jsx)("form",{id:"criarItem",onSubmit:async function(e){e.preventDefault();const a={NOME:O,OBS:C,ANO:v,ORCAMENTO_INICIAL:y,ORCAMENTO_CORRIGIDO:T};console.log(a);try{"200"==(await u.a.post("/projetos",a)).status&&(L(),k(!1))}catch(t){console.error(t.response)}},children:Object(N.jsxs)(l.a,{children:[Object(N.jsx)(n.a,{sm:12,children:Object(N.jsxs)("div",{className:"form-group fill",children:[Object(N.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["C\xf3digo ",Object(N.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(N.jsx)("input",{disabled:!0,type:"text",className:"form-control",id:"Name",value:"*",required:!0})]})}),Object(N.jsx)(n.a,{sm:8,children:Object(N.jsxs)("div",{className:"form-group fill",children:[Object(N.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Nome ",Object(N.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(N.jsx)("input",{type:"text",maxLength:"128",onChange:e=>{m(e.target.value)},defaultValue:"",className:"form-control",placeholder:"Designa\xe7\xe3o...",required:!0})]})}),Object(N.jsx)(n.a,{sm:4,children:Object(N.jsxs)("div",{className:"form-group fill",children:[Object(N.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Ano ",Object(N.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(N.jsx)("input",{type:"number",className:"form-control ",placeholder:"Ano...",onChange:e=>{I(e.target.value)}})]})}),Object(N.jsx)(n.a,{sm:6,children:Object(N.jsxs)("div",{className:"form-group fill",children:[Object(N.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Or\xe7amento Inicial ",Object(N.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(N.jsx)("input",{type:"number",onChange:e=>{A(e.target.value)},className:"form-control",required:!0,placeholder:"Or\xe7amento Inicial..."})]})}),Object(N.jsx)(n.a,{sm:6,children:Object(N.jsxs)("div",{className:"form-group fill",children:[Object(N.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Or\xe7amento Corrigido ",Object(N.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(N.jsx)("input",{type:"number",onChange:e=>{R(e.target.value)},required:!0,className:"form-control",placeholder:"Or\xe7amento Corrigido..."})]})}),Object(N.jsx)(n.a,{sm:12,children:Object(N.jsxs)("div",{className:"form-group fill",children:[Object(N.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Observa\xe7\xe3o ",Object(N.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(N.jsx)("textarea",{className:"form-control",maxLength:"64000",onChange:e=>{E(e.target.value)},id:"obs",required:!0,rows:"3",placeholder:"Observa\xe7\xe3o..."})]})})]})})}),Object(N.jsxs)(j.a.Footer,{children:[Object(N.jsx)(o.a,{variant:"danger",onClick:()=>k(!1),children:"Fechar"}),Object(N.jsx)(o.a,{type:"submit",form:"criarItem",variant:"primary",children:"Guardar"})]})]}),Object(N.jsxs)(j.a,{size:"x",show:B,onHide:()=>z(!1),children:[Object(N.jsx)(j.a.Header,{closeButton:!0,children:Object(N.jsx)(j.a.Title,{as:"h5",children:"Editar"})}),Object(N.jsx)(j.a.Body,{className:"newuserbox",children:Object(N.jsx)("form",{id:"editarItem",onSubmit:async function(e){e.preventDefault();const a={NOME:O,OBS:C,ANO:v,ORCAMENTO_INICIAL:y,ORCAMENTO_CORRIGIDO:T};console.log(a);try{"200"==(await u.a.put("/projetos/"+P,a)).status&&(L(),z(!1))}catch(t){console.error(t.response)}},children:Object(N.jsxs)(l.a,{children:[Object(N.jsx)(n.a,{sm:8,children:Object(N.jsxs)("div",{className:"form-group fill",children:[Object(N.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Nome ",Object(N.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(N.jsx)("input",{type:"text",maxLength:"128",onChange:e=>{m(e.target.value)},defaultValue:O,className:"form-control",id:"Utilizador",placeholder:"Designa\xe7\xe3o...",required:!0})]})}),Object(N.jsx)(n.a,{sm:4,children:Object(N.jsxs)("div",{className:"form-group fill",children:[Object(N.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Ano ",Object(N.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(N.jsx)("input",{type:"number",defaultValue:v,className:"form-control ",placeholder:"Ano...",onChange:e=>{I(e.target.value)}})]})}),Object(N.jsx)(n.a,{sm:6,children:Object(N.jsxs)("div",{className:"form-group fill",children:[Object(N.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Or\xe7amento Inicial ",Object(N.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(N.jsx)("input",{type:"number",onChange:e=>{A(e.target.value)},defaultValue:y,className:"form-control",placeholder:"Or\xe7amento Inicial..."})]})}),Object(N.jsx)(n.a,{sm:6,children:Object(N.jsxs)("div",{className:"form-group fill",children:[Object(N.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Or\xe7amento Corrigido ",Object(N.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(N.jsx)("input",{type:"number",onChange:e=>{R(e.target.value)},defaultValue:T,className:"form-control",placeholder:"Or\xe7amento Corrigido..."})]})}),Object(N.jsx)(n.a,{sm:12,children:Object(N.jsxs)("div",{className:"form-group fill",children:[Object(N.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Observa\xe7\xe3o ",Object(N.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(N.jsx)("textarea",{className:"form-control",defaultValue:C,maxLength:"64000",onChange:e=>{E(e.target.value)},id:"obs",rows:"3",placeholder:"Observa\xe7\xe3o..."})]})})]})})}),Object(N.jsxs)(j.a.Footer,{children:[Object(N.jsx)(o.a,{variant:"danger",onClick:()=>z(!1),children:"Fechar"}),Object(N.jsx)(o.a,{type:"submit",form:"editarItem",variant:"primary",children:"Guardar"})]})]})]})})})}}}]);
//# sourceMappingURL=55.112d524b.chunk.js.map