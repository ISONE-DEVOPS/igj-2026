(this["webpackJsonpigj-frontend"]=this["webpackJsonpigj-frontend"]||[]).push([[70],{951:function(e,t,a){},985:function(e,t,a){"use strict";a.r(t);var s=a(8),o=a(0),i=a(812),l=a(404),r=a(873),n=a(839),c=a(1);var d=e=>{let{title:t,value:a,icon:s,color:o,subtitle:i,change:l,sparklineData:d,loading:b,format:p}=e;const h={chart:{type:"area",height:40,sparkline:{enabled:!0},animations:{enabled:!0,easing:"easeinout",speed:800}},stroke:{curve:"smooth",width:2},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.4,opacityTo:.1,stops:[0,100]}},colors:[o||"#2B7FB9"],tooltip:{enabled:!1}},m=d?[{name:t,data:d.map(e=>e.total||e)}]:[];return b?Object(c.jsx)(n.a,{className:"kpi-card",children:Object(c.jsx)(n.a.Body,{children:Object(c.jsxs)("div",{className:"kpi-skeleton",children:[Object(c.jsx)("div",{className:"skeleton-line skeleton-title"}),Object(c.jsx)("div",{className:"skeleton-line skeleton-value"}),Object(c.jsx)("div",{className:"skeleton-line skeleton-sparkline"})]})})}):Object(c.jsx)(n.a,{className:"kpi-card",style:{borderLeft:"4px solid ".concat(o||"#2B7FB9")},children:Object(c.jsxs)(n.a.Body,{className:"p-3",children:[Object(c.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("p",{className:"kpi-title mb-0",children:t}),Object(c.jsx)("h3",{className:"kpi-value mb-0",children:(j=a||0,"currency"===p?j>=1e6?"".concat((j/1e6).toFixed(1),"M CVE"):j>=1e3?"".concat((j/1e3).toFixed(0),"K CVE"):"".concat(Number(j).toLocaleString("pt-CV")," CVE"):"percent"===p?"".concat(j,"%"):j>=1e6?"".concat((j/1e6).toFixed(1),"M"):j>=1e3?"".concat((j/1e3).toFixed(0),"K"):Number(j).toLocaleString("pt-CV"))})]}),Object(c.jsx)("div",{className:"kpi-icon",style:{color:o||"#2B7FB9"},children:Object(c.jsx)("i",{className:s})})]}),i&&Object(c.jsxs)("p",{className:"kpi-subtitle mb-1",children:[void 0!==l&&Object(c.jsxs)("span",{className:"kpi-change ".concat(l>=0?"positive":"negative"),children:[Object(c.jsx)("i",{className:"feather ".concat(l>=0?"icon-trending-up":"icon-trending-down")})," ",Math.abs(l),"%"]})," ",i]}),d&&d.length>1&&Object(c.jsx)("div",{className:"kpi-sparkline",children:Object(c.jsx)(r.a,{options:h,series:m,type:"area",height:40})})]})});var j};var b=e=>{let{title:t,subtitle:a,children:s,loading:o,height:i}=e;return o?Object(c.jsxs)(n.a,{className:"chart-card",children:[Object(c.jsx)(n.a.Header,{className:"chart-card-header",children:Object(c.jsx)("div",{className:"skeleton-line skeleton-title",style:{width:"60%"}})}),Object(c.jsx)(n.a.Body,{className:"chart-card-body",children:Object(c.jsx)("div",{className:"chart-skeleton",style:{height:i||300},children:Object(c.jsx)("div",{className:"skeleton-chart-placeholder"})})})]}):Object(c.jsxs)(n.a,{className:"chart-card",children:[Object(c.jsxs)(n.a.Header,{className:"chart-card-header",children:[Object(c.jsx)("h6",{className:"chart-card-title mb-0",children:t}),a&&Object(c.jsx)("small",{className:"chart-card-subtitle",children:a})]}),Object(c.jsx)(n.a.Body,{className:"chart-card-body p-2",children:s})]})},p=a(403),h=a(821);var m=e=>{let{filtrosOpcoes:t,filters:a,onFilterChange:o,onRefresh:r,loading:n}=e;const d=null!==t&&void 0!==t&&t.anos?[{value:"",label:"Todos os Anos"},...t.anos.map(e=>({value:e,label:String(e)}))]:[{value:"",label:"Todos os Anos"}],b=null!==t&&void 0!==t&&t.entidades?[{value:"",label:"Todas as Entidades"},...t.entidades.map(e=>({value:e.id,label:e.nome}))]:[{value:"",label:"Todas as Entidades"}],m={control:e=>Object(s.a)(Object(s.a)({},e),{},{borderRadius:"8px",borderColor:"#e0e0e0",boxShadow:"none",minHeight:"38px","&:hover":{borderColor:"#C5A55A"}}),option:(e,t)=>Object(s.a)(Object(s.a)({},e),{},{backgroundColor:t.isSelected?"#2B7FB9":t.isFocused?"#f0f7ff":"white",color:t.isSelected?"white":"#2D3436",fontSize:"13px"}),singleValue:e=>Object(s.a)(Object(s.a)({},e),{},{fontSize:"13px",color:"#2D3436"}),placeholder:e=>Object(s.a)(Object(s.a)({},e),{},{fontSize:"13px"})};return Object(c.jsx)("div",{className:"dashboard-filters mb-4",children:Object(c.jsxs)(i.a,{className:"align-items-center",children:[Object(c.jsx)(l.a,{xs:12,md:3,children:Object(c.jsxs)("h4",{className:"dashboard-title mb-0",children:[Object(c.jsx)("i",{className:"feather icon-bar-chart-2 mr-2",style:{color:"#C5A55A"}}),"Dashboard"]})}),Object(c.jsx)(l.a,{xs:6,md:3,children:Object(c.jsx)(h.a,{value:d.find(e=>e.value===(a.ano||""))||d[0],onChange:e=>o(Object(s.a)(Object(s.a)({},a),{},{ano:e.value})),options:d,styles:m,placeholder:"Ano",isSearchable:!1})}),Object(c.jsx)(l.a,{xs:6,md:4,children:Object(c.jsx)(h.a,{value:b.find(e=>e.value===(a.entidadeId||""))||b[0],onChange:e=>o(Object(s.a)(Object(s.a)({},a),{},{entidadeId:e.value})),options:b,styles:m,placeholder:"Entidade"})}),Object(c.jsx)(l.a,{xs:12,md:2,className:"mt-2 mt-md-0",children:Object(c.jsxs)(p.a,{variant:"outline-secondary",className:"btn-refresh w-100",onClick:r,disabled:n,children:[Object(c.jsx)("i",{className:"feather icon-refresh-cw ".concat(n?"spin":"")})," ","Atualizar"]})})]})})},j=a(32);var u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[t,a]=Object(o.useState)({kpis:null,financeiro:null,receitaEntidade:null,processos:null,eventos:null,entidades:null,atividade:null,handpay:null,casosSuspeitos:null,orcamento:null,filtrosOpcoes:null}),[i,l]=Object(o.useState)(!0),[r,n]=Object(o.useState)(null),c=Object(o.useCallback)(()=>{const t={};return e.ano&&(t.ano=e.ano),e.entidadeId&&(t.entidade_id=e.entidadeId),t},[e.ano,e.entidadeId]),d=Object(o.useCallback)(async()=>{l(!0),n(null);const e=localStorage.getItem("token"),t=e?{headers:{Authorization:"Bearer ".concat(e)}}:{},o=c();try{const[e,i,l,r,n,c,d,b,p,h,m]=await Promise.allSettled([j.a.get("/dashboard/kpis",Object(s.a)(Object(s.a)({},t),{},{params:o})),j.a.get("/dashboard/financeiro",Object(s.a)(Object(s.a)({},t),{},{params:o})),j.a.get("/dashboard/receita-entidade",Object(s.a)(Object(s.a)({},t),{},{params:o})),j.a.get("/dashboard/processos",Object(s.a)(Object(s.a)({},t),{},{params:o})),j.a.get("/dashboard/eventos",Object(s.a)(Object(s.a)({},t),{},{params:o})),j.a.get("/dashboard/entidades",t),j.a.get("/dashboard/atividade",t),j.a.get("/dashboard/handpay",Object(s.a)(Object(s.a)({},t),{},{params:o})),j.a.get("/dashboard/casos-suspeitos",t),j.a.get("/dashboard/orcamento",Object(s.a)(Object(s.a)({},t),{},{params:o})),j.a.get("/dashboard/filtros",t)]);a({kpis:"fulfilled"===e.status?e.value.data:null,financeiro:"fulfilled"===i.status?i.value.data:null,receitaEntidade:"fulfilled"===l.status?l.value.data:null,processos:"fulfilled"===r.status?r.value.data:null,eventos:"fulfilled"===n.status?n.value.data:null,entidades:"fulfilled"===c.status?c.value.data:null,atividade:"fulfilled"===d.status?d.value.data:null,handpay:"fulfilled"===b.status?b.value.data:null,casosSuspeitos:"fulfilled"===p.status?p.value.data:null,orcamento:"fulfilled"===h.status?h.value.data:null,filtrosOpcoes:"fulfilled"===m.status?m.value.data:null})}catch(i){n(i.message||"Erro ao carregar dados do dashboard")}finally{l(!1)}},[c]);return Object(o.useEffect)(()=>{d()},[d]),Object(s.a)(Object(s.a)({},t),{},{loading:i,error:r,refetch:d})};const x=["#2B7FB9","#C5A55A","#2ED8B6","#1B4965","#4099FF"],f=e=>{if(!e||0===e.length)return null;const t=e.map(e=>String(e.ano));return{options:{chart:{type:"area",height:320,toolbar:{show:!0,tools:{download:!0,selection:!1,zoom:!1,pan:!1}},animations:{enabled:!0,easing:"easeinout",speed:800}},colors:x,dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2.5},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.35,opacityTo:.05,stops:[0,95,100]}},xaxis:{categories:t,labels:{style:{colors:"#636E72",fontSize:"12px"}},axisBorder:{show:!1}},yaxis:{labels:{style:{colors:"#636E72",fontSize:"11px"},formatter:e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(0),"K"):e}},legend:{position:"top",horizontalAlign:"left",fontSize:"12px",markers:{radius:3}},grid:{borderColor:"#f1f1f1",strokeDashArray:3},tooltip:{y:{formatter:e=>"".concat(Number(e).toLocaleString("pt-CV")," CVE")}}},series:[{name:"Receita Bruta",data:e.map(e=>e.receita_bruta)},{name:"Impostos",data:e.map(e=>e.impostos)},{name:"Contrapartidas",data:e.map(e=>e.contrapartidas)},{name:"Contribui\xe7\xf5es",data:e.map(e=>e.contribuicoes)},{name:"Pr\xe9mios",data:e.map(e=>e.premios)}]}};const O=["#2B7FB9","#C5A55A","#2ED8B6","#1B4965","#4099FF"],g=e=>{if(!e||0===e.length)return null;const t=e.reduce((e,t)=>({premios:e.premios+(t.premios||0),impostos:e.impostos+(t.impostos||0),contrapartidas:e.contrapartidas+(t.contrapartidas||0),contribuicoes:e.contribuicoes+(t.contribuicoes||0)}),{premios:0,impostos:0,contrapartidas:0,contribuicoes:0}),a=[t.premios,t.impostos,t.contrapartidas,t.contribuicoes];return{options:{chart:{type:"donut",height:320,animations:{enabled:!0,easing:"easeinout",speed:800}},colors:O,labels:["Pr\xe9mios","Impostos","Contrapartidas","Contribui\xe7\xf5es IGJ"],legend:{position:"bottom",fontSize:"12px",markers:{radius:3}},plotOptions:{pie:{donut:{size:"65%",labels:{show:!0,name:{show:!0,fontSize:"14px",color:"#2D3436"},value:{show:!0,fontSize:"16px",fontWeight:700,color:"#2D3436",formatter:e=>{const t=Number(e);return t>=1e6?"".concat((t/1e6).toFixed(1),"M"):t>=1e3?"".concat((t/1e3).toFixed(0),"K"):t.toLocaleString("pt-CV")}},total:{show:!0,label:"Total",fontSize:"13px",color:"#636E72",formatter:e=>{const t=e.globals.seriesTotals.reduce((e,t)=>e+t,0);return t>=1e6?"".concat((t/1e6).toFixed(1),"M CVE"):"".concat((t/1e3).toFixed(0),"K CVE")}}}}}},dataLabels:{enabled:!1},tooltip:{y:{formatter:e=>"".concat(Number(e).toLocaleString("pt-CV")," CVE")}},stroke:{width:2,colors:["#fff"]}},series:a}};const v=e=>{if(!e||0===e.length)return null;const t=e.map(e=>e.entidade||"N/A");return{options:{chart:{type:"bar",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:600}},plotOptions:{bar:{horizontal:!0,borderRadius:4,barHeight:"60%",distributed:!1}},colors:["#2B7FB9"],dataLabels:{enabled:!0,formatter:e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(0),"K"):e,style:{fontSize:"11px",colors:["#fff"]},offsetX:-5},xaxis:{labels:{style:{colors:"#636E72",fontSize:"11px"},formatter:e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(0),"K"):e}},yaxis:{labels:{style:{colors:"#636E72",fontSize:"11px"},maxWidth:150}},grid:{borderColor:"#f1f1f1",strokeDashArray:3},tooltip:{y:{formatter:e=>"".concat(Number(e).toLocaleString("pt-CV")," CVE")}}},series:[{name:"Receita Bruta",data:e.map(e=>e.receita_bruta)}],categories:t}};const y=["#2B7FB9","#C5A55A","#2ED8B6","#1B4965","#4099FF","#D4A843","#F39C12"],N=e=>{if(!e||0===e.length)return null;const t=e.filter(e=>e.maquinas+e.bancas+e.equipamentos>0).map(e=>({x:e.entidade||"N/A",y:e.maquinas+e.bancas+e.equipamentos}));return{options:{chart:{type:"treemap",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:600}},colors:y,legend:{show:!1},plotOptions:{treemap:{distributed:!0,enableShades:!1}},dataLabels:{enabled:!0,style:{fontSize:"12px"},formatter:(e,t)=>"".concat(e,": ").concat(t.value),offsetY:-2},tooltip:{y:{formatter:(t,a)=>{let{dataPointIndex:s}=a;const o=e.filter(e=>e.maquinas+e.bancas+e.equipamentos>0)[s];return o?"M\xe1quinas: ".concat(o.maquinas," | Bancas: ").concat(o.bancas," | Equip.: ").concat(o.equipamentos):"".concat(t," total")}}}},series:[{data:t}]}};const S=e=>{if(!e)return null;const{exclusaoPorMes:t,autoExclusaoPorMes:a}=e,s=new Set;(t||[]).forEach(e=>s.add(e.mes)),(a||[]).forEach(e=>s.add(e.mes));const o=Array.from(s).sort(),i={},l={};(t||[]).forEach(e=>{i[e.mes]=e.total}),(a||[]).forEach(e=>{l[e.mes]=e.total});return{options:{chart:{type:"bar",height:320,stacked:!0,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:600}},plotOptions:{bar:{borderRadius:4,columnWidth:"50%"}},colors:["#1B4965","#C5A55A"],xaxis:{categories:o.map(e=>{const[t,a]=e.split("-");return"".concat(["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][parseInt(a)-1]," ").concat(t.slice(2))}),labels:{style:{colors:"#636E72",fontSize:"11px"},rotateAlways:!1}},yaxis:{labels:{style:{colors:"#636E72",fontSize:"11px"}}},legend:{position:"top",horizontalAlign:"left",fontSize:"12px",markers:{radius:3}},grid:{borderColor:"#f1f1f1",strokeDashArray:3},tooltip:{shared:!0,intersect:!1}},series:[{name:"Exclus\xe3o",data:o.map(e=>i[e]||0)},{name:"Auto-exclus\xe3o",data:o.map(e=>l[e]||0)}]}};const A=e=>{if(!e)return null;const{exclusaoStatus:t}=e;if(!t)return null;const a=t.total||1;return{options:{chart:{type:"radialBar",height:320,animations:{enabled:!0,easing:"easeinout",speed:800}},plotOptions:{radialBar:{offsetY:-10,startAngle:0,endAngle:270,hollow:{size:"30%"},dataLabels:{name:{fontSize:"13px",color:"#636E72"},value:{fontSize:"16px",fontWeight:700,color:"#2D3436"},total:{show:!0,label:"Total",formatter:()=>t.total}},track:{background:"#f1f1f1",strokeWidth:"100%"}}},colors:["#2B7FB9","#2ED8B6","#C5A55A","#F39C12"],labels:["Ativos","Finalizados","Arquivados","Prescritos"],legend:{show:!0,position:"bottom",fontSize:"12px",markers:{radius:3},formatter:(e,a)=>{const s=[t.ativos||0,t.finalizados||0,t.arquivados||0,t.prescritos||0];return"".concat(e,": ").concat(s[a.seriesIndex])}}},series:[Math.round((t.ativos||0)/a*100),Math.round((t.finalizados||0)/a*100),Math.round((t.arquivados||0)/a*100),Math.round((t.prescritos||0)/a*100)]}};const E=e=>{if(!e||!e.status)return null;const{aprovados:t,pendentes:a,recusados:s}=e.status;return{options:{chart:{type:"pie",height:320,animations:{enabled:!0,easing:"easeinout",speed:800}},colors:["#2ED8B6","#C5A55A","#F39C12"],labels:["Aprovados","Pendentes","Recusados"],legend:{position:"bottom",fontSize:"12px",markers:{radius:3}},dataLabels:{enabled:!0,formatter:(e,t)=>{const a=t.w.globals.series[t.seriesIndex];return"".concat(a," (").concat(e.toFixed(0),"%)")},style:{fontSize:"12px"}},stroke:{width:2,colors:["#fff"]},tooltip:{y:{formatter:e=>"".concat(e," eventos")}}},series:[t||0,a||0,s||0]}};const C=e=>{if(!e||0===e.length)return null;const t={};e.forEach(e=>{const a=e.modulo||"Outro";t[a]=(t[a]||0)+e.total});const a=Object.entries(t).sort((e,t)=>t[1]-e[1]).slice(0,8).map(e=>{let[t]=e;return t}),s=[...new Set(e.map(e=>e.mes))].sort(),o=e=>{const[t,a]=e.split("-");return"".concat(["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][parseInt(a)-1]," ").concat(t.slice(2))},i={};e.forEach(e=>{i["".concat(e.modulo,"-").concat(e.mes)]=e.total});return{options:{chart:{type:"heatmap",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:600}},plotOptions:{heatmap:{radius:4,enableShades:!0,shadeIntensity:.5,colorScale:{ranges:[{from:0,to:0,color:"#f1f1f1",name:"Nenhuma"},{from:1,to:10,color:"#4099FF",name:"Baixa"},{from:11,to:50,color:"#2B7FB9",name:"M\xe9dia"},{from:51,to:200,color:"#1B4965",name:"Alta"},{from:201,to:1e4,color:"#C5A55A",name:"Muito Alta"}]}}},dataLabels:{enabled:!1},xaxis:{labels:{style:{colors:"#636E72",fontSize:"10px"}}},yaxis:{labels:{style:{colors:"#636E72",fontSize:"10px"}}},grid:{padding:{right:10}},tooltip:{y:{formatter:e=>"".concat(e," registos")}}},series:a.map(e=>({name:e.replace("sgigj","").replace("glb",""),data:s.map(t=>({x:o(t),y:i["".concat(e,"-").concat(t)]||0}))}))}};const k=e=>{if(!e||0===e.length)return null;return{options:{chart:{type:"bar",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:600}},plotOptions:{bar:{borderRadius:4,columnWidth:"45%"}},colors:["#1B4965","#C5A55A"],xaxis:{categories:e.map(e=>e.entidade||"N/A"),labels:{style:{colors:"#636E72",fontSize:"10px"},rotate:-45,trim:!0,maxHeight:80}},yaxis:[{title:{text:"Valor (CVE)",style:{color:"#1B4965",fontSize:"11px"}},labels:{style:{colors:"#636E72",fontSize:"11px"},formatter:e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(0),"K"):e}},{opposite:!0,title:{text:"Quantidade",style:{color:"#C5A55A",fontSize:"11px"}},labels:{style:{colors:"#636E72",fontSize:"11px"}}}],legend:{position:"top",horizontalAlign:"left",fontSize:"12px",markers:{radius:3}},grid:{borderColor:"#f1f1f1",strokeDashArray:3},tooltip:{shared:!0,intersect:!1,y:{formatter:(e,t)=>{let{seriesIndex:a}=t;return 0===a?"".concat(Number(e).toLocaleString("pt-CV")," CVE"):"".concat(e," registos")}}},stroke:{width:[0,3],curve:"smooth"}},series:[{name:"Valor Total",type:"bar",data:e.map(e=>e.valor_total)},{name:"Quantidade",type:"line",data:e.map(e=>e.quantidade)}]}};const F=e=>{if(!e||0===e.length)return null;const t=e.map(e=>(e=>{const[t,a]=e.split("-");return"".concat(["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][parseInt(a)-1]," ").concat(t.slice(2))})(e.mes)),a=e.map(e=>e.total);let s=0;return{options:{chart:{type:"area",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:800}},colors:["#F39C12","#1B4965"],dataLabels:{enabled:!1},stroke:{curve:"smooth",width:[2.5,2]},fill:{type:["gradient","gradient"],gradient:{shadeIntensity:1,opacityFrom:.35,opacityTo:.05,stops:[0,95,100]}},xaxis:{categories:t,labels:{style:{colors:"#636E72",fontSize:"11px"}}},yaxis:[{title:{text:"Mensal",style:{color:"#F39C12",fontSize:"11px"}},labels:{style:{colors:"#636E72",fontSize:"11px"}}},{opposite:!0,title:{text:"Acumulado",style:{color:"#1B4965",fontSize:"11px"}},labels:{style:{colors:"#636E72",fontSize:"11px"}}}],legend:{position:"top",horizontalAlign:"left",fontSize:"12px",markers:{radius:3}},grid:{borderColor:"#f1f1f1",strokeDashArray:3},tooltip:{shared:!0,intersect:!1}},series:[{name:"Casos Mensais",data:a},{name:"Acumulado",data:e.map(e=>(s+=e.total,s))}]}};const z=e=>{if(!e||!e.porProjeto)return null;const{orcamento:t,despesas:a}=e.porProjeto;if(!t||0===t.length)return null;const s=new Set;t.forEach(e=>s.add(e.projeto||"Sem Projeto")),a.forEach(e=>s.add(e.projeto||"Sem Projeto"));const o=Array.from(s),i={},l={};return t.forEach(e=>{i[e.projeto||"Sem Projeto"]=e.orcamento_previsto}),a.forEach(e=>{l[e.projeto||"Sem Projeto"]=e.despesa_real}),{options:{chart:{type:"bar",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:600}},plotOptions:{bar:{horizontal:!1,borderRadius:4,columnWidth:"55%",dataLabels:{position:"top"}}},colors:["#2B7FB9","#C5A55A"],dataLabels:{enabled:!1},xaxis:{categories:o,labels:{style:{colors:"#636E72",fontSize:"10px"},rotate:-45,trim:!0,maxHeight:80}},yaxis:{labels:{style:{colors:"#636E72",fontSize:"11px"},formatter:e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(0),"K"):e}},legend:{position:"top",horizontalAlign:"left",fontSize:"12px",markers:{radius:3}},grid:{borderColor:"#f1f1f1",strokeDashArray:3},tooltip:{y:{formatter:e=>"".concat(Number(e).toLocaleString("pt-CV")," CVE")}}},series:[{name:"Or\xe7amento Previsto",data:o.map(e=>i[e]||0)},{name:"Despesa Real",data:o.map(e=>l[e]||0)}]}};const B=e=>{if(!e)return null;const t=e.taxaExecucao||0;return{options:{chart:{type:"radialBar",height:320,animations:{enabled:!0,easing:"easeinout",speed:800}},plotOptions:{radialBar:{startAngle:-135,endAngle:135,hollow:{size:"65%"},track:{background:"#f1f1f1",strokeWidth:"100%",margin:5,dropShadow:{enabled:!1}},dataLabels:{name:{show:!0,fontSize:"14px",color:"#636E72",offsetY:-10},value:{show:!0,fontSize:"32px",fontWeight:700,color:"#2D3436",offsetY:5,formatter:e=>"".concat(e,"%")}}}},colors:[(a=t,a>=80?"#2ED8B6":a>=50?"#C5A55A":a>=25?"#F39C12":"#E74C3C")],labels:["Execu\xe7\xe3o Or\xe7amental"],stroke:{lineCap:"round"}},series:[t],totalOrcamento:e.totalOrcamento,totalDespesa:e.totalDespesa};var a};a(951);t.default=()=>{var e,t;const[a,n]=Object(o.useState)({ano:"",entidadeId:""}),{kpis:p,financeiro:h,receitaEntidade:j,processos:x,eventos:O,entidades:y,atividade:w,handpay:D,casosSuspeitos:M,orcamento:V,filtrosOpcoes:I,loading:L,refetch:P}=u(a),q=f(h),R=g(h),T=v(j),J=N(y),K=S(x),W=A(x),H=E(O),_=C(w),Y=k(D),G=F(M),Q=z(V),X=B(V),U=e=>e?e>=1e6?"".concat((e/1e6).toFixed(1),"M CVE"):e>=1e3?"".concat((e/1e3).toFixed(0),"K CVE"):"".concat(Number(e).toLocaleString("pt-CV")," CVE"):"0 CVE";return Object(c.jsxs)("div",{className:"dashboard-wrapper",children:[Object(c.jsx)(m,{filtrosOpcoes:I,filters:a,onFilterChange:n,onRefresh:P,loading:L}),Object(c.jsxs)(i.a,{className:"mt-3",children:[Object(c.jsx)(l.a,{xs:6,lg:3,xl:!0,className:"mb-3",children:Object(c.jsx)(d,{title:"Receita Bruta",value:null===p||void 0===p?void 0:p.receitaBruta,icon:"feather icon-dollar-sign",color:"#2B7FB9",format:"currency",subtitle:"Total acumulado",sparklineData:null===p||void 0===p||null===(e=p.sparklines)||void 0===e?void 0:e.receita,loading:L})}),Object(c.jsx)(l.a,{xs:6,lg:3,xl:!0,className:"mb-3",children:Object(c.jsx)(d,{title:"Impostos",value:null===p||void 0===p?void 0:p.impostos,icon:"feather icon-trending-up",color:"#C5A55A",format:"currency",subtitle:"Arrecadados",loading:L})}),Object(c.jsx)(l.a,{xs:6,lg:3,xl:!0,className:"mb-3",children:Object(c.jsx)(d,{title:"Processos Ativos",value:null===p||void 0===p?void 0:p.processosAtivos,icon:"feather icon-file-text",color:"#1B4965",subtitle:"Exclus\xe3o + Auto-exclus\xe3o",sparklineData:null===p||void 0===p||null===(t=p.sparklines)||void 0===t?void 0:t.processos,loading:L})}),Object(c.jsx)(l.a,{xs:6,lg:3,xl:!0,className:"mb-3",children:Object(c.jsx)(d,{title:"Entidades",value:null===p||void 0===p?void 0:p.entidadesAtivas,icon:"feather icon-home",color:"#2ED8B6",subtitle:"Ativas",loading:L})}),Object(c.jsx)(l.a,{xs:6,lg:3,xl:!0,className:"mb-3",children:Object(c.jsx)(d,{title:"Eventos",value:null===p||void 0===p?void 0:p.eventosAprovados,icon:"feather icon-calendar",color:"#4099FF",subtitle:"Registados",loading:L})}),Object(c.jsx)(l.a,{xs:6,lg:3,xl:!0,className:"mb-3",children:Object(c.jsx)(d,{title:"Casos Suspeitos",value:null===p||void 0===p?void 0:p.casosSuspeitos,icon:"feather icon-alert-triangle",color:"#F39C12",subtitle:"Ativos",loading:L})}),Object(c.jsx)(l.a,{xs:6,lg:3,xl:!0,className:"mb-3",children:Object(c.jsx)(d,{title:"Exec. Or\xe7amental",value:null===p||void 0===p?void 0:p.execucaoOrcamental,icon:"feather icon-pie-chart",color:"#D4A843",format:"percent",subtitle:"Taxa de execu\xe7\xe3o",loading:L})})]}),Object(c.jsxs)("div",{className:"dashboard-section",children:[Object(c.jsx)("span",{className:"section-title",children:"Vis\xe3o Financeira"}),Object(c.jsxs)(i.a,{children:[Object(c.jsx)(l.a,{lg:7,className:"mb-3",children:Object(c.jsx)(b,{title:"Evolu\xe7\xe3o Financeira Anual",subtitle:"Receita, impostos, contrapartidas e contribui\xe7\xf5es",loading:L,children:q?Object(c.jsx)(r.a,{options:q.options,series:q.series,type:"area",height:320}):Object(c.jsxs)("div",{className:"dashboard-empty-state",children:[Object(c.jsx)("i",{className:"feather icon-bar-chart-2"}),Object(c.jsx)("p",{children:"Sem dados financeiros dispon\xedveis"})]})})}),Object(c.jsx)(l.a,{lg:5,className:"mb-3",children:Object(c.jsx)(b,{title:"Composi\xe7\xe3o da Receita",subtitle:"Distribui\xe7\xe3o por categoria",loading:L,children:R?Object(c.jsx)(r.a,{options:R.options,series:R.series,type:"donut",height:320}):Object(c.jsxs)("div",{className:"dashboard-empty-state",children:[Object(c.jsx)("i",{className:"feather icon-pie-chart"}),Object(c.jsx)("p",{children:"Sem dados dispon\xedveis"})]})})})]})]}),Object(c.jsxs)("div",{className:"dashboard-section",children:[Object(c.jsx)("span",{className:"section-title",children:"Entidades & Receita por Casino"}),Object(c.jsxs)(i.a,{children:[Object(c.jsx)(l.a,{lg:7,className:"mb-3",children:Object(c.jsx)(b,{title:"Receita Bruta por Entidade",subtitle:"Top casinos por volume",loading:L,children:T?Object(c.jsx)(r.a,{options:Object(s.a)(Object(s.a)({},T.options),{},{xaxis:Object(s.a)(Object(s.a)({},T.options.xaxis),{},{categories:T.categories})}),series:T.series,type:"bar",height:320}):Object(c.jsxs)("div",{className:"dashboard-empty-state",children:[Object(c.jsx)("i",{className:"feather icon-bar-chart"}),Object(c.jsx)("p",{children:"Sem dados de receita por entidade"})]})})}),Object(c.jsx)(l.a,{lg:5,className:"mb-3",children:Object(c.jsx)(b,{title:"Equipamentos por Entidade",subtitle:"M\xe1quinas, bancas e equipamentos",loading:L,children:J?Object(c.jsx)(r.a,{options:J.options,series:J.series,type:"treemap",height:320}):Object(c.jsxs)("div",{className:"dashboard-empty-state",children:[Object(c.jsx)("i",{className:"feather icon-grid"}),Object(c.jsx)("p",{children:"Sem dados de equipamentos"})]})})})]})]}),Object(c.jsxs)("div",{className:"dashboard-section",children:[Object(c.jsx)("span",{className:"section-title",children:"Processos & Exclus\xf5es"}),Object(c.jsxs)(i.a,{children:[Object(c.jsx)(l.a,{lg:7,className:"mb-3",children:Object(c.jsx)(b,{title:"Processos por M\xeas",subtitle:"Exclus\xe3o vs Auto-exclus\xe3o (\xfaltimos 12 meses)",loading:L,children:K?Object(c.jsx)(r.a,{options:K.options,series:K.series,type:"bar",height:320}):Object(c.jsxs)("div",{className:"dashboard-empty-state",children:[Object(c.jsx)("i",{className:"feather icon-file-text"}),Object(c.jsx)("p",{children:"Sem dados de processos"})]})})}),Object(c.jsx)(l.a,{lg:5,className:"mb-3",children:Object(c.jsx)(b,{title:"Status dos Processos",subtitle:"Distribui\xe7\xe3o por estado",loading:L,children:W?Object(c.jsx)(r.a,{options:W.options,series:W.series,type:"radialBar",height:320}):Object(c.jsxs)("div",{className:"dashboard-empty-state",children:[Object(c.jsx)("i",{className:"feather icon-activity"}),Object(c.jsx)("p",{children:"Sem dados de processos"})]})})})]})]}),Object(c.jsxs)("div",{className:"dashboard-section",children:[Object(c.jsx)("span",{className:"section-title",children:"Eventos & Atividade"}),Object(c.jsxs)(i.a,{children:[Object(c.jsx)(l.a,{lg:5,className:"mb-3",children:Object(c.jsx)(b,{title:"Eventos por Status",subtitle:"Aprovados, pendentes e recusados",loading:L,children:H?Object(c.jsx)(r.a,{options:H.options,series:H.series,type:"pie",height:320}):Object(c.jsxs)("div",{className:"dashboard-empty-state",children:[Object(c.jsx)("i",{className:"feather icon-calendar"}),Object(c.jsx)("p",{children:"Sem dados de eventos"})]})})}),Object(c.jsx)(l.a,{lg:7,className:"mb-3",children:Object(c.jsx)(b,{title:"Atividade do Sistema",subtitle:"Registos por m\xf3dulo (\xfaltimos 12 meses)",loading:L,children:_?Object(c.jsx)(r.a,{options:_.options,series:_.series,type:"heatmap",height:320}):Object(c.jsxs)("div",{className:"dashboard-empty-state",children:[Object(c.jsx)("i",{className:"feather icon-activity"}),Object(c.jsx)("p",{children:"Sem dados de atividade"})]})})})]})]}),Object(c.jsxs)("div",{className:"dashboard-section",children:[Object(c.jsx)("span",{className:"section-title",children:"Handpay & Casos Suspeitos"}),Object(c.jsxs)(i.a,{children:[Object(c.jsx)(l.a,{lg:7,className:"mb-3",children:Object(c.jsx)(b,{title:"Handpay por Entidade",subtitle:"Valor total e quantidade de registos",loading:L,children:Y?Object(c.jsx)(r.a,{options:Y.options,series:Y.series,type:"bar",height:320}):Object(c.jsxs)("div",{className:"dashboard-empty-state",children:[Object(c.jsx)("i",{className:"feather icon-credit-card"}),Object(c.jsx)("p",{children:"Sem dados de handpay"})]})})}),Object(c.jsx)(l.a,{lg:5,className:"mb-3",children:Object(c.jsx)(b,{title:"Casos Suspeitos - Evolu\xe7\xe3o",subtitle:"Mensal e acumulado",loading:L,children:G?Object(c.jsx)(r.a,{options:G.options,series:G.series,type:"area",height:320}):Object(c.jsxs)("div",{className:"dashboard-empty-state",children:[Object(c.jsx)("i",{className:"feather icon-alert-triangle"}),Object(c.jsx)("p",{children:"Sem casos suspeitos registados"})]})})})]})]}),Object(c.jsxs)("div",{className:"dashboard-section",children:[Object(c.jsx)("span",{className:"section-title",children:"Or\xe7amento IGJ"}),Object(c.jsxs)(i.a,{children:[Object(c.jsx)(l.a,{lg:7,className:"mb-3",children:Object(c.jsx)(b,{title:"Or\xe7amento vs Despesa",subtitle:"Por projeto/rubrica",loading:L,children:Q?Object(c.jsx)(r.a,{options:Q.options,series:Q.series,type:"bar",height:320}):Object(c.jsxs)("div",{className:"dashboard-empty-state",children:[Object(c.jsx)("i",{className:"feather icon-book"}),Object(c.jsx)("p",{children:"Sem dados de or\xe7amento"})]})})}),Object(c.jsx)(l.a,{lg:5,className:"mb-3",children:Object(c.jsx)(b,{title:"Taxa de Execu\xe7\xe3o Or\xe7amental",subtitle:"Progresso de execu\xe7\xe3o",loading:L,children:X?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(r.a,{options:X.options,series:X.series,type:"radialBar",height:280}),Object(c.jsxs)(i.a,{className:"budget-info",children:[Object(c.jsxs)(l.a,{xs:6,children:[Object(c.jsx)("span",{className:"budget-label",children:"Or\xe7amento"}),Object(c.jsx)("span",{className:"budget-value",children:U(X.totalOrcamento)})]}),Object(c.jsxs)(l.a,{xs:6,children:[Object(c.jsx)("span",{className:"budget-label",children:"Despesa"}),Object(c.jsx)("span",{className:"budget-value",children:U(X.totalDespesa)})]})]})]}):Object(c.jsxs)("div",{className:"dashboard-empty-state",children:[Object(c.jsx)("i",{className:"feather icon-pie-chart"}),Object(c.jsx)("p",{children:"Sem dados de execu\xe7\xe3o"})]})})})]})]})]})}}}]);
//# sourceMappingURL=70.87c5b9d1.chunk.js.map