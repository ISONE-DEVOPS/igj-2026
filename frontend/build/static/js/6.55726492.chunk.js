(this["webpackJsonpigj-frontend"]=this["webpackJsonpigj-frontend"]||[]).push([[6,4],{822:function(e,a,t){"use strict";var s=t(0),o=t(814),i=t(404),n=t(403),l=t(812),c=t(7),r=t(32),d=t(26),j=t(1);a.a=e=>{let{generolist:a,estadocivillist:t,glbgeografialist:u,documentolist:p,contactolist:m,uploadpessoa:b,pessoaopenDO:O}=e;const{popUp_alertaOK:g}=Object(d.a)(),[h,f]=Object(s.useState)(!1),[x,v]=Object(s.useState)(""),[_,y]=Object(s.useState)(""),[N,D]=Object(s.useState)(""),[C,I]=Object(s.useState)(""),[S,A]=Object(s.useState)(""),[E,R]=Object(s.useState)(""),[T,P]=Object(s.useState)(""),[w,F]=Object(s.useState)(""),[q,k]=Object(s.useState)(""),[L,M]=Object(s.useState)(""),[G,U]=Object(s.useState)(""),[z,B]=Object(s.useState)(""),[H,V]=Object(s.useState)(""),[X,J]=Object(s.useState)(""),[Z,K]=Object(s.useState)(""),[Q,W]=Object(s.useState)(!1),[Y,$]=Object(s.useState)(!1),[ee,ae]=Object(s.useState)(""),[te,se]=Object(s.useState)(""),[oe,ie]=Object(s.useState)("");Object(s.useEffect)(()=>{y(""),D(""),I(""),A(""),R(""),P(""),F(""),k(""),M(""),U(""),B(""),V(""),J(""),K(""),ae(""),se(""),ie(""),f(!0),le("geral"),je([{id:""+Math.random(),tipocontacto:"",contacto:""}]),be([{id:""+Math.random(),tipodocumento:"",numero:"",dataemissao:"",datavalidade:"",anexo:{type:0,file:null}}]),f(O.value)},[O]);const[ne,le]=Object(s.useState)("geral"),ce="nav-link text-reset",re="nav-link text-reset active";var[de,je]=Object(s.useState)([{id:""+Math.random(),tipocontacto:"",contacto:""}]);const[ue,pe]=Object(s.useState)(!1);var[me,be]=Object(s.useState)([{id:""+Math.random(),tipodocumento:"",numero:"",dataemissao:"",datavalidade:"",anexo:{type:0,file:null}}]);const[Oe,ge]=Object(s.useState)(!1);async function he(e){var a={status:!1,file:null};try{const t=new FormData;t.append("file",e);const s={headers:{"content-type":"multipart/form-data"}},o=await r.a.post("/upload",t,s);a={status:!0,file:o},console.log(o)}catch(t){console.error(t.response),a={status:!1,file:null}}return a}return Object(j.jsxs)(o.a,{size:"lg",show:h,onHide:()=>f(!1),children:[Object(j.jsx)(o.a.Header,{style:{border:"0"},closeButton:!0,children:Object(j.jsx)(o.a.Title,{as:"h5",children:"Criar Pessoal"})}),Object(j.jsxs)("ul",{className:"nav nav-tabs profile-tabs nav-fill",id:"myTab",role:"tablist",children:[Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsxs)(c.b,{to:"#",className:"geral"===ne?re:ce,onClick:()=>{le("geral")},id:"profile-tab",children:[Object(j.jsx)("i",{className:"feather icon-user mr-2"}),"Perfil"]})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsxs)(c.b,{to:"#",className:"contactos"===ne?re:ce,onClick:()=>{le("contactos")},id:"contact-tab",children:[Object(j.jsx)("i",{className:"feather icon-phone mr-2"}),"Contactos"]})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsxs)(c.b,{to:"#",className:"documentos"===ne?re:ce,onClick:()=>{le("documentos")},id:"contact-tab",children:[Object(j.jsx)("i",{className:"feather icon-file-text mr-2"}),"Documentos"]})})]}),Object(j.jsxs)(o.a.Body,{style:"documentos"===ne?{}:{display:"none"},children:[Object(j.jsx)(i.a,{style:{display:"flex",justifyContent:"flex-end"},sm:12,children:Object(j.jsx)(n.a,{onClick:()=>{be(me.concat([{id:""+Math.random(),tipodocumento:"",numero:"",dataemissao:"",datavalidade:"",anexo:{type:0,file:null}}]))},variant:"primary",children:"+"})}),me.map(e=>{var a;return Object(j.jsxs)(l.a,{style:{marginBottom:"12px"},children:[Object(j.jsx)(i.a,{sm:10,children:Object(j.jsxs)(l.a,{children:[Object(j.jsx)(i.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"Phone",children:["Tipo de Documentos ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{onChange:a=>{!function(e,a){"cni"===p.find(a=>a.ID===e).DESIG.toLowerCase()?$(!0):$(!1);const t=me.findIndex(e=>e.id===a);me[t]={id:a,tipodocumento:e,numero:me[t].numero,dataemissao:me[t].dataemissao,datavalidade:me[t].datavalidade,anexo:me[t].anexo},ge(!0),be(me.concat([]))}(a.target.value,e.id)},className:"form-control",id:"perfil",required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),p.map(e=>Object(j.jsx)("option",{value:e.ID,children:e.DESIG},e.ID))]})]})}),Object(j.jsx)(i.a,{sm:3,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["N\xfamero ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsx)("input",{onChange:a=>{!function(e,a){const t=me.findIndex(e=>e.id===a);me[t]={id:a,numero:e,tipodocumento:me[t].tipodocumento,dataemissao:me[t].dataemissao,datavalidade:me[t].datavalidade,anexo:me[t].anexo},ge(!0),be(me.concat([]))}(a.target.value,e.id)},type:"text",className:"form-control"})]})}),Object(j.jsxs)("div",{className:"sm-2 paddinhtop28OnlyPC",children:[Object(j.jsxs)("label",{htmlFor:"anexarcriar"+e.id,className:"btn",style:{backgroundColor:"#d2b32a",color:"#fff"},children:[null==(null===e||void 0===e||null===(a=e.anexo)||void 0===a?void 0:a.file)?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("i",{className:"feather icon-download"}),Object(j.jsx)(j.Fragment,{children:" Anexar"})]}):"Anexado"," "]}),Object(j.jsx)("input",{id:"anexarcriar"+e.id,onChange:a=>function(e,a){const t=me.findIndex(e=>e.id===a);console.log(me[t]),console.log(a),""!=me[t].tipodocumento&&""!=me[t].numero||g("Preencha o campos obrigat\xf3rios"),me[t]={id:a,tipodocumento:me[t].tipodocumento,dataemissao:me[t].dataemissao,datavalidade:me[t].datavalidade,numero:me[t].numero,anexo:{type:2,file:e}},ge(!0),be(me.concat([]))}(a.target.files[0],e.id),accept:"image/x-png,image/jpeg",style:{display:"none"},type:"file"})]}),Y?null:Object(j.jsx)(i.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsx)("label",{className:"floating-label",htmlFor:"date",children:"Data de Emiss\xe3o"}),Object(j.jsx)("input",{onChange:a=>{!function(e,a){const t=me.findIndex(e=>e.id===a);me[t]={id:a,dataemissao:e,numero:me[t].numero,tipodocumento:me[t].tipodocumento,datavalidade:me[t].datavalidade,anexo:me[t].anexo},ge(!0),be(me.concat([]))}(a.target.value,e.id)},type:"date",className:"form-control"})]})}),Object(j.jsx)(i.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsx)("label",{className:"floating-label",htmlFor:"text",children:"Data de Validade"}),Object(j.jsx)("input",{onChange:a=>{!function(e,a){const t=me.findIndex(e=>e.id===a);me[t]={id:a,datavalidade:e,numero:me[t].numero,tipodocumento:me[t].tipodocumento,dataemissao:me[t].dataemissao,anexo:me[t].anexo},ge(!0),be(me.concat([]))}(a.target.value,e.id)},type:"date",className:"form-control"})]})})]})}),me.length>1?Object(j.jsx)("div",{className:"paddinhtop66OnlyPC sm-2",children:Object(j.jsx)(n.a,{onClick:()=>function(e){if(me.length>1){const t=me.findIndex(a=>a.id===e);if(t>-1){var a=me;a.splice(t,1),be(a.concat([])),ge(!0)}}}(e.id),variant:"danger",children:Object(j.jsx)("i",{className:"feather icon-trash-2"})})}):null]},e.id)})]}),Object(j.jsxs)(o.a.Body,{style:"contactos"===ne?{}:{display:"none"},children:[Object(j.jsx)(i.a,{style:{display:"flex",justifyContent:"flex-end"},sm:12,children:Object(j.jsx)(n.a,{onClick:()=>{je(de.concat([{id:""+Math.random(),tipocontacto:"",contacto:""}]))},variant:"primary",children:"+"})}),de.map(e=>Object(j.jsxs)(l.a,{style:{marginBottom:"12px"},children:[Object(j.jsx)(i.a,{sm:5,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"Phone",children:["Tipo de Contacto ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{onChange:a=>{!function(e,a){const t=de.findIndex(e=>e.id===a);de[t]={id:a,tipocontacto:e,contacto:de[t].contacto},pe(!0),je(de.concat([]))}(a.target.value,e.id)},className:"form-control",id:"perfil",required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),m.map(e=>Object(j.jsx)("option",{value:e.ID,children:e.DESIG},e.ID))]})]})}),Object(j.jsx)(i.a,{sm:5,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["Contacto ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsx)("input",{maxLength:"128",onChange:a=>{!function(e,a){const t=de.findIndex(e=>e.id===a);de[t]={id:a,contacto:e,tipocontacto:de[t].tipocontacto},pe(!0),je(de.concat([]))}(a.target.value,e.id)},type:"text",className:"form-control"})]})}),de.length>1?Object(j.jsx)("div",{className:"sm-2 paddinhtop28OnlyPC",children:Object(j.jsx)(n.a,{onClick:()=>function(e){if(de.length>1){const t=de.findIndex(a=>a.id===e);if(t>-1){var a=de;a.splice(t,1),je(a.concat([])),pe(!0)}}}(e.id),variant:"danger",children:Object(j.jsx)("i",{className:"feather icon-trash-2"})})}):null]},e.id))]}),Object(j.jsx)(o.a.Body,{style:"geral"===ne?{}:{display:"none"},children:Object(j.jsx)("form",{id:"criarpessoa",onSubmit:async function(e){e.preventDefault(),console.log(N);const a={NACIONALIDADE_ID:N,LOCALIDADE_ID:C,PR_ESTADO_CIVIL_ID:S,PR_GENERO_ID:E,NOME:T,DT_NASC:w,ALCUNHA:q,NOME_PAI:L,NOME_MAE:G,OBS:z,ENDERECO:H,ENDERECO_COORD:X,NIF:Q?"":Z};console.log(a);try{const e=await r.a.post("/sgigjpessoa",a);if("200"==e.status){for(let a=0;a<de.length;a++)if(""!=de[a].tipocontacto&&""!=de[a].contacto){console.log(de);const t={PESSOA_ID:e.data.ID,PR_CONTACTO_TP_ID:de[a].tipocontacto,CONTACTO:de[a].contacto};try{await r.a.post("/sgigjrelcontacto",t)}catch(s){console.error(s.response)}}for(let a=0;a<me.length;a++)if(""!=me[a].tipodocumento&&""!=me[a].numero){console.log(me);var t="";if("2"==me[a].anexo.type){t=(await he(me[a].anexo.file)).file.data}console.log(t);const o={PESSOA_ID:e.data.ID,PR_DOCUMENTO_TP_ID:me[a].tipodocumento,NUMERO:me[a].numero,DOC_URL:t,DT_EMISSAO:me[a].dataemissao,DT_VALIDADE:me[a].datavalidade};try{await r.a.post("/sgigjreldocumento",o)}catch(s){console.error(s.response)}}b(),f(!1)}}catch(s){try{console.error(s),console.error(s.response),"3058"==s.response.data.code&&g("Esse NIF j\xe1 existe")}catch(o){console.error(o)}}},children:Object(j.jsxs)(l.a,{children:[Object(j.jsx)(i.a,{sm:3,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["C\xf3digo ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsx)("input",{disabled:!0,value:"0003",type:"text",className:"form-control",id:"Name"})]})}),Object(j.jsx)(i.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"Email",children:["Nome ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsx)("input",{maxLength:"256",type:"text",onChange:e=>{P(e.target.value)},className:"form-control",id:"Nome ",placeholder:"Nome",required:!0})]})}),Object(j.jsx)(i.a,{sm:3,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsx)("label",{className:"floating-label",htmlFor:"text",children:"Alcunha"}),Object(j.jsx)("input",{type:"text",maxLength:"75",onChange:e=>{k(e.target.value)},className:"form-control",id:"alcunga",placeholder:"Alcunha..."})]})}),Object(j.jsx)(i.a,{sm:4,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"Phone",children:["G\xeanero ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{className:"form-control",onChange:e=>{R(e.target.value)},id:"perfil",required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),a.map(e=>Object(j.jsx)("option",{value:e.ID,children:e.DESIG},e.ID))]})]})}),Object(j.jsx)(i.a,{sm:4,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"Phone",children:["Estado civil ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{className:"form-control",onChange:e=>{A(e.target.value)},id:"perfil",required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),t.map(e=>Object(j.jsx)("option",{value:e.ID,children:e.DESIG},e.ID))]})]})}),Object(j.jsx)(i.a,{sm:4,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"date",children:["Data Nascimento ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsx)("input",{type:"date",onChange:e=>{F(e.target.value)},className:"form-control",id:"data",required:!0})]})}),Object(j.jsx)(i.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsx)("label",{className:"floating-label",htmlFor:"text",children:"Nome Pai"}),Object(j.jsx)("input",{type:"text",maxLength:"128",onChange:e=>{M(e.target.value)},className:"form-control",id:"pai",placeholder:"Nome Pai..."})]})}),Object(j.jsx)(i.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsx)("label",{className:"floating-label",htmlFor:"text",children:"Nome M\xe3e"}),Object(j.jsx)("input",{type:"text",maxLength:"128",onChange:e=>{U(e.target.value)},className:"form-control",id:"mae",placeholder:"Nome Mae..."})]})}),Object(j.jsx)(i.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["Nacionalidade ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{onChange:e=>{D(e.target.value)},className:"form-control",id:"perfil",required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),u.map(e=>"-1"==e.NIVEL_DETALHE?Object(j.jsx)("option",{value:e.ID,children:e.NACIONALIDADE},e.ID):null)]})]})}),Object(j.jsx)(i.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsx)("label",{className:"floating-label",htmlFor:"text",children:"Coordenadas"}),Object(j.jsx)("input",{type:"text",maxLength:"50",onChange:e=>{J(e.target.value)},className:"form-control",id:"coordenada",placeholder:"Endereco Coord..."})]})}),Object(j.jsx)("div",{className:"col-sm-6",children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsx)("label",{className:"floating-label",htmlFor:"Address",children:"Endere\xe7o"}),Object(j.jsx)("textarea",{className:"form-control",maxLength:"64000",onChange:e=>{V(e.target.value)},id:"endereco",rows:"3",placeholder:"Endere\xe7o..."})]})}),Object(j.jsx)(i.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["NIF ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Q?Object(j.jsx)("input",{readOnly:"readOnly",type:"text",maxLength:"9",onChange:e=>{K(e.target.value)},className:"form-control",id:"nif",placeholder:"NIF..."}):Object(j.jsx)("input",{type:"text",maxLength:"9",required:!0,onChange:e=>{K(e.target.value)},className:"form-control",id:"nif",placeholder:"NIF..."}),Object(j.jsxs)("div",{className:" fill mt-2 input-box",children:[Object(j.jsx)("input",{type:"checkbox",name:"",id:"",onChange:e=>W(e.target.checked)}),Object(j.jsx)("label",{className:"floating-label ml-3",htmlFor:"Name",children:"Sem NIF "})]})]})}),Object(j.jsx)(i.a,{sm:3,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["Ilha ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{className:"form-control",id:"perfil",onChange:e=>{var a;a=e.target.value,ae(a),se(""),ie(""),I("")},required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),u.map(e=>"2"==e.NIVEL_DETALHE?Object(j.jsx)("option",{value:e.ID,children:e.ILHA},e.ID):null)]})]})}),Object(j.jsx)(i.a,{sm:3,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["Concelho ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{className:"form-control",id:"perfil",onChange:e=>{var a;a=e.target.value,se(a),ie(""),I("")},required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),u.map(e=>"3"==e.NIVEL_DETALHE&&e.GLB_GEOG_ID==ee?Object(j.jsx)("option",{value:e.ID,children:e.CONCELHO},e.ID):null)]})]})}),Object(j.jsx)(i.a,{sm:3,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["Fregu\xeasia ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{className:"form-control",id:"perfil",onChange:e=>{var a;a=e.target.value,ie(a),I("")},required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),u.map(e=>"4"==e.NIVEL_DETALHE&&e.GLB_GEOG_ID==te?Object(j.jsx)("option",{value:e.ID,children:e.FREGUESIA},e.ID):null)]})]})}),Object(j.jsx)(i.a,{sm:3,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["Localidade",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{onChange:e=>{I(e.target.value)},className:"form-control",id:"perfil",required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),u.map(e=>"5"==e.NIVEL_DETALHE&&e.GLB_GEOG_ID==oe?Object(j.jsx)("option",{value:e.ID,children:e.NOME},e.ID):null)]})]})}),Object(j.jsx)("div",{className:"col-sm-12",children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsx)("label",{className:"floating-label",htmlFor:"Address",children:"Obs"}),Object(j.jsx)("textarea",{className:"form-control",maxLength:"64000",onChange:e=>{B(e.target.value)},id:"Address",rows:"3",placeholder:"Obs..."})]})})]})})}),Object(j.jsxs)(o.a.Footer,{children:[Object(j.jsx)(n.a,{variant:"danger",onClick:()=>f(!1),children:"Fechar"}),Object(j.jsx)(n.a,{type:"submit",form:"criarpessoa",variant:"primary",children:"Guardar"})]})]})}},823:function(e,a,t){"use strict";var s=t(0),o=t(814),i=t(812),n=t(404),l=t(403),c=t(7),r=t(1);a.a=e=>{let{Open:a,setOpen:t,list:d}=e;const[j,u]=Object(s.useState)(""),[p,m]=Object(s.useState)("");return Object(s.useEffect)(()=>{console.log("ROberto",d),u("")},[d]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(o.a,{size:"lg",show:a,onHide:()=>t(!1),children:[Object(r.jsx)(o.a.Body,{children:Object(r.jsx)(i.a,{children:Object(r.jsxs)(n.a,{xl:12,className:"task-detail-right",children:[Object(r.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"spaceAround"},children:Object(r.jsxs)("span",{style:{paddingBottom:"4px",cursor:"pointer",borderBottom:"2px solid #d2b32a",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(r.jsx)("i",{className:"feather icon-file-text m-r-5"}),"Anexos"]})}),Object(r.jsxs)("div",{style:{width:"100%",height:"500px"},children:[Object(r.jsx)("div",{style:{width:"100%",borderBottom:"1px solid #d2b32a",paddingTop:"20px",paddingBottom:"20px",marginBottom:"20px",overflow:"auto",height:"70px"},children:"undefined"!=typeof d?d.map(e=>{var a;return Object(r.jsx)(c.b,{onClick:()=>{var a,t,s,o;"PDF"==(null===(a=e.DOC_URL)||void 0===a?void 0:a.substring((null===(t=e.DOC_URL)||void 0===t?void 0:t.lastIndexOf("."))+1))||"pdf"==(null===(s=e.DOC_URL)||void 0===s?void 0:s.substring((null===(o=e.DOC_URL)||void 0===o?void 0:o.lastIndexOf("."))+1))?m(e.DOC_URL):u(e.DOC_URL)},style:{margin:"2px"},to:"#",className:"mb-1 text-muted d-flex align-items-end text-h-primary",children:"::"+(null===e||void 0===e||null===(a=e.sgigjprdocumentotp)||void 0===a?void 0:a.DESIG)},e.ID)}):null}),Object(r.jsx)("div",{style:{width:"100%",display:j?"flex":"none",justifyContent:"center",marginBottom:"10px"},children:Object(r.jsxs)("span",{children:[Object(r.jsx)("i",{className:"feather icon-eye m-r-5"}),"Pr\xe9-vizualiza\xe7\xe3o"]})}),Object(r.jsx)("a",{style:{display:j?"block":"none"},href:j+"?alt=media&token=0",target:"_blank",rel:"noopener noreferrer",children:Object(r.jsx)("div",{className:""==j?"previewdoc":"previewdoc-img",style:{backgroundImage:'url("'+j+'?alt=media&token=0")',height:"350px"}})})]})]})})}),Object(r.jsx)(o.a.Footer,{children:Object(r.jsx)(l.a,{variant:"danger",onClick:()=>t(!1),children:"Fechar"})})]}),Object(r.jsx)(o.a,{size:"xl",show:p,onHide:()=>{m(null),setTimeout(()=>t(!0),150)},children:Object(r.jsx)("iframe",{height:1e3,src:p+"?alt=media&token=0",title:"pdf-viewer",width:"100%s"})})]})}},825:function(e,a,t){"use strict";var s=t(0),o=t(404),i=t(403),n=t(812),l=t(818),c=t(32),r=t(26),d=t(1);a.a=e=>{let{documentolist:a,list:t,save:j,item:u,onSendData:p,hidden:m,required:b}=e;const{popUp_alertaOK:O}=Object(r.a)(),[g,h]=Object(s.useState)(!1);var[f,x]=Object(s.useState)([{id:""+Math.random(),tipodocumento:"",numero:"",dataemissao:"",datavalidade:"",anexo:{type:0,file:null}}]);async function v(e){var a={status:!1,file:null};try{const t=new FormData;t.append("file",e);const s={headers:{"content-type":"multipart/form-data"}},o=await c.a.post("/upload",t,s);a={status:!0,file:o},console.log(o)}catch(t){console.error(t),a={status:!1,file:null}}return a}Object(s.useEffect)(()=>{if(0==t.length)h(!0),x([{id:""+Math.random(),tipodocumento:"",numero:"",dataemissao:"",datavalidade:"",anexo:{type:0,file:null}}]);else{h(!1);let e=[];for(let a=0;a<t.length;a++){const s=null!=t[a].DT_EMISSAO?t[a].DT_EMISSAO.substring(0,10):"",o=null!=t[a].DT_VALIDADE?t[a].DT_VALIDADE.substring(0,10):"";e.push({id:""+t[a].ID,tipodocumento:t[a].PR_DOCUMENTO_TP_ID,numero:t[a].NUMERO,dataemissao:s,datavalidade:o,anexo:{type:1,file:t[a].DOC_URL}})}x(e.concat([])),p&&p(f)}console.log(t)},[t]),Object(s.useEffect)(()=>{console.log("ssssssssssssss"+j),""!=u.ID&&null!=u.ID&&async function(){if(1==g){const t=await c.a.delete("/sgigjreldocumento/0?"+(null===u||void 0===u?void 0:u.ENTIDADE)+"="+(null===u||void 0===u?void 0:u.ID));if(console.log(t.status),"200"==t.status||"204"==t.status){console.log(t);for(let t=0;t<f.length;t++)if(""!=f[t].tipodocumento&&(!m&&""!=f[t].numero||m)){console.log(f);var e="";"1"==f[t].anexo.type&&(e=f[t].anexo.file),"2"==f[t].anexo.type&&(e=(await v(f[t].anexo.file)).file.data),console.log(e);const s={[null===u||void 0===u?void 0:u.ENTIDADE]:null===u||void 0===u?void 0:u.ID,PR_DOCUMENTO_TP_ID:f[t].tipodocumento,NUMERO:m?1:f[t].numero,DOC_URL:e,DT_EMISSAO:f[t].dataemissao,DT_VALIDADE:f[t].datavalidade};try{await c.a.post("/sgigjreldocumento",s)}catch(a){console.error(a.response)}}}}}()},[j]);const[_,y]=Object(s.useState)(0);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(o.a,{style:{display:"flex",justifyContent:"flex-end"},sm:12,children:Object(d.jsx)(i.a,{onClick:()=>(x(f.concat([{id:""+Math.random(),tipodocumento:"",numero:"",dataemissao:"",datavalidade:"",anexo:{type:0,file:null}}])),void(p&&p(f))),variant:"primary",children:"+"})}),f.map((e,t)=>{var s;if(t==_)return Object(d.jsxs)(n.a,{style:{marginBottom:"12px"},children:[Object(d.jsx)(o.a,{sm:10,children:Object(d.jsxs)(n.a,{children:[Object(d.jsx)(o.a,{sm:6,children:Object(d.jsxs)("div",{className:"form-group fill",children:[Object(d.jsxs)("label",{className:"floating-label",htmlFor:"Phone",children:["Tipo de Documentos"," ",b&&Object(d.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(d.jsxs)("select",{defaultValue:e.tipodocumento,onChange:a=>{!function(e,a){const t=f.findIndex(e=>e.id===a);f[t]={id:a,tipodocumento:e,numero:f[t].numero,dataemissao:f[t].dataemissao,datavalidade:f[t].datavalidade,anexo:f[t].anexo},h(!0),x(f.concat([])),p&&p(f)}(a.target.value,e.id)},className:"form-control",id:"perfil",required:b,"aria-required":"true",children:[Object(d.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),a.map(e=>Object(d.jsx)("option",{value:e.ID,children:e.DESIG},e.ID))]})]})}),!m&&Object(d.jsx)(o.a,{sm:3,children:Object(d.jsxs)("div",{className:"form-group fill",children:[Object(d.jsx)("label",{className:"floating-label",htmlFor:"text",children:"N\xfamero   "}),Object(d.jsx)("input",{defaultValue:e.numero,onChange:a=>{!function(e,a){const t=f.findIndex(e=>e.id===a);f[t]={id:a,numero:e,tipodocumento:f[t].tipodocumento,dataemissao:f[t].dataemissao,datavalidade:f[t].datavalidade,anexo:f[t].anexo},h(!0),x(f.concat([])),p&&p(f)}(a.target.value,e.id)},type:"text",className:"form-control"})]})}),Object(d.jsxs)("div",{className:"sm-2 paddinhtop28OnlyPC",children:[Object(d.jsxs)("label",{htmlFor:"anexareditar"+e.id,className:"btn",style:{backgroundColor:"#d2b32a",color:"#fff"},children:[null==(null===e||void 0===e||null===(s=e.anexo)||void 0===s?void 0:s.file)?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("i",{className:"feather icon-download"}),Object(d.jsx)(d.Fragment,{children:" Anexar"})]}):"Anexado"," "]}),Object(d.jsx)("input",{id:"anexareditar"+e.id,style:{display:"none"},onChange:a=>function(e,a,t){const s=f.findIndex(e=>e.id===a);if(console.log(f[s]),console.log(a),""==f[s].tipodocumento)return O("Preencha o campos obrigat\xf3rios"),void(t.target.value="");f[s]={id:a,tipodocumento:f[s].tipodocumento,dataemissao:f[s].dataemissao,datavalidade:f[s].datavalidade,numero:f[s].numero,anexo:{type:2,file:e}},h(!0),x(f.concat([])),p&&p(f)}(a.target.files[0],e.id,a),accept:m?void 0:"image/x-png,image/jpeg,.mp4",type:"file"})]}),!m&&Object(d.jsx)(o.a,{sm:6,children:Object(d.jsxs)("div",{className:"form-group fill",children:[Object(d.jsx)("label",{className:"floating-label",htmlFor:"date",children:"Data de Emiss\xe3o"}),Object(d.jsx)("input",{defaultValue:e.dataemissao,onChange:a=>{!function(e,a){const t=f.findIndex(e=>e.id===a);f[t]={id:a,dataemissao:e,numero:f[t].numero,tipodocumento:f[t].tipodocumento,datavalidade:f[t].datavalidade,anexo:f[t].anexo},h(!0),x(f.concat([])),p&&p(f)}(a.target.value,e.id)},type:"date",className:"form-control"})]})}),!m&&Object(d.jsx)(o.a,{sm:6,children:Object(d.jsxs)("div",{className:"form-group fill",children:[Object(d.jsx)("label",{className:"floating-label",htmlFor:"text",children:"Data de Validade"}),Object(d.jsx)("input",{defaultValue:e.datavalidade,onChange:a=>{!function(e,a){const t=f.findIndex(e=>e.id===a);f[t]={id:a,datavalidade:e,numero:f[t].numero,tipodocumento:f[t].tipodocumento,dataemissao:f[t].dataemissao,anexo:f[t].anexo},h(!0),x(f.concat([])),p&&p(f)}(a.target.value,e.id)},type:"date",className:"form-control"})]})})]})}),f.length>1?Object(d.jsx)("div",{className:"paddinhtop66OnlyPC sm-2",children:Object(d.jsx)(i.a,{onClick:()=>function(e){if(f.length>1){const t=f.findIndex(a=>a.id===e);if(t>-1){var a=f;a.splice(t,1),x(a.concat([])),p&&p(f),h(!0)}}}(e.id),variant:"danger",children:Object(d.jsx)("i",{className:"feather icon-trash-2"})})}):null]},e.id)}),Object(d.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(d.jsxs)(l.a,{className:"justify-content-end",children:[Object(d.jsx)(l.a.First,{onClick:()=>y(0)}),Object(d.jsx)(l.a.Prev,{onClick:()=>y(_>0?_-1:0)}),Object(d.jsx)("span",{style:{display:"flex",padding:"8px 20px",alignItems:"center",justifyContent:"center"},children:_+1}),Object(d.jsx)(l.a.Next,{onClick:()=>y(_>=f.length-1?f.length-1:_+1)}),Object(d.jsx)(l.a.Last,{onClick:()=>y(f.length-1)})]})})]})}},859:function(e,a,t){},883:function(e,a,t){"use strict";t.r(a);var s=t(8),o=t(0),i=t.n(o),n=t(812),l=t(404),c=t(403),r=t(839),d=t(814),j=t(807),u=t(240),p=t.n(u),m=t(7),b=t(816),O=t(1);const g=e=>{let{filter:a,setFilter:t}=e;const[s,i]=Object(o.useState)(a),n=Object(b.useAsyncDebounce)(e=>{t(e||void 0)},1e3);return Object(O.jsxs)("span",{className:"d-flex align-items-center justify-content-end",children:["Procurar:"," ",Object(O.jsx)("input",{className:"form-control ml-2 w-auto",value:s||"",onChange:e=>{i(e.target.value),n(e.target.value)}})]})};var h=t(818),f=t(817),x=t(32),v=t(26),_=t(22),y=t(76),N=t(822);var D=e=>{let{uploadlist:a,voltar:t,InterrompidoTipo:i,setInterrompidoTipo:r,INSTRUCAO_ID:u}=e;const[p,m]=Object(o.useState)(!1),[b,g]=Object(o.useState)(""),{popUp_alertaOK:h}=Object(v.a)(),[f,_]=Object(o.useState)([]),[y,N]=Object(o.useState)(-1),[D,C]=Object(o.useState)([{id:Date.now(),tipodocumento:"",numero:"",dataemissao:"",datavalidade:"",anexo:{type:0,file:null},main:""}]),[I,S]=Object(o.useState)(!1),[A,E]=Object(o.useState)(!1);Object(o.useEffect)(()=>{m(""!==i),async function(){try{const e=await x.a.get("/sgigjprdocumentotp");"200"==e.status&&_(e.data)}catch(e){console.error(e.response)}}()},[i]);const R=(e,a,t)=>{C(o=>o.map(o=>o.id===e?Object(s.a)(Object(s.a)({},o),{},{[a]:t}):o)),S(!0)};async function T(e){var a={status:!1,file:null};try{const t=new FormData;t.append("file",e);const s={headers:{"content-type":"multipart/form-data"}};a={status:!0,file:await x.a.post("/upload",t,s)}}catch(t){console.error(t.response),a={status:!1,file:null}}return a}return Object(O.jsxs)(d.a,{size:"lg",show:p,onHide:()=>m(!1),children:[Object(O.jsx)(d.a.Header,{closeButton:!0,children:Object(O.jsx)(d.a.Title,{as:"h5",children:"A"===i?"Arquivar":"Prescrever"})}),Object(O.jsx)(d.a.Body,{children:Object(O.jsxs)("form",{id:"GO",onSubmit:async e=>{e.preventDefault();let s=!1,o=[];try{for(let e=0;e<D.length;e++){if(console.log("pkoko",D[e]),!D[e].anexo||null==D[e].anexo.file)return void h("Por favor anexa documento");if(1!==f.find(a=>a.ID===D[e].tipodocumento).IDENTIFICACAO||""!=D[e].datavalidade&&""!=D[e].numero&&""!=D[e].dataemissao){if(""!=D[e].tipodocumento&&""!=D[e].numero){var n="";if("1"==D[e].anexo.type&&(n=D[e].anexo.file),"2"==D[e].anexo.type){n=(await T(D[e].anexo.file)).file.data}const a={PR_DOCUMENTO_TP_ID:D[e].tipodocumento,NUMERO:D[e].numero,DOC_URL:n,DT_EMISSAO:D[e].dataemissao,DT_VALIDADE:D[e].datavalidade,ESTADO:"1",MAIN:D[e].main};if(o.push(a),s){E(!1),h("Preenche os campos que representam um documento de identifica\xe7\xe3o");break}}}else s=!0}try{200===(await x.a.put("/sgigjrelprocessoinstrucao/".concat(u,"/interrompido"),{OBS:b,TIPO:i,documentos:o})).status&&(r(""),a(),t())}catch(l){console.error(l.response)}}catch(l){console.error(l.response)}},children:[Object(O.jsx)(n.a,{children:Object(O.jsx)(l.a,{sm:12,children:Object(O.jsxs)(j.a.Group,{children:[Object(O.jsxs)(j.a.Label,{children:["Justifica\xe7\xe3o ",Object(O.jsx)("span",{className:"text-danger",children:"*"})]}),Object(O.jsx)(j.a.Control,{as:"textarea",rows:3,style:{height:"250px"},required:!0,value:b,onChange:e=>g(e.target.value),placeholder:"Justifica\xe7\xe3o..."})]})})}),D.map((e,a)=>{const t=f.find(a=>a.ID===parseInt(e.tipodocumento,10)),s=1===(null===t||void 0===t?void 0:t.IDENTIFICACAO);return Object(O.jsxs)(n.a,{className:"mb-3",children:[Object(O.jsx)(l.a,{sm:12,children:Object(O.jsxs)(n.a,{children:[Object(O.jsx)(l.a,{sm:4,children:Object(O.jsxs)(j.a.Group,{children:[Object(O.jsxs)(j.a.Label,{children:["Tipo de Documento"," ",Object(O.jsx)("span",{className:"text-danger",children:"*"})]}),Object(O.jsxs)(j.a.Control,{as:"select",required:!0,onChange:a=>R(e.id,"tipodocumento",a.target.value),children:[Object(O.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),f.map(e=>Object(O.jsx)("option",{value:e.ID,children:e.DESIG},e.ID))]})]})}),Object(O.jsx)(l.a,{sm:4,children:Object(O.jsxs)(j.a.Group,{children:[Object(O.jsxs)(j.a.Label,{children:["N\xfamero ",Object(O.jsx)("span",{className:"text-danger",children:"*"})]}),Object(O.jsx)(j.a.Control,{required:!0,type:"text",onChange:a=>R(e.id,"numero",a.target.value)})]})}),Object(O.jsxs)(l.a,{sm:4,className:"d-flex",style:{alignItems:"center",paddingTop:"20px"},children:[Object(O.jsxs)(c.a,{style:{backgroundColor:"#d2b32a",color:"#fff"},as:"label",htmlFor:"anexar".concat(e.id),children:[" ",e.anexo.file?"Anexado":"Anexar"," "]}),Object(O.jsx)(j.a.Control,{type:"file",id:"anexar".concat(e.id),style:{display:"none"},accept:"image/png,image/jpeg",onChange:a=>((e,a)=>{const t=D.find(a=>a.id===e);t.tipodocumento&&t.numero?R(e,"anexo",{type:2,file:a}):h("Preencha os campos obrigat\xf3rios")})(e.id,a.target.files[0])}),Object(O.jsx)(j.a.Check,{style:{marginLeft:"10px",paddingTop:"-100px"},inline:!0,type:"radio",name:"documento",onChange:()=>N(a),label:"Usar este"})]}),Object(O.jsx)(l.a,{sm:6,children:Object(O.jsxs)(j.a.Group,{children:[Object(O.jsxs)(j.a.Label,{children:["Data de Emiss\xe3o"," ",s&&Object(O.jsx)("span",{className:"text-danger",children:"*"})]}),Object(O.jsx)(j.a.Control,{type:"date",required:s,onChange:a=>R(e.id,"dataemissao",a.target.value)})]})}),Object(O.jsx)(l.a,{sm:6,children:Object(O.jsxs)(j.a.Group,{children:[Object(O.jsxs)(j.a.Label,{children:["Data de Validade"," ",s&&Object(O.jsx)("span",{className:"text-danger",children:"*"})]}),Object(O.jsx)(j.a.Control,{type:"date",required:s,onChange:a=>R(e.id,"datavalidade",a.target.value)})]})})]})}),D.length>1&&Object(O.jsx)(l.a,{sm:2,className:"d-flex align-items-center",children:Object(O.jsx)(c.a,{variant:"danger",onClick:()=>{return a=e.id,void(D.length>1&&C(D.filter(e=>e.id!==a)));var a},children:Object(O.jsx)("i",{className:"feather icon-trash-2"})})})]},e.id)}),Object(O.jsx)(c.a,{variant:"secondary",onClick:()=>{C([...D,{id:Date.now(),tipodocumento:"",numero:"",dataemissao:"",datavalidade:"",anexo:{type:0,file:null},main:""}])},children:"Adicionar Documento"})]})}),Object(O.jsxs)(d.a.Footer,{children:[Object(O.jsx)(c.a,{type:"submit",form:"GO",variant:"primary",children:"A"===i?"Arquivar":"Prescrever"}),Object(O.jsx)(c.a,{variant:"danger",onClick:()=>m(!1),children:"Fechar"})]})]})},C=t(820),I=t.n(C);(new Date).toISOString().slice(0,10);var S=e=>{let{data:a}=e;const t=i.a.useMemo(()=>[{Header:"Pe\xe7as Processual",accessor:"PECAS"},{Header:"Data",accessor:"DATA2"},{Header:"Anexos",accessor:"ANEXOS"},{Header:"A\xe7\xf5es",accessor:"action"}],[]),{getTableProps:o,getTableBodyProps:n,headerGroups:l,prepareRow:c,page:r,setPageSize:d,state:{pageIndex:j,pageSize:u}}=Object(b.useTable)({columns:t,data:a,initialState:{pageIndex:0,pageSize:Number.MAX_VALUE}},b.useGlobalFilter,b.useSortBy,b.usePagination);return Object(O.jsxs)(f.a,Object(s.a)(Object(s.a)({striped:!0,bordered:!0,hover:!0,responsive:!0},o()),{},{children:[Object(O.jsx)("thead",{children:l.map(e=>Object(O.jsx)("tr",Object(s.a)(Object(s.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map(e=>Object(O.jsxs)("th",Object(s.a)(Object(s.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),Object(O.jsx)("span",{children:e.isSorted?e.isSortedDesc?Object(O.jsx)("span",{className:"feather icon-arrow-down text-muted float-right"}):Object(O.jsx)("span",{className:"feather icon-arrow-up text-muted float-right"}):""})]})))})))}),Object(O.jsx)("tbody",Object(s.a)(Object(s.a)({},n()),{},{children:r.map((e,a)=>(c(e),Object(O.jsx)("tr",Object(s.a)(Object(s.a)({},e.getRowProps()),{},{children:e.cells.map(e=>Object(O.jsx)("td",Object(s.a)(Object(s.a)({},e.getCellProps()),{},{children:e.render("Cell")})))}))))}))]}))},A=t(823),E=t(821),R=t(825);function T(e){let{k:a,value:t,set:s}=e;const[i,n]=Object(o.useState)([]);return Object(o.useEffect)(()=>{!async function(){try{const e=await x.a.get("/sgigjprdecisaotp");"200"==e.status&&n(e.data)}catch(e){console.error(e.response)}}()}),Object(O.jsx)(l.a,{sm:12,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Decis\xe3o ",Object(O.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(O.jsxs)("select",{value:t,className:"form-control",onChange:e=>{s(a,e.target.value)},id:"perfil",required:!0,"aria-required":"true",children:[Object(O.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),i.map(e=>Object(O.jsx)("option",{value:e.ID,children:e.DESIG},e.ID))]})]})})}function P(e){let{k:a,value:t,set:i}=e;const[n,c]=Object(o.useState)([]);return Object(o.useEffect)(()=>{!async function(){try{const e=await x.a.get("/sgigjinfracaocoima");"200"==e.status&&c(e.data)}catch(e){console.error(e.response)}}()},[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(l.a,{sm:8,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsx)("label",{className:"floating-label",htmlFor:"Name",children:"Infra\xe7\xe3o"}),Object(O.jsxs)("select",{id:"perfil",value:null===t||void 0===t?void 0:t.INFRACAO,onChange:e=>{i(a,Object(s.a)(Object(s.a)({},t),{},{INFRACAO:e.target.value}))},className:"form-control",required:!0,"aria-required":"true",children:[Object(O.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),n.map(e=>{var a;return Object(O.jsx)("option",{value:e.ID,children:null===e||void 0===e||null===(a=e.sgigjprinfracaotp)||void 0===a?void 0:a.DESIG},e.ID)})]})]})}),Object(O.jsx)(l.a,{sm:4,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsx)("label",{className:"floating-label",htmlFor:"Name",children:"Coima "}),Object(O.jsx)("input",{maxLength:"128",type:"number",onChange:e=>{i(a,Object(s.a)(Object(s.a)({},t),{},{COIMA:e.target.value}))},defaultValue:null===t||void 0===t?void 0:t.COIMA,className:"form-control",placeholder:"Valor...",required:!0})]})})]})}function w(e){let{k:a,value:t,set:s,documentolist:i,selected_relinstrucaopeca:n,ID_C:c,documentosgeral_lista_save:r,required:d=!0}=e;const[j,u]=Object(o.useState)([]);return Object(o.useEffect)(()=>{u(null==n?[]:n.sgigjreldocumento)},[n]),Object(O.jsx)(l.a,{sm:12,children:Object(O.jsx)(R.a,{required:d,documentolist:i,list:j,save:r,item:null==n?{ID:c,ENTIDADE:"REL_INSTRUTOR_PECAS_ID"}:{ID:n.ID,ENTIDADE:"REL_INSTRUTOR_PECAS_ID"},hidden:!0})})}function F(e){let{k:a,value:t,set:s,obsRef:o}=e;return Object(O.jsx)(l.a,{sm:12,children:Object(O.jsx)("div",{className:"form-group fill",children:Object(O.jsx)(I.a,{value:t,config:{readonly:!1},ref:o})})})}function q(e){let{k:a,value:t,set:s,selected_relinstrucaopeca:i,pessoalist:n,documentolist:r}=e;const[d,j]=Object(o.useState)([]),[u,p]=Object(o.useState)([]),[m,b]=Object(o.useState)([]),[g,h]=Object(o.useState)([]),[f,v]=Object(o.useState)({code:0,value:!1}),[_,y]=Object(o.useState)([]);return Object(o.useEffect)(()=>{y(n),console.log(i),async function(){try{const e=await x.a.get("/sgigjprgenero");"200"==e.status&&j(e.data)}catch(e){console.error(e.response)}}(),async function(){try{const e=await x.a.get("/sgigjprestadocivil");"200"==e.status&&p(e.data)}catch(e){console.error(e.response)}}(),async function(){try{const e=await x.a.get("/glbgeografia");"200"==e.status&&b(e.data)}catch(e){console.error(e.response)}}(),async function(){try{const e=await x.a.get("/sgigjprcontactotp");"200"==e.status&&h(e.data)}catch(e){console.error(e.response)}}()},[]),Object(O.jsxs)(l.a,{sm:12,children:[Object(O.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["Pessoa ",Object(O.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(O.jsxs)("div",{style:{display:"flex"},children:[Object(O.jsx)("div",{className:"form-group fill",style:{width:"100%"},children:Object(O.jsx)(E.a,{className:"basic-single",classNamePrefix:"select",onChange:e=>s(a,e.value),name:"pessoa",options:_,value:_.map(e=>e.ID==t?e:null),required:!0,menuPlacement:"auto",menuPosition:"fixed",placeholder:"Pessoa..."})}),Object(O.jsx)(c.a,{onClick:()=>v({code:f.code+1,value:!0}),style:{marginLeft:"8px",height:"38px"},variant:"primary",children:Object(O.jsx)("i",{className:"feather icon-plus"})})]}),Object(O.jsx)(N.a,{generolist:d,estadocivillist:u,glbgeografialist:m,documentolist:r,contactolist:g,pessoaopenDO:f,uploadpessoa:async function(){try{const a=await x.a.get("/sgigjpessoa");if("200"==a.status){for(var e=0;e<a.data.length;e++)a.data[e].value=a.data[e].ID,a.data[e].label=a.data[e].NOME;y(a.data)}}catch(a){console.error(a.response)}}})]})}function k(e){var a;let{DATA:t,peca:i,selected_relinstrucaopeca:r,pessoalist:d,documentolist:j,setdocumentosgeral_lista:u,item:m,uploadinstrucaopecaslist:b,setselected_relinstrucaopeca:g}=e;const[h,f]=Object(o.useState)(!1),[_,y]=Object(o.useState)(""),[N,D]=Object(o.useState)({}),{popUp_alertaOK:C}=Object(v.a)(),I=Object(o.useRef)();function S(e,a){D(Object(s.a)(Object(s.a)({},N),{},{[e]:a}))}function A(e){if(e)return"1"==e.FLAG_ANEXO_DOC?"ANEXO_DOC":"1"==e.FLAG_DECISAO?"DECISAO":"1"==e.FLAG_DESTINATARIO?"DESTINATARIO":"1"==e.FLAG_INFRACAO_COIMA?"INFRACAO_COIMA":"1"==e.FLAG_OBS?"OBS":"1"==e.FLAG_PERIODO_EXCLUSAO?"PERIODO_EXCLUSAO":"1"==e.FLAG_PESSOA?"PESSOA":"1"==e.FLAG_TEXTO?"TEXTO":void 0}Object(o.useEffect)(()=>{D({DESTINATARIO:(null===r||void 0===r?void 0:r.DESTINATARIO_ID)||"",PESSOA:(null===r||void 0===r?void 0:r.PESSOA_TESTEMUNHA_ID)||"",COIMA:(null===r||void 0===r?void 0:r.COIMA)||"",OBS:(null===r||void 0===r?void 0:r.OBS)||(null===i||void 0===i?void 0:i.OBS)||"",DECISAO:(null===r||void 0===r?void 0:r.PR_DECISAO_TP_ID)||"",INFRACAO_COIMA:null}),I.current&&(I.current.value=(null===r||void 0===r?void 0:r.OBS)||(null===i||void 0===i?void 0:i.OBS)||"")},[r,i]);const E=(null===i||void 0===i||null===(a=i.sgigjrelpecaprocessualcampo)||void 0===a?void 0:a.map(e=>({key:A(e.sigjprcampo),value:N[A(e.sigjprcampo)],ORDEM:e.ORDEM,required:1==e.FLAG_OBRIGATORIEDADE})).sort((e,a)=>e.ORDEM-a.ORDEM))||[];return Object(O.jsx)("form",{id:"itemGO",onSubmit:async function(e){if(e.preventDefault(),""==t)C("Escolha uma data");else try{var a,s,o;const e={REL_PROCESSO_INSTRUCAO_ID:null===m||void 0===m?void 0:m.sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao[0].ID,PR_PECAS_PROCESSUAIS_ID:i.ID,PESSOA_TESTEMUNHA_ID:N.PESSOA||null,DESTINATARIO_ID:N.DESTINATARIO||null,PR_DECISAO_TP_ID:N.DECISAO||null,INFRACAO_COIMA_ID:(null===(a=N.INFRACAO_COIMA)||void 0===a?void 0:a.INFRACAO)||null,COIMA:(null===(s=N.INFRACAO_COIMA)||void 0===s?void 0:s.COIMA)||null,DATA:t,OBS:(null===I||void 0===I||null===(o=I.current)||void 0===o?void 0:o.value)||""};if(console.log(e),null==r){const a=await x.a.post("/sgigjrelinstrutorpeca",e);if("200"==a.status){y(a.data.ID),f(!h);const e=await b();if(1==e.done)for(let t=0;t<e.list.length;t++){const s=e.list[t];s.ID==a.data.ID&&g(s)}}}else{"200"==(await x.a.put("/sgigjrelinstrutorpeca/"+r.ID,e)).status&&(p.a.success("Documento Guardado!",{duration:4e3}),f(!h),b())}}catch(n){console.error(n)}},children:i&&Object(O.jsxs)(n.a,{children:[E.map(e=>((e,a,t,s,o,i,n,l,c,r)=>{switch(e){case"PESSOA":case"DESTINATARIO":return Object(O.jsx)(q,{k:e,set:t,value:a,selected_relinstrucaopeca:s,pessoalist:o,documentolist:i});case"OBS":case"TEXTO":case"PERIODO_EXCLUSAO":return Object(O.jsx)(F,{k:e,set:t,value:a,obsRef:c});case"ANEXO_DOC":return Object(O.jsx)(w,{k:e,set:t,value:a,selected_relinstrucaopeca:s,pessoalist:o,documentolist:i,documentosgeral_lista_save:n,ID_C:l,required:r});case"INFRACAO_COIMA":return Object(O.jsx)(P,{k:e,set:t,value:a});case"DECISAO":return Object(O.jsx)(T,{k:e,set:t,value:a});default:return}})(e.key,e.value,S,r,d,j,h,_,I,e.required)),Object(O.jsxs)(l.a,{sm:12,style:{display:"flex",justifyContent:"flex-end",marginTop:"10px",gridGap:"15px"},children:[null!=r&&Object(O.jsxs)(O.Fragment,{children:[null!=r.URL_DOC&&Object(O.jsxs)("a",{href:(null===r||void 0===r?void 0:r.URL_DOC)+"?alt=media&token=0",target:"_blank",children:[Object(O.jsx)(c.a,{variant:"primary",children:"Abrir DOC Gerado"})," "]}),Object(O.jsx)(c.a,{onClick:()=>async function(){try{if("200"==(await x.a.put("/sgigjrelinstrutorpeca/"+(null===r||void 0===r?void 0:r.ID)+"/despacho",{})).status){const e=await b();if(1==e.done)for(let a=0;a<e.list.length;a++){const t=e.list[a];t.ID==(null===r||void 0===r?void 0:r.ID)&&g(t)}}}catch(e){console.error(e.response)}}(),variant:"primary",children:"Gerar DOC"})]}),Object(O.jsx)(c.a,{type:"submit",form:"itemGO",variant:"primary",children:"Guardar"})]})]})})}var L=e=>{var a,t,s;let{item:r,setinstrucaoitem:j,uploadlist:u,instrucaoitem:p,decisaolist:b}=e;const{popUp_removerItem:g,popUp_alertaOK:h}=Object(v.a)(),[f,_]=Object(o.useState)(""),[N,C]=Object(o.useState)([]),[I,E]=Object(o.useState)(""),[R,T]=Object(o.useState)({}),[P,w]=Object(o.useState)([]);const[F,q]=Object(o.useState)([]);const[L,M]=Object(o.useState)([]),[G,U]=Object(o.useState)(""),[z,B]=Object(o.useState)("");async function H(){let e={done:!1,list:[]};if(oe()){const l=r.sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao[0].ID;U(l),B(r.sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].ID);try{const n=await x.a.get("/sgigjrelinstrutorpeca?REL_PROCESSO_INSTRUCAO_ID="+l);if("200"==n.status){for(var a=0;a<n.data.length;a++){var t,s,o;const e=n.data[a].ID,l=n.data[a];n.data[a].id=n.data[a].ID,n.data[a].DATA2=Object(y.f)(n.data[a].DATA),n.data[a].PECAS=n.data[a].sgigjprpecasprocessual.DESIG,null==n.data[a].FLAG_NOTA_COMUNICACAO?n.data[a].QUEM="------------------":("1"==n.data[a].FLAG_NOTA_COMUNICACAO&&(n.data[a].QUEM="Visado"),"2"==n.data[a].FLAG_NOTA_COMUNICACAO&&(n.data[a].QUEM="Entidade Decisora"),"3"==n.data[a].FLAG_NOTA_COMUNICACAO&&(n.data[a].QUEM="Entidade Visada")),!l.sgigjreldocumento&&null!==(t=n.data[a])&&void 0!==t&&t.URL_DOC&&(l.sgigjreldocumento=[]),l.sgigjreldocumento.push({DOC_URL:null===(s=n.data[a])||void 0===s?void 0:s.URL_DOC,sgigjprdocumentotp:{DESIG:"Documento Gerado"}}),null===(o=n.data[a])||void 0===o||o.sgigjreldocumento.length,n.data[a].ANEXOS=Object(O.jsx)(i.a.Fragment,{children:Object(O.jsx)(m.b,{to:"#",onClick:()=>se(l),children:Object(O.jsx)("i",{className:"feather icon-file"})})}),n.data[a].action=Object(O.jsxs)(i.a.Fragment,{children:[Object(O.jsx)(m.b,{to:"#",onClick:()=>ce(l),className:"text-primary mx-1",children:Object(O.jsx)("i",{className:"text-primary feather icon-edit"})}),Object(O.jsx)(m.b,{to:"#",onClick:()=>je(e),className:"text-danger",children:Object(O.jsx)("i",{className:"feather icon-trash-2"})})]})}e={done:!0,list:n.data},M(n.data)}}catch(n){console.error(n.response)}}return e}const[V,X]=Object(o.useState)(""),[J,Z]=Object(o.useState)("*"),[K,Q]=Object(o.useState)(""),[W,Y]=Object(o.useState)(""),[$,ee]=Object(o.useState)(!1),[ae,te]=Object(o.useState)([]);function se(e){ee(!0),console.log("sgigjreldocumento",null===e||void 0===e?void 0:e.sgigjreldocumento),te(null===e||void 0===e?void 0:e.sgigjreldocumento)}function oe(){if(null!=r)return r.sgigjprocessodespacho.length>0&&(r.sgigjprocessodespacho[0].sgigjrelprocessoinstrutor.length>0&&r.sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao.length>0)}async function ie(){u(),j(null)}const[ne,le]=Object(o.useState)("");function ce(e){le(e)}function re(e){return I==e||function(e){if(L.findIndex(a=>a.PR_PECAS_PROCESSUAIS_ID===e)>=0&&"6b4729e2b01da73d490dc1b04671ea570d49"==e)return!1;if(L.findIndex(a=>a.PR_PECAS_PROCESSUAIS_ID===e)>=0&&"0a2557ff1b8e966ae041183b8bbcb4d2ce1d"==e)return!1;let a=0;if("4ce0c01543457df12a96bc3eac9492e81657"==e){for(let e=0;e<L.length;e++)null!=L[e].FLAG_NOTA_COMUNICACAO&&a++;if(a>=3)return!1}return!0}(e)}Object(o.useEffect)(()=>{null!=ne&&(E(ne.PR_PECAS_PROCESSUAIS_ID),X(ne.PESSOA_TESTEMUNHA_ID),Z(ne.REF),Q(Object(y.e)(ne.DATA)),Y(ne.OBS))},[ne]),Object(o.useEffect)(()=>{null!=I&&T(N.find(e=>e.ID==I))},[I]),Object(o.useEffect)(()=>{!async function(){try{const e=await x.a.get("/sgigjprpecasprocessual");"200"==e.status&&C(e.data)}catch(e){console.error(e.response)}}(),async function(){try{const a=await x.a.get("/sgigjpessoa");if("200"==a.status){for(var e=0;e<a.data.length;e++)a.data[e].value=a.data[e].ID,a.data[e].label=a.data[e].NOME;w(a.data)}}catch(a){console.error(a.response)}}(),async function(){try{const e=await x.a.get("/sgigjprdocumentotp");"200"==e.status&&q(e.data)}catch(e){console.error(e.response)}}(),H()},[]);const de=async e=>{let a=!0;try{await x.a.delete("/sgigjrelinstrutorpeca/"+e)}catch(t){a=!1,console.error(t.response),h("Falha. Tente mais tarde")}return H(),a},je=async e=>{g({delete:de,id:e})};const[ue,pe]=Object(o.useState)(),[me,be]=Object(o.useState)(!1);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(n.a,{className:"mb-3",children:Object(O.jsx)(l.a,{className:"d-flex align-items-center",style:{fontSize:"16px"},children:"Instru\xe7\xe3o do Processo"})}),oe()?Object(O.jsxs)(n.a,{children:[Object(O.jsx)(l.a,{sm:2,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Refer\xeancia ",Object(O.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(O.jsx)("input",{disabled:!0,type:"text",className:"form-control",id:"Name",value:J,required:!0})]})}),Object(O.jsx)(l.a,{sm:7,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Pe\xe7a Processual ",Object(O.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(O.jsxs)("select",{value:I,onChange:e=>{var a;a=e.target.value,le(null),E(a),X(""),Z("*"),Q(""),Y("")},className:"form-control",id:"pessoa",required:!0,"aria-required":"true",children:[Object(O.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),N.map(e=>re(e.ID)&&Object(O.jsx)("option",{title:e.CODIGO,value:e.ID,children:e.DESIG},e.ID))]})]})}),Object(O.jsx)(l.a,{sm:3,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Data ",Object(O.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(O.jsx)("input",{type:"date",onChange:e=>{Q(e.target.value)},value:K,className:"form-control",placeholder:"Data...",required:!0})]})})]}):Object(O.jsx)("div",{className:"form-group fill",style:{display:"flex",padding:"50px 0px",width:"100%",justifyContent:"center"},children:Object(O.jsx)(c.a,{variant:"primary",onClick:()=>async function(){const e={PROCESSO_DESPACHO_ID:r.sgigjprocessodespacho[0].ID};try{if("200"==(await x.a.post("/sgigjrelprocessoinstrucao",e)).status){const e=await x.a.get("/sgigjprocessoexclusao/"+r.id);"200"==e.status&&e.data.length>0&&(e.data[0].id=e.data[0].ID,j(e.data[0]))}}catch(a){console.error(a.response)}}(),children:"Iniciar Instru\xe7\xe3o"})}),Object(O.jsx)(k,{DATA:K,PESSOA_TESTEMUNHA_ID:V,setPESSOA_TESTEMUNHA_ID:X,OBS:W,setOBS:Y,item:r,uploadinstrucaopecaslist:H,PECAselected:I,selected_relinstrucaopeca:ne,setselected_relinstrucaopeca:le,pessoalist:P,documentolist:F,peca:R}),Object(O.jsx)("br",{}),oe()&&Object(O.jsx)(S,{data:L}),Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"10px",gridGap:"10px"},children:[oe()&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(c.a,{onClick:()=>async function(e){try{console.log("GO_ER");const t=await x.a.get("/juntada/"+e);if("200"==t.status){const e=t.data.buffer.data,s=new Uint8Array(e).buffer;var a=new Blob([s],{type:"application/pdf"});const o=URL.createObjectURL(a);pe(o),be(!0),H()}}catch(t){console.error(t)}}(r.sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao[0].ID),variant:"primary",children:"Juntada"}),Object(O.jsx)(c.a,{variant:"primary",onClick:()=>_("A"),children:"Arquivar"}),Object(O.jsx)(c.a,{variant:"primary",onClick:()=>_("P"),children:"Prescrever"}),Object(O.jsx)(c.a,{variant:"primary",onClick:()=>async function(){try{"200"==(await x.a.put("/sgigjrelprocessoinstrucao/"+r.sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao[0].ID,{TIPO:"concluir"})).status&&(u(),h("Instruc\xe3o conclu\xedda"),j(null))}catch(t){var e,a;console.error(t.response),"567785636745684"==(null===t||void 0===t||null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.code)&&h("S\xf3 \xe9 poss\xedvel concluir essa instru\xe7\xe3o, ap\xf3s inser\xe7\xe3o de pe\xe7a Relatorio Final")}}(),children:"Concluir Instru\xe7\xe3o do Processo"})]}),Object(O.jsx)(c.a,{variant:"danger",onClick:()=>ie(),children:"Voltar"})]}),Object(O.jsx)(A.a,{Open:$,setOpen:ee,list:ae}),Object(O.jsx)(d.a,{size:"xl",show:me,onHide:()=>be(!1),children:Object(O.jsx)("iframe",{height:1e3,src:"".concat(ue),title:"pdf-viewer",width:"100%s"})}),Object(O.jsx)(D,{voltar:ie,INSTRUCAO_ID:null===r||void 0===r||null===(a=r.sgigjprocessodespacho[0])||void 0===a||null===(t=a.sgigjrelprocessoinstrutor[0])||void 0===t||null===(s=t.sgigjrelprocessoinstrucao[0])||void 0===s?void 0:s.ID,InterrompidoTipo:f,setInterrompidoTipo:_,uploadlist:u})]})};var M=e=>{let{processo_ID:a,setprocesso_ID:t,uploadlist:s,pessoalist:i,decisaolist:r}=e;const[u,m]=Object(o.useState)(!1),{user:b}=Object(v.a)(),{popUp_alertaOK:g}=Object(v.a)();let h="";const f=Object(o.useRef)(null),[_,N]=Object(o.useState)({}),[D,C]=Object(o.useState)(""),[S,A]=Object(o.useState)(""),[R,T]=Object(o.useState)(""),[P,w]=Object(o.useState)(""),[F,q]=Object(o.useState)(""),[k,L]=Object(o.useState)(""),[M,G]=Object(o.useState)(""),[U,z]=Object(o.useState)(""),[B,H]=Object(o.useState)(""),[V,X]=Object(o.useState)(""),[J,Z]=Object(o.useState)(""),[K,Q]=Object(o.useState)(""),[W,Y]=Object(o.useState)("");let $=(new Date).toISOString().substring(0,10);const[ee,ae]=Object(o.useState)([]);const[te,se]=Object(o.useState)("");function oe(){""==F||""==P?g("Preencha todos os campos obrigat\xf3rios"):(console.log(_),h=function(e,a,t,s,o,i,n){var l,c,r,d,j,u,p,m,b,O,g,h,f;return'\n             \n\n                 <p class="MsoNormal" align="center" style="margin: 0in 0px 0in 0in; font-size: 13px; font-family: Calibri, sans-serif; text-align: center;"><b style="mso-bidi-font-weight:normal"><span style="font-size: 32px; font-family: &quot;Times New Roman&quot;, serif;">DESPACHO N.\xba '.concat(t,"/").concat(null===(l=Object(y.b)(s))||void 0===l?void 0:l.ano,'</span></b></p>\n\n                 <p class="MsoNormal" style="margin: 0in; font-size: 13px; font-family: Calibri, sans-serif; line-height: 13px;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif;">&nbsp;</span></p>\n                 \n                 <p class="MsoNormal" style="margin: 0in; font-size: 13px; font-family: Calibri, sans-serif; line-height: 13px;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif;">&nbsp;</span></p>\n                 \n                 <p class="MsoNormal" style="margin: 0in; font-size: 13px; font-family: Calibri, sans-serif; line-height: 13px;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif;">&nbsp;</span></p>\n                 \n                 <p class="MsoNormal" style="margin: 0in; font-size: 13px; font-family: Calibri, sans-serif; line-height: 14px;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif;">&nbsp;</span></p>\n                 \n\n                    \n                    <p class="MsoNormal" style="margin: 0in; font-size: 16px; font-family: Cambria, serif; text-align: justify; line-height: 24px;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif; color: black;">Tendo a IGJ recebido a ').concat(null===(c=Object(y.b)(null===a||void 0===a?void 0:a.DATA))||void 0===c?void 0:c.dia," de ").concat(null===(r=Object(y.b)(null===a||void 0===a?void 0:a.DATA))||void 0===r?void 0:r.mes," de ").concat(null===(d=Object(y.b)(null===a||void 0===a?void 0:a.DATA))||void 0===d?void 0:d.ano,',\n                        do concession\xe1rio Casino Royal, via correio eletr\xf3nico, comunicado, cuja c\xf3pia\n                        se anexa, </span><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif;">de\n                        que procederam \xe0 \u2026\u2026\u2026\u2026 do frequentador, <b>Sr(a).\n                            ').concat(null===a||void 0===a||null===(j=a.sgigjpessoa)||void 0===j?void 0:j.NOME,"</b>, de nacionalidade\n                            ").concat(null===a||void 0===a||null===(u=a.sgigjpessoa)||void 0===u||null===(p=u.nacionalidade)||void 0===p||null===(m=p.NACIONALIDADE)||void 0===m?void 0:m.toLowerCase(),', por alegada m\xe1 conduta, insulto a uma\n                        jogadora, 2 \u201cdealers\u201d e alegada grosseria para com o PCA do casino e seguran\xe7as.</span></p>\n\n                    <p class="MsoNormal" style="margin: 0in; font-size: 16px; font-family: Cambria, serif; text-align: justify; line-height: 115%;"><span style="font-size: 21px; line-height: 115%; font-family: &quot;Times New Roman&quot;, serif; color: black;">&nbsp;</span></p>\n\n                    <p class="MsoNormal" style="margin: 0in; font-size: 16px; font-family: Cambria, serif; text-align: justify; line-height: 24px;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif; color: black;">Considerando ainda a comunica\xe7\xe3o, datada\n                            do mesmo dia, ou seja, \u2026 de \u2026\u2026\u2026\u2026., via email, da Unidade de Servi\xe7o da IGJ no\n                            casino, sobre o mesmo assunto, referenciado no par\xe1grafo anterior, cuja c\xf3pia\n                            se anexa;</span></p>\n\n                    <p class="MsoNormal" style="margin: 0in; font-size: 16px; font-family: Cambria, serif; text-align: justify; line-height: 115%;"><span style="font-size: 21px; line-height: 115%; font-family: &quot;Times New Roman&quot;, serif; color: black;">&nbsp;</span></p>\n\n                    <p class="MsoNormal" style="margin: 0in; font-size: 16px; font-family: Cambria, serif; text-align: justify; line-height: 24px;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif; color: black;">No uso da faculdade conferida pelo n.\xba 9\n                            do artigo 63.\xba da Lei n.\xba 62/VII/2010, de 31 de maio, que altera a Lei n.\xba\n                            77/VII/2005 de 16 de agosto, que estabelece o Regime Jur\xeddico da Explora\xe7\xe3o de\n                            Jogos de Fortuna ou Azar;</span></p>\n\n                    <p class="MsoNormal" style="margin: 0in; font-size: 16px; font-family: Cambria, serif; text-align: justify; line-height: 115%;"><span style="font-size: 21px; line-height: 115%; font-family: &quot;Times New Roman&quot;, serif; color: black;">&nbsp;</span></p>\n\n                    <p class="MsoNormal" style="margin: 0in; font-size: 16px; font-family: Cambria, serif; text-align: justify; line-height: 115%;"><span style="font-size: 21px; line-height: 115%; font-family: &quot;Times New Roman&quot;, serif; color: black;">Determino:</span></p>\n\n                    <p class="MsoNormal" style="margin: 0in; font-size: 16px; font-family: Cambria, serif; text-align: justify; line-height: 115%;"><span style="font-size: 21px; line-height: 115%; font-family: &quot;Times New Roman&quot;, serif; color: black;">&nbsp;</span></p>\n\n                    <p class="MsoListParagraphCxSpFirst" style="margin: 0in 0in 8px 0.5in; font-size: 16px; font-family: Cambria, serif; text-align: justify; text-indent: -0.25in; line-height: 24px;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif; color: black;"><span style="mso-list:Ignore">1.<span style="font: 9px &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp;\n                                </span></span></span><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif; color: black;"> Um(a)\n                            ').concat("D"==n?"Decis\xe3o":"C"==n?"Contraordena\xe7\xe3o":"I"==n?"Inquerito":"Averigua\xe7\xe3o Sum\xe1ria",' para apurar a veracidade dos factos apresentados pela\n                            comunica\xe7\xe3o do chefe de sala do Casino Royal;</span></p>\n\n                    <p class="MsoListParagraphCxSpMiddle" style="margin: 0in 0in 8px 0.5in; font-size: 16px; font-family: Cambria, serif; text-align: justify; line-height: 24px;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif; color: black;">&nbsp;</span></p>\n\n                    <p class="MsoListParagraphCxSpMiddle" style="margin: 0in 0in 8px 0.5in; font-size: 16px; font-family: Cambria, serif; text-align: justify; text-indent: -0.25in;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif; color: black;"><span style="mso-list:Ignore">2.<span style="font: 9px &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif; color: black;">A/o Inspetora/a ').concat(i.map(e=>(null===e||void 0===e?void 0:e.ID)==o?null===e||void 0===e?void 0:e.NOME:null).join(""),' como\n                            instrutora/o do Processo de Averigua\xe7\xe3o;</span></p>\n\n                    <p class="MsoListParagraphCxSpMiddle" style="margin: 0in 0in 0in 0.5in; font-size: 16px; font-family: Cambria, serif; text-align: justify;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif; color: black;">&nbsp;</span></p>\n\n                    <p class="MsoListParagraphCxSpMiddle" style="margin: 0in 0in 8px 0.5in; font-size: 16px; font-family: Cambria, serif; text-align: justify; text-indent: -0.25in;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif; color: black;"><span style="mso-list:Ignore">3.<span style="font: 9px &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif; color: black;">Ouvir ambas as partes;</span></p>\n\n                    <p class="MsoListParagraphCxSpMiddle" style="margin: 0in 0in 0in 0.5in; font-size: 16px; font-family: Cambria, serif; text-align: justify;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif; color: black;">&nbsp;</span><br></p>\n\n                    <p class="MsoListParagraphCxSpLast" style="margin: 0in 0in 8px 0.5in; font-size: 16px; font-family: Cambria, serif; text-align: justify; text-indent: -0.25in;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif; color: black;"><span style="mso-list:Ignore">4.<span style="font: 9px &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif; color: black;">Apresentar ao IGJ uma proposta de decis\xe3o.</span></p>\n\n\n\n                <p class="MsoNormal" style="margin: 0in; font-size: 13px; font-family: Calibri, sans-serif; line-height: 19px;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif;">&nbsp;</span></p>\n                \n                <p class="MsoNormal" style="margin: 0in 0in 0in 17px; font-size: 13px; font-family: Calibri, sans-serif;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif;">CUMPRA-SE.</span></p>\n                \n                <p class="MsoNormal" style="margin: 0in; font-size: 13px; font-family: Calibri, sans-serif; line-height: 12px;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif;">&nbsp;</span></p>\n                 \n                 <p class="MsoNormal" style="margin: 0in 0in 0in 17px; font-size: 13px; font-family: Calibri, sans-serif;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif;">Praia, ').concat(null===(b=Object(y.b)(s))||void 0===b?void 0:b.dia," de ").concat(null===(O=Object(y.b)(s))||void 0===O?void 0:O.mes," de ").concat(null===(g=Object(y.b)(s))||void 0===g?void 0:g.ano,'</span></p>\n                 \n                 <p class="MsoNormal" style="margin: 0in; font-size: 13px; font-family: Calibri, sans-serif; line-height: 13px;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif;">&nbsp;</span></p>\n                 \n                 <p class="MsoNormal" style="margin: 0in; font-size: 13px; font-family: Calibri, sans-serif; line-height: 13px;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif;">&nbsp;</span></p>\n                 \n                 <p class="MsoNormal" style="margin: 0in; font-size: 13px; font-family: Calibri, sans-serif; line-height: 13px;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif;">&nbsp;</span></p>\n                 \n                 <p class="MsoNormal" style="margin: 0in; font-size: 13px; font-family: Calibri, sans-serif; line-height: 13px;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif;">&nbsp;</span></p>\n                 \n                 <p class="MsoNormal" style="margin: 0in; font-size: 13px; font-family: Calibri, sans-serif; line-height: 20px;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif;">&nbsp;</span></p>\n                 \n                 <p class="MsoNormal" align="center" style="margin: 0in 0px 0in 0in; font-size: 13px; font-family: Calibri, sans-serif; text-align: center;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif;">O(a) Inspetor(a) Geral</span></p>\n                 \n                 <p class="MsoNormal" align="center" style="margin: 0in 0px 0in 0in; font-size: 13px; font-family: Calibri, sans-serif; text-align: center;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif;">________________________________</span></p>\n                 \n                 <p class="MsoNormal" style="margin: 0in; font-size: 13px; font-family: Calibri, sans-serif; line-height: 12px;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif;">&nbsp;</span></p>\n                 \n                 <p class="MsoNormal" style="margin: 0in; font-size: 13px; font-family: Calibri, sans-serif; line-height: 12px;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif;">&nbsp;</span></p>\n                 \n                 <p class="MsoNormal" align="center" style="margin: 0in 0px 0in 0in; font-size: 13px; font-family: Calibri, sans-serif; text-align: center;"><span style="font-size: 21px; font-family: &quot;Times New Roman&quot;, serif;">').concat(null===e||void 0===e||null===(h=e.sgigjrelpessoaentidade)||void 0===h||null===(f=h.sgigjpessoa)||void 0===f?void 0:f.NOME,"</span></p>\n                 \n             \n             ")}(b,_,P,$,U,i,S),se(h))}return Object(o.useEffect)(()=>{""!=a&&(async()=>{A(""),T(""),w(""),q(""),L("10"),G(""),H(""),Z("*"),$=new Date("2021-01-01"),console.log(i),h="";try{const e=await x.a.get("/sgigjprocessoexclusao/"+a);"200"==e.status&&(e.data.length>0&&(e.data[0].id=e.data[0].ID,N(e.data[0]),console.log(e.data[0]),e.data[0].sgigjdespachofinal.length>0?(A("D"),w(e.data[0].sgigjdespachofinal[0].REFERENCIA),G(e.data[0].sgigjdespachofinal[0].OBS),X(e.data[0].sgigjdespachofinal[0].COIMA),H(e.data[0].sgigjdespachofinal[0].INFRACAO_COIMA_ID),T(e.data[0].sgigjdespachofinal[0].PR_DECISAO_TP_ID),L(e.data[0].sgigjdespachofinal[0].PRAZO),q(Object(y.e)(e.data[0].sgigjdespachofinal[0].DATA)),Z(e.data[0].sgigjdespachofinal[0].CODIGO),h=e.data[0].sgigjdespachofinal[0].DESPACHO):e.data[0].sgigjprocessodespacho.length>0&&(A(e.data[0].sgigjprocessodespacho[0].TIPO_PROCESSO_EXCLUSAO),w(e.data[0].sgigjprocessodespacho[0].REFERENCIA),G(e.data[0].sgigjprocessodespacho[0].OBS),z(e.data[0].sgigjprocessodespacho[0].PESSOA_ID_TEMP),L(e.data[0].sgigjprocessodespacho[0].PRAZO),q(Object(y.e)(e.data[0].sgigjprocessodespacho[0].DATA)),Z(e.data[0].sgigjprocessodespacho[0].CODIGO),h=e.data[0].sgigjprocessodespacho[0].DESPACHO,e.data[0].sgigjrelcontraordenacaoinfracao.length>0&&H(e.data[0].sgigjrelcontraordenacaoinfracao[0].INFRACAO_COIMA_ID))),C(a),t(""),se(h),m(!0))}catch(e){console.error(e)}})()},[a]),Object(o.useEffect)(()=>{!async function(){try{const e=await x.a.get("/sgigjinfracaocoima");"200"==e.status&&ae(e.data)}catch(e){console.error(e.response)}}()},[]),Object(O.jsxs)(d.a,{size:"xl",show:u,onHide:()=>m(!1),children:[Object(O.jsx)(d.a.Header,{closeButton:!0,children:Object(O.jsx)(d.a.Title,{as:"h5",children:"Despacho"})}),Object(O.jsx)(d.a.Body,{className:"newuserbox",children:Object(O.jsx)("form",{id:"criarDespacho",onSubmit:async function(e){if(e.preventDefault(),console.log(S),"C"==S||"I"==S||"A"==S){var a,t;const e={INSTRUTOR:U,REFERENCIA:P,OBS:M,DATA:F,DESPACHO:null===f||void 0===f||null===(a=f.current)||void 0===a?void 0:a.value,TIPO_PROCESSO_EXCLUSAO:S,TIPO:W,COIMA:V,INFRACAO_COIMA_ID:B};"C"==S&&(e.INFRACAO_COIMA_ID=B),console.log(h),console.log(e),console.log(null===f||void 0===f?void 0:f.current),console.log(null===f||void 0===f||null===(t=f.current)||void 0===t?void 0:t.value);try{"200"==(await x.a.put("/sgigjprocessoexclusao/".concat(D,"/despacho"),e)).status&&(p.a.success("Despacho Criado!",{duration:4e3}),s(),m(!1))}catch(n){console.error(n.response)}}if("D"==S){var o,i;const e={PR_DECISAO_TP_ID:R,REFERENCIA:P,OBS:M,DATA:F,OBS:M,COIMA:V,INFRACAO_COIMA_ID:B,DESPACHO:null===f||void 0===f||null===(o=f.current)||void 0===o?void 0:o.value,TIPO_PROCESSO_EXCLUSAO:S,TIPO:W};console.log(h),console.log(e),console.log(null===f||void 0===f?void 0:f.current),console.log(null===f||void 0===f||null===(i=f.current)||void 0===i?void 0:i.value);try{"200"==(await x.a.put("/sgigjprocessoexclusao/".concat(D,"/despachofinal"),e)).status&&(p.a.success("Despacho Criado!",{duration:4e3}),s(),m(!1))}catch(n){console.error(n.response)}}},children:Object(O.jsxs)(n.a,{children:[Object(O.jsx)(l.a,{sm:12,children:Object(O.jsxs)(j.a.Group,{style:{display:"flex",justifyContent:"center",flexWrap:"wrap"},children:[Object(O.jsx)(j.a.Check,{inline:!0,custom:!0,required:!0,type:"radio",label:"Inquerito",name:"supportedRadio",id:"inquerito",checked:"I"==S,onChange:()=>A("I")}),Object(O.jsx)(j.a.Check,{inline:!0,custom:!0,required:!0,type:"radio",label:"Averigua\xe7\xe3o Sum\xe1rio",name:"supportedRadio",id:"averiguacao",checked:"A"==S,onChange:()=>A("A")}),Object(O.jsx)(j.a.Check,{inline:!0,custom:!0,required:!0,type:"radio",label:"Contraordena\xe7\xe3o",name:"supportedRadio",id:"contraordenacao",checked:"C"==S,onChange:()=>A("C")}),Object(O.jsx)(j.a.Check,{inline:!0,custom:!0,required:!0,type:"radio",label:"Despacho Decis\xe3o",name:"supportedRadio",id:"despachofinal",checked:"D"==S,onChange:()=>A("D")})]})}),""==S?Object(O.jsx)(l.a,{sm:12,children:Object(O.jsx)("div",{className:"form-group fill",children:Object(O.jsx)("div",{style:{width:"500px",height:"300px"}})})}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(l.a,{sm:2,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["C\xf3digo ",Object(O.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(O.jsx)("input",{disabled:!0,type:"text",className:"form-control",id:"Name",value:J,required:!0})]})}),"D"==S?Object(O.jsx)(l.a,{sm:4,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Decis\xe3o ",Object(O.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(O.jsxs)("select",{id:"perfil",value:R,onChange:e=>{T(e.target.value)},className:"form-control",required:!0,"aria-required":"true",children:[Object(O.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),r.map(e=>Object(O.jsx)("option",{value:e.ID,children:e.DESIG},e.ID))]})]})}):Object(O.jsx)(l.a,{sm:4,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Instrutor ",Object(O.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(O.jsx)(E.a,{className:"basic-single",classNamePrefix:"select",onChange:e=>z(e.value),name:"pessoa",options:i.filter(e=>{var a;return"gsmky0e7yakreut8ws32xv0tejykqo7d6jnv"==(null===e||void 0===e||null===(a=e.sgigjrelpessoaentidade[0])||void 0===a?void 0:a.ENTIDADE_ID)}),defaultValue:i.map(e=>e.ID==U?e:null),required:!0,menuPlacement:"auto",menuPosition:"fixed",placeholder:"Pessoa..."})]})}),Object(O.jsx)(l.a,{sm:3,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Refer\xeancia ",Object(O.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(O.jsx)("input",{type:"number",onChange:e=>{w(e.target.value)},defaultValue:P,className:"form-control",placeholder:"Refer\xeancia...",required:!0})]})}),Object(O.jsx)(l.a,{sm:3,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Data ",Object(O.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(O.jsx)("input",{type:"date",onChange:e=>{q(e.target.value)},defaultValue:F,className:"form-control",placeholder:"Data...",required:!0})]})}),Object(O.jsx)(l.a,{sm:10,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsx)("label",{className:"floating-label",htmlFor:"Name",children:"Observa\xe7\xe3o"}),Object(O.jsx)("input",{type:"text",onChange:e=>{G(e.target.value)},defaultValue:M,className:"form-control",placeholder:"Observa\xe7\xe3o..."})]})}),Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(l.a,{sm:4,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsx)("label",{className:"floating-label",htmlFor:"Name",children:"Coima"}),Object(O.jsx)("input",{type:"number",defaultValue:V,onChange:e=>{X(e.target.value)},className:"form-control",placeholder:"Coima..."})]})})}),Object(O.jsx)(l.a,{sm:12,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsx)("label",{className:"floating-label",htmlFor:"Name",children:"Despacho"}),Object(O.jsx)(I.a,{editorRef:e=>{},value:te,config:{readonly:!1},ref:f,onChange:e=>(h=e,void console.log(h))})]})})]})]})})}),Object(O.jsxs)(d.a.Footer,{children:[Object(O.jsx)(c.a,{variant:"danger",onClick:()=>m(!1),children:"Fechar"}),Object(O.jsx)(c.a,{onClick:()=>oe(),variant:"primary",children:"Gerar texto"}),Object(O.jsx)(c.a,{onClick:()=>Y("SALVAR"),type:"submit",form:"criarDespacho",variant:"primary",children:"Guardar"}),Object(O.jsx)(c.a,{onClick:()=>Y("CONCLUIR"),type:"submit",form:"criarDespacho",variant:"primary",children:"Concluir"})]})]})};var G=function(e){var a,t;let{processo:s,isdepachofinal:i,setisdepachofinal:r,decisaolist:j,uploadlist:u}=e;const[m,b]=Object(o.useState)(""),[g,h]=Object(o.useState)(0),[f,v]=Object(o.useState)(""),[_,N]=Object(o.useState)("*"),[D,C]=Object(o.useState)(""),[S,A]=Object(o.useState)(""),[E,R]=Object(o.useState)(""),[T,P]=Object(o.useState)(""),[w,F]=Object(o.useState)(""),[q,k]=Object(o.useState)(""),[L,M]=Object(o.useState)(""),[G,U]=Object(o.useState)([]);const[z,B]=Object(o.useState)([]);let H="";Object(o.useEffect)(()=>{var e,a,t,o,i,n,l,c;if((console.log(s),0!==Object.keys(s).length)&&(s.sgigjprocessodespacho.length>0&&(null===(e=s.sgigjprocessodespacho[0])||void 0===e?void 0:e.sgigjrelprocessoinstrutor.length)>0&&(null===(a=s.sgigjprocessodespacho[0])||void 0===a||null===(t=a.sgigjrelprocessoinstrutor[0])||void 0===t?void 0:t.sgigjrelprocessoinstrucao.length)>0))if(v(null===(o=s.sgigjprocessodespacho[0])||void 0===o||null===(i=o.sgigjrelprocessoinstrutor[0])||void 0===i?void 0:i.sgigjrelprocessoinstrucao[0].ID),(null===(n=s.sgigjprocessodespacho[0])||void 0===n||null===(l=n.sgigjrelprocessoinstrutor[0])||void 0===l||null===(c=l.sgigjrelprocessoinstrucao[0])||void 0===c?void 0:c.sgigjprocessodespacho.length)>0){var r,d,j,u;const e=null===(r=s.sgigjprocessodespacho[0])||void 0===r||null===(d=r.sgigjrelprocessoinstrutor[0])||void 0===d||null===(j=d.sgigjrelprocessoinstrucao[0])||void 0===j?void 0:j.sgigjprocessodespacho[0];H=e.DESPACHO,C(Object(y.e)(e.DATA)),R(Object(y.e)(e.DATA_FIM)),A(Object(y.e)(e.DATA_INICIO)),F(e.PR_EXCLUSAO_PERIODO_ID),P(e.PR_DECISAO_TP_ID),N(e.CODIGO),M(e.INFRACAO_COIMA_ID),k(e.COIMA),h(null===(u=e.sgigjprexclusaoperiodo)||void 0===u?void 0:u.NUM_DIAS)}else{var p,m,b,O;H=V,console.log(null===(p=s.sgigjprocessodespacho[0])||void 0===p||null===(m=p.sgigjrelprocessoinstrutor[0])||void 0===m?void 0:m.sgigjrelprocessoinstrucao[0].PR_DECISAO_TP_ID),P(null===(b=s.sgigjprocessodespacho[0])||void 0===b||null===(O=b.sgigjrelprocessoinstrutor[0])||void 0===O?void 0:O.sgigjrelprocessoinstrucao[0].PR_DECISAO_TP_ID)}},[s]);const[V,X]=Object(o.useState)(),J=Object(o.useRef)(null);Object(o.useEffect)(()=>{let e=new Date(S);e.setDate(e.getDate()+g)},[S,g]),Object(o.useEffect)(()=>{!async function(){try{const e=await x.a.get("/sgigjprexclusaoperiodo");"200"==e.status&&U(e.data)}catch(e){console.error(e.response)}}(),async function(){try{const e=await x.a.get("/sgigjinfracaocoima");"200"==e.status&&B(e.data)}catch(e){console.error(e.response)}}()},[]);const[Z,K]=Object(o.useState)(),[Q,W]=Object(o.useState)(!1);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(d.a,{size:"xl",show:i,onHide:()=>r(!1),children:[Object(O.jsx)(d.a.Header,{closeButton:!0,children:Object(O.jsx)(d.a.Title,{as:"h5",children:"Despacho Decis\xe3o"})}),Object(O.jsx)(d.a.Body,{className:"newuserbox",children:Object(O.jsx)("form",{id:"onSubmit",onSubmit:async function(e){var a;if(e.preventDefault(),(null===s||void 0===s||null===(a=s.sgigjprocessodespacho)||void 0===a?void 0:a.length)>0){var t,o,i;if("C"==(null===s||void 0===s||null===(t=s.sgigjprocessodespacho[0])||void 0===t?void 0:t.TIPO_PROCESSO_EXCLUSAO)){var n,l;const e={PR_EXCLUSAO_PERIODO_ID:w,PR_DECISAO_TP_ID:T,DATA:D,COIMA:q,INFRACAO_COIMA_ID:L,DESPACHO:null===J||void 0===J||null===(n=J.current)||void 0===n?void 0:n.value,DATA_INICIO:S,DATA_FIM:E,TIPO:"CONCLUIR"==m?"CONCLUIR":null===s||void 0===s||null===(l=s.sgigjprocessodespacho[0])||void 0===l?void 0:l.TIPO_PROCESSO_EXCLUSAO};try{"200"==(await x.a.put("/sgigjrelprocessoinstrucaocontraordenacao/".concat(f,"/despacho"),e)).status&&(p.a.success("Documento Guardado!",{duration:4e3}),u(),r(!1))}catch(j){console.error(j.response)}}if("A"==(null===s||void 0===s||null===(o=s.sgigjprocessodespacho[0])||void 0===o?void 0:o.TIPO_PROCESSO_EXCLUSAO)||"I"==(null===s||void 0===s||null===(i=s.sgigjprocessodespacho[0])||void 0===i?void 0:i.TIPO_PROCESSO_EXCLUSAO)){var c,d;const e={PR_EXCLUSAO_PERIODO_ID:w,PR_DECISAO_TP_ID:T,DATA:D,COIMA:q,INFRACAO_COIMA_ID:L,DESPACHO:null===J||void 0===J||null===(c=J.current)||void 0===c?void 0:c.value,DATA_INICIO:S,DATA_FIM:E,TIPO:"CONCLUIR"==m?"CONCLUIR":null===s||void 0===s||null===(d=s.sgigjprocessodespacho[0])||void 0===d?void 0:d.TIPO_PROCESSO_EXCLUSAO};try{"200"==(await x.a.put("/sgigjrelprocessoinstrucao/".concat(f,"/despacho"),e)).status&&(u(),r(!1))}catch(j){console.error(j.response)}}}},children:Object(O.jsxs)(n.a,{children:[Object(O.jsx)(l.a,{sm:2,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["C\xf3digo ",Object(O.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(O.jsx)("input",{disabled:!0,type:"text",className:"form-control",id:"Name",value:_,required:!0})]})}),Object(O.jsx)(l.a,{sm:6,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsx)("label",{className:"floating-label",htmlFor:"Name",children:"Decis\xe3o"}),Object(O.jsxs)("select",{id:"perfil",value:T,onChange:e=>{P(e.target.value)},className:"form-control","aria-required":"true",children:[Object(O.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),j.map(e=>Object(O.jsx)("option",{value:e.ID,children:e.DESIG},e.ID))]})]})}),Object(O.jsx)(l.a,{sm:4,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Data ",Object(O.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(O.jsx)("input",{type:"date",value:D,onChange:e=>{C(e.target.value)},className:"form-control",id:"Name",required:!0})]})}),(null===s||void 0===s||null===(a=s.sgigjprocessodespacho)||void 0===a?void 0:a.length)>0&&"C"==(null===s||void 0===s||null===(t=s.sgigjprocessodespacho[0])||void 0===t?void 0:t.TIPO_PROCESSO_EXCLUSAO)?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(l.a,{sm:8,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsx)("label",{className:"floating-label",htmlFor:"Name",children:"Infra\xe7\xe3o "}),Object(O.jsxs)("select",{id:"perfil",value:L,onChange:e=>{M(e.target.value)},className:"form-control",required:!0,"aria-required":"true",children:[Object(O.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),z.map(e=>{var a;return Object(O.jsx)("option",{value:e.ID,children:null===e||void 0===e||null===(a=e.sgigjprinfracaotp)||void 0===a?void 0:a.DESIG},e.ID)})]})]})}),Object(O.jsx)(l.a,{sm:4,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsx)("label",{className:"floating-label",htmlFor:"Name",children:"Coima "}),Object(O.jsx)("input",{maxLength:"128",type:"number",onChange:e=>{k(e.target.value)},defaultValue:q,className:"form-control",placeholder:"Valor...",required:!0})]})})]}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(l.a,{sm:4,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsx)("label",{className:"floating-label",htmlFor:"Name",children:"Per\xedodo Exclus\xe3o "}),Object(O.jsxs)("select",{onChange:e=>{!function(e){let a=e.split(";:;");h(parseInt(a[1])),F(a[0]),console.log(w)}(e.target.value)},value:w+";:;"+g,className:"form-control",id:"pessoa","aria-required":"true",children:[Object(O.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),G.map(e=>Object(O.jsx)("option",{title:e.CODIGO,value:e.ID+";:;"+e.NUM_DIAS,children:e.DESIG},e.ID))]})]})}),Object(O.jsx)(l.a,{sm:4,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsx)("label",{className:"floating-label",htmlFor:"Name",children:"Data In\xedcio "}),Object(O.jsx)("input",{type:"date",onChange:e=>{const a=new Date(e.target.value);if(g&&a){a.setDate(a.getDate()+g);const e=a.toISOString().split("T")[0];R(e)}A(e.target.value)},value:S,className:"form-control",placeholder:"Data..."})]})}),Object(O.jsx)(l.a,{sm:4,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsx)("label",{className:"floating-label",htmlFor:"Name",children:"Data Fim "}),Object(O.jsx)("input",{type:"date",value:E,onChange:e=>{R(e.target.value)},className:"form-control",placeholder:"Data..."})]})})]}),Object(O.jsx)(l.a,{sm:12,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsx)("label",{className:"floating-label",htmlFor:"Name",children:"Despacho"}),Object(O.jsx)(I.a,{editorRef:e=>{},value:V,config:{readonly:!1},ref:J,onChange:e=>(async e=>{try{const a=await x.a.get("/despacho-desicao/referencia");"200"==a.status&&(X('\n            <h4 style="font-weight: 700;text-align: center;margin-top: 10px;margin-bottom: 35px;">DESPACHO/DECIS\xc3O N.\xba '.concat(a.data.message,'<h4>\n                                        \n               \n    <p style="text-align: justify;line-height: 1.5;">Considerando o Relat\xf3rio Final do Processo de Averigua\xe7\xe3o Sum\xe1ria, para o apuramento da veracidade dos factos apresentados pela dire\xe7\xe3o do casino;</p>\n    \n    <p style="text-align: justify;line-height: 1.5;">Atendendo que o averiguado reagiu/n\xe3o em sua defesa, durante o prazo legal atribu\xeddo, para indicar os motivos justificativos da sua reclama\xe7\xe3o, bem como as testemunhas que pudessem ser ouvidas;</p>\n    \n    <p style="text-align: justify;line-height: 1.5;">Tendo em conta que a acusa\xe7\xe3o apontada pela concession\xe1ria de que o comportamento do Sr. ..................................................... se revelou inconveniente, inapropriado e enquadr\xe1vel dentro dos atos il\xedcitos administrativos de clientes das concession\xe1rias, ter sido provada;</p>\n    \n    <p style="text-align: justify;line-height: 1.5;">No uso da faculdade conferida pelos n.\xbas 10 e 13 do artigo 63.\xba da Lei 77/VI/2005 de 16 de agosto, valido a decis\xe3o tomada pela concession\xe1ria de interdi\xe7\xe3o provis\xf3ria e perante os factos apurados, constantes do Processo folhas 0 a folhas 22, para o qual se remete para todos os efeitos legais, determino a interdi\xe7\xe3o de acesso ao Casino Royal do Sr. ............................ por um per\xedodo de \u2026 meses/anos, a contar da data da ocorr\xeancia do facto (.../.../20...);</p>\n    \n    \n    <p style="text-align: justify;line-height: 1.5;">Determino ainda:\n    \n        1. A presta\xe7\xe3o de informa\xe7\xf5es pela concession\xe1ria ao Servi\xe7o de Inspe\xe7\xe3o de Jogos do desfecho da investiga\xe7\xe3o referenciada, relativa a poss\xedveis fraudes ao Grupo de M\xe1quinas em causa. \n    \n        2. Notifique-se a Dire\xe7\xe3o do Casino Royal e o averiguado do Despacho da Decis\xe3o Final\n    \n        3. Deve a Dire\xe7\xe3o do Casino dar de imediato conhecimento \xe0 rece\xe7\xe3o do mesmo, devendo esta, bem como o Diretor Geral do casino estarem cientes das suas responsabilidades se permitirem o acesso do referido frequentador ao espa\xe7o confinado ao jogo;\n    \n        4. CUMPRA-SE\n    </p>\n    \n    <p style="text-align: justify;line-height: 1.5;">Praia, ......... de .......... de 20.....</p>\n    ')),H=e)}catch(a){}})(e)})]})})]})})}),Object(O.jsxs)(d.a.Footer,{children:[Object(O.jsx)(c.a,{variant:"danger",onClick:()=>r(!1),children:"Fechar"}),Object(O.jsx)(c.a,{variant:"primary",onClick:()=>async function(e){let a=[];console.log(e);try{const i=await x.a.get("/sgigjprocessoexclusao/"+s.ID);"200"==i.status&&i.data.length>0&&(i.data[0].id=i.data[0].ID,i.data[0].sgigjprocessodespacho.length>0&&i.data[0].sgigjprocessodespacho[0].sgigjrelprocessoinstrutor.length>0&&i.data[0].sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao.length>0&&(a=i.data[0].sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao[0].sgigjrelinstrutorpeca));var t=[];if(a.length>0)for(let e=0;e<a.length;e++){const s=a[e];for(let e=0;e<s.sgigjreldocumento.length;e++){const a=s.sgigjreldocumento[e];t.push(a.DOC_URL)}null!=s.URL_DOC&&t.push(s.URL_DOC)}console.log("GO_ER");const n=await x.a.get("/juntada/"+e);if("200"==n.status){const e=n.data.buffer.data,a=new Uint8Array(e).buffer;var o=new Blob([a],{type:"application/pdf"});const t=URL.createObjectURL(o);console.log(o),K(t),W(!0)}}catch(i){console.error(i)}}(f),children:"Dados Proc"}),Object(O.jsx)(c.a,{type:"submit",form:"onSubmit",variant:"primary",onClick:()=>b("SALVAR"),children:"Guardar"}),Object(O.jsx)(c.a,{type:"submit",form:"onSubmit",variant:"primary",onClick:()=>b("CONCLUIR"),children:"Concluir"})]})]}),Object(O.jsx)(d.a,{size:"xl",show:Q,onHide:()=>W(!1),children:Object(O.jsx)("iframe",{height:1e3,src:"".concat(Z),title:"pdf-viewer",width:"100%s"})})]})},U=t(246),z=t(176),B=t.n(z),H=()=>{const[e,a]=Object(o.useState)(!1),[t,s]=Object(o.useState)([]);return Object(o.useEffect)(()=>{!async function(){const e=B()().tz(U.a);try{const l=await x.a.get("/tempolimiteprocessoexclusao");if("200"==l.status&&(console.log(l.data.prazovisado.length),l.data.prazolimite.length>0||l.data.prazovisado.length>0)){let c=[];console.log(c);for(let a=0;a<l.data.prazovisado.length;a++){var t,o,i;const s=l.data.prazovisado[a],n=null===s||void 0===s||null===(t=s.sgigjprocessodespacho[0])||void 0===t||null===(o=t.sgigjrelprocessoinstrutor[0])||void 0===o||null===(i=o.sgigjrelprocessoinstrucao[0])||void 0===i?void 0:i.sgigjrelinstrutorpeca;for(let a=0;a<n.length;a++)if("0a2557ff1b8e966ae041183b8bbcb4d2ce1d"==n[a].PR_PECAS_PROCESSUAIS_ID){const t=""+n[a].DT_REGISTO,o=e.diff(B()(t.slice(0,10)).tz(U.a),"days");o>0&&c.push({ID:s.ID,CODIGO:s.CODIGO,VISADO:s.sgigjpessoa.NOME,PRAZO:o})}}for(let a=0;a<l.data.prazolimite.length;a++){var n;const t=l.data.prazolimite[a],s=null===t||void 0===t?void 0:t.sgigjprocessodespacho[0];if((null===(n=c.find(e=>e.ID===t.ID))||void 0===n?void 0:n.ID)!=t.ID){const a=""+s.DATA,o=e.diff(B()(a.slice(0,10)).tz(U.a),"days");o>0&&c.push({ID:t.ID,CODIGO:t.CODIGO,VISADO:t.sgigjpessoa.NOME,PRAZO:o})}console.log(s.DATA)}c.length>0&&(s(c),a(!0))}}catch(l){console.error(l.response)}}()},[]),Object(O.jsxs)(d.a,{size:"g",show:e,onHide:()=>a(!1),children:[Object(O.jsx)(d.a.Header,{closeButton:!0,children:Object(O.jsx)(d.a.Title,{as:"h5",children:"Prazo"})}),t.map(e=>Object(O.jsx)(d.a.Body,{className:"newuserbox",style:{paddingBottom:"0px"},children:Object(O.jsxs)(n.a,{style:{width:"100%",overflow:"auto"},children:[Object(O.jsx)(l.a,{sm:4,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsx)("label",{className:"floating-label",htmlFor:"Name",children:"Refer\xeancia"}),Object(O.jsx)("span",{style:{overflow:"auto",height:"auto",minHeight:"33px"},className:"form-control",children:null===e||void 0===e?void 0:e.REF})]})}),Object(O.jsx)(l.a,{sm:5,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsx)("label",{className:"floating-label",htmlFor:"Name",children:"Visado"}),Object(O.jsx)("span",{style:{overflow:"auto",height:"auto",minHeight:"33px"},className:"form-control",children:null===e||void 0===e?void 0:e.VISADO})]})}),Object(O.jsx)(l.a,{sm:3,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsx)("label",{className:"floating-label",htmlFor:"Name",children:"Prazo"}),Object(O.jsx)("span",{style:{overflow:"auto",height:"auto",minHeight:"33px"},className:"form-control",children:null===e||void 0===e?void 0:e.PRAZO})]})})]})},null===e||void 0===e?void 0:e.ID))]})},V=t(841);var X=e=>{let{label:a,required:t,error:s,touched:o,children:n,className:l}=e;var c=o&&s;return Object(O.jsxs)("div",{className:"form-field ".concat(l||""),children:[a&&Object(O.jsxs)("label",{className:"form-field__label",children:[a,t&&Object(O.jsx)("span",{className:"form-field__required",children:"*"})]}),i.a.Children.map(n,function(e){if(!e)return e;if("string"===typeof e.type||e.props){var a="";return c?a="field-invalid":o&&!s&&(a="field-valid"),e.props&&e.props.className?i.a.cloneElement(e,{className:e.props.className+" "+a}):e}return e}),c&&Object(O.jsxs)("div",{className:"form-field__error",children:[Object(O.jsx)("i",{className:"feather icon-alert-circle",style:{fontSize:11}}),s]})]})},J=t(842),Z=J.a({DATA:J.b().required("Data e obrigatoria"),DESPACHO:J.b().required("Despacho e obrigatorio")});J.a({DATA:J.b().required("Data e obrigatoria"),tipo_pedido:J.b().required("Selecione o tipo de pedido")}),J.a({REFERENCIA:J.b().required("Referencia e obrigatoria"),DATA:J.b().required("Data e obrigatoria"),tipo_pedido:J.b().required("Selecione o tipo de despacho")});var K=e=>{let{processo_ID:a,setprocesso_ID:t,uploadlist:s,pessoalist:i,decisaolist:r,isOpenEncerrar:j,setIsOpenEncerrar:u,instrucao_ID:m}=e;const b=Object(o.useRef)(null),[g,h]=Object(o.useState)("");return Object(O.jsxs)(d.a,{size:"xl",show:j,onHide:()=>u(!1),children:[Object(O.jsx)(d.a.Header,{closeButton:!0,children:Object(O.jsx)(d.a.Title,{as:"h5",children:"Termo de Encerramento"})}),Object(O.jsx)(V.a,{initialValues:{DATA:"",DESPACHO:""},validationSchema:Z,onSubmit:async function(e){var t={DATA:e.DATA,DESPACHO:e.DESPACHO,PROCESSO_EXCLUSAO_ID:a};try{"200"==(await x.a.put("/sgigjprocessoexclusao/".concat(m,"/termo-encerramento"),t)).status?(p.a.success("Termo de Encerramento enviado!",{duration:4e3}),s(),u(!1)):p.a.error("Erro ao enviar Termo de Encerramento",{duration:4e3})}catch(o){console.error(o.response),p.a.error("Erro ao enviar Termo de Encerramento",{duration:4e3})}},children:e=>{let{values:a,errors:t,touched:s,handleChange:o,handleBlur:i,handleSubmit:r,setFieldValue:j,setFieldTouched:p}=e;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(d.a.Body,{className:"newuserbox",children:Object(O.jsx)("form",{id:"submeterTermoEncerramento",onSubmit:r,children:Object(O.jsxs)(n.a,{children:[Object(O.jsx)(l.a,{sm:3,children:Object(O.jsx)(X,{label:"Data",required:!0,error:t.DATA,touched:s.DATA,children:Object(O.jsx)("input",{type:"date",name:"DATA",onChange:o,onBlur:i,value:a.DATA,className:"form-control",placeholder:"Data..."})})}),Object(O.jsx)(l.a,{sm:12,children:Object(O.jsx)(X,{label:"Despacho",required:!0,error:t.DESPACHO,touched:s.DESPACHO,children:Object(O.jsx)(I.a,{ref:b,value:g,config:{readonly:!1},onChange:function(e){j("DESPACHO",e),p("DESPACHO",!0,!1)}})})})]})})}),Object(O.jsxs)(d.a.Footer,{children:[Object(O.jsx)(c.a,{variant:"danger",onClick:()=>u(!1),children:"Fechar"}),Object(O.jsx)(c.a,{onClick:()=>(async e=>{try{const a=await x.a.get("/termo-encerramento/texto");"200"==a.status&&a.data.OBS&&(h(a.data.OBS),e("DESPACHO",a.data.OBS))}catch(a){}})(j),variant:"primary",children:"Gerar texto"}),Object(O.jsx)(c.a,{type:"submit",form:"submeterTermoEncerramento",variant:"primary",children:"Concluir"})]})]})}})]})};const Q={grey:{label:"Criado",className:"status-badge--criado"},green:{label:"Desp. Inicial",className:"status-badge--despacho"},orange:{label:"Instrucao",className:"status-badge--instrucao"},blue:{label:"Desp. Final",className:"status-badge--final"},black:{label:"Encerrado",className:"status-badge--encerrado"}};var W=e=>{let{colorx:a}=e;const t=Q[a]||Q.grey;return Object(O.jsxs)("span",{className:"status-badge ".concat(t.className),children:[Object(O.jsx)("span",{className:"status-badge__dot"}),Object(O.jsx)("span",{children:t.label})]})};const Y=[{key:"grey",label:"Criado",icon:"feather icon-file-plus"},{key:"green",label:"Despacho",icon:"feather icon-check-circle"},{key:"orange",label:"Instrucao",icon:"feather icon-clipboard"},{key:"blue",label:"Desp. Final",icon:"feather icon-award"},{key:"black",label:"Encerrado",icon:"feather icon-lock"}],$={grey:0,green:1,orange:2,blue:3,black:4};var ee=e=>{let{colorx:a,variant:t="compact"}=e;const s=void 0!==$[a]?$[a]:0,o="detail"===t?"processo-stepper--detail":"processo-stepper--compact";return Object(O.jsx)("div",{className:"processo-stepper ".concat(o),children:Y.map((e,a)=>{var o="processo-step--pending";return a<s&&(o="processo-step--completed"),a===s&&(o="processo-step--current"),Object(O.jsx)("div",{className:"processo-step ".concat(o),children:"detail"===t?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"processo-step__top",children:[a>0&&Object(O.jsx)("div",{className:"processo-step__connector"}),Object(O.jsx)("div",{className:"processo-step__circle",children:Object(O.jsx)("i",{className:e.icon})})]}),Object(O.jsx)("div",{className:"processo-step__label",children:e.label})]}):Object(O.jsxs)(O.Fragment,{children:[a>0&&Object(O.jsx)("div",{className:"processo-step__connector"}),Object(O.jsx)("div",{className:"processo-step__circle",title:e.label,children:a+1})]})},e.key)})})},ae={criacao:"processo-timeline__marker--criacao",despacho:"processo-timeline__marker--despacho",instrucao:"processo-timeline__marker--instrucao",final:"processo-timeline__marker--final",encerrado:"processo-timeline__marker--encerrado"},te={criacao:"feather icon-file-plus",despacho:"feather icon-check-circle",instrucao:"feather icon-clipboard",final:"feather icon-award",encerrado:"feather icon-lock"};var se=function(e){let{processo:a}=e;if(!a)return null;var t=function(e){var a=[];if(a.push({type:"criacao",title:"Pedido Criado",date:e.DATA2,desc:e.DESCR||"",doc:e.URL_DOC_GERADO,completed:!0}),e.despacho){var t=e.despacho,s=[];t.REFERENCIA&&s.push("Ref: "+t.REFERENCIA),t.PRAZO&&s.push("Prazo: "+t.PRAZO),t.INSTRUTOR&&s.push("Instrutor: "+t.INSTRUTOR),a.push({type:"despacho",title:"Despacho Inicial",date:t.DATA,desc:s.join(" | "),doc:t.DOC,completed:!0})}if(e.instrucao&&e.instrucao.list&&e.instrucao.list.length>0){var o=e.instrucao.list.map(function(e){var a;return(null===e||void 0===e||null===(a=e.sgigjprpecasprocessual)||void 0===a?void 0:a.DESIG)||"Pe\xe7a"});a.push({type:"instrucao",title:"Instru\xe7\xe3o",date:"",desc:o.join(", "),completed:!0})}if(e.despachofinal){var i=e.despachofinal;a.push({type:"final",title:"Despacho Final",date:i.DATA,desc:i.DESICAO?"Decis\xe3o: "+i.DESICAO:"",doc:i.DOC,completed:!0})}return a}(a);return 0===t.length?null:Object(O.jsx)("div",{className:"processo-timeline",children:t.map(function(e,a){var s=a===t.length-1;return Object(O.jsxs)("div",{className:"processo-timeline__event",children:[Object(O.jsxs)("div",{className:"processo-timeline__marker-wrap",children:[Object(O.jsx)("div",{className:"processo-timeline__marker "+(ae[e.type]||""),children:Object(O.jsx)("i",{className:te[e.type]||"feather icon-circle"})}),!s&&Object(O.jsx)("div",{className:"processo-timeline__line processo-timeline__line--completed"})]}),Object(O.jsxs)("div",{className:"processo-timeline__card",children:[e.date&&Object(O.jsx)("div",{className:"processo-timeline__date",children:e.date}),Object(O.jsx)("div",{className:"processo-timeline__title",children:e.title}),e.desc&&Object(O.jsx)("div",{className:"processo-timeline__desc",children:e.desc}),e.doc&&Object(O.jsxs)("a",{className:"processo-timeline__doc-link",href:e.doc+"?alt=media&token=0",target:"_blank",rel:"noopener noreferrer",children:[Object(O.jsx)("i",{className:"feather icon-external-link"}),"Abrir Documento"]})]})]},a)})})},oe=["grey","green","orange","blue","black"],ie=function(e){let{isOpen:a,onToggle:t,activeStatuses:s,onStatusToggle:o,dataDe:i,dataAte:n,onDateDeChange:l,onDateAteChange:c,onClear:r}=e;var d=s.length>0||i||n;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("button",{type:"button",className:"advanced-filters__toggle"+(a?" advanced-filters__toggle--open":""),onClick:t,children:[Object(O.jsx)("i",{className:"feather icon-filter"}),"Filtros",d&&Object(O.jsxs)("span",{style:{marginLeft:4,color:"#2B7FB9",fontWeight:700},children:["(",s.length+(i?1:0)+(n?1:0),")"]}),Object(O.jsx)("i",{className:"feather icon-chevron-down"})]}),Object(O.jsx)("div",{className:"advanced-filters"+(a?" advanced-filters--open":""),children:Object(O.jsxs)("div",{className:"advanced-filters__body",children:[Object(O.jsxs)("div",{className:"advanced-filters__group",children:[Object(O.jsx)("span",{className:"advanced-filters__label",children:"Estado"}),Object(O.jsx)("div",{className:"advanced-filters__status-row",children:oe.map(function(e){var a=-1!==s.indexOf(e);return Object(O.jsx)("div",{className:"filter-status-btn"+(a?" filter-status-btn--active":""),onClick:function(){o(e)},children:Object(O.jsx)(W,{colorx:e})},e)})})]}),Object(O.jsxs)("div",{className:"advanced-filters__group",children:[Object(O.jsx)("span",{className:"advanced-filters__label",children:"De"}),Object(O.jsx)("input",{type:"date",className:"form-control form-control-sm",value:i,onChange:function(e){l(e.target.value)},style:{width:150}})]}),Object(O.jsxs)("div",{className:"advanced-filters__group",children:[Object(O.jsx)("span",{className:"advanced-filters__label",children:"At\xe9"}),Object(O.jsx)("input",{type:"date",className:"form-control form-control-sm",value:n,onChange:function(e){c(e.target.value)},style:{width:150}})]}),d&&Object(O.jsxs)("button",{type:"button",className:"advanced-filters__clear",onClick:r,children:[Object(O.jsx)("i",{className:"feather icon-x",style:{marginRight:3}}),"Limpar"]})]})})]})};t(859);const ne="/processos/exclusaointerdicao";function le(e){let{uploadList:a,columns:t,listAno:i,data:r,modalOpen:d}=e;const[j,u]=Object(o.useState)(""),[p,m]=Object(o.useState)(""),x=Object(o.useRef)(null),{permissoes:_}=Object(v.a)(),[N,D]=Object(o.useState)(),[C,I]=Object(o.useState)(!1),[S,A]=Object(o.useState)([]),[E,R]=Object(o.useState)(""),[T,P]=Object(o.useState)("");var w=Object(o.useMemo)(function(){var e=r;return S.length>0&&(e=e.filter(function(e){return-1!==S.indexOf(e.colorx)})),E&&(e=e.filter(function(e){return e.DATA&&e.DATA>=E})),T&&(e=e.filter(function(e){return e.DATA&&e.DATA<=T})),e},[r,S,E,T]);const{getTableProps:F,getTableBodyProps:q,headerGroups:k,prepareRow:L,globalFilter:M,setGlobalFilter:G,page:U,canPreviousPage:z,canNextPage:B,pageOptions:H,pageCount:V,gotoPage:X,nextPage:J,previousPage:Z,setPageSize:K,state:{pageIndex:Q,pageSize:W}}=Object(b.useTable)({columns:t,data:w,initialState:{pageIndex:0,pageSize:10}},b.useGlobalFilter,b.useSortBy,b.usePagination);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(n.a,{className:"mb-3",children:[Object(O.jsxs)(l.a,{md:3,className:"d-flex align-items-center",children:["Mostrar",Object(O.jsx)("select",{className:"form-control w-auto mx-2",value:W,onChange:e=>{K(Number(e.target.value))},children:[5,10,20,30,40,50].map(e=>Object(O.jsx)("option",{value:e,children:e},e))})]}),Object(O.jsxs)(l.a,{md:9,className:"d-flex justify-content-end",children:[Object(O.jsxs)("div",{className:"d-flex align-items-center mr-2",children:[Object(O.jsx)("div",{className:"d-flex",children:Object(O.jsxs)("div",{className:"d-flex align-items-center mr-1",children:[Object(O.jsxs)("span",{className:"floating-label",htmlFor:"Name",children:["Ano:",Object(O.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(O.jsxs)("select",{onChange:e=>{var t;t=e.target.value,a(t)},className:"form-control",id:"perfil",required:!0,"aria-required":"true",children:[Object(O.jsx)("option",{value:"",children:" Selecione um Ano "}),i.map(e=>Object(O.jsx)("option",{value:e,children:e},e))]})]})}),""!==j||""!==p?Object(O.jsx)("div",{style:{cursor:"pointer"},onClick:()=>{u(""),m(""),a()},className:"ml-2",children:Object(O.jsx)("i",{className:"feather icon-x-circle"})}):""]}),Object(O.jsx)(g,{filter:M,setFilter:G}),Object(O.jsx)("div",{className:"ml-2",children:Object(O.jsx)(ie,{isOpen:C,onToggle:function(){I(!C)},activeStatuses:S,onStatusToggle:function(e){A(function(a){return-1!==a.indexOf(e)?a.filter(function(a){return a!==e}):a.concat([e])})},dataDe:E,dataAte:T,onDateDeChange:R,onDateAteChange:P,onClear:function(){A([]),R(""),P("")}})}),0==Object(y.s)(ne,_,"Criar")?null:Object(O.jsxs)(c.a,{variant:"primary",className:"btn-sm btn-round has-ripple ml-2",onClick:d,children:[Object(O.jsx)("i",{className:"feather icon-plus"})," Adicionar"]})]})]}),Object(O.jsxs)(f.a,Object(s.a)(Object(s.a)({ref:x,striped:!0,bordered:!0,hover:!0,responsive:!0},F()),{},{children:[Object(O.jsx)("thead",{children:k.map(e=>Object(O.jsx)("tr",Object(s.a)(Object(s.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map(e=>Object(O.jsxs)("th",Object(s.a)(Object(s.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),Object(O.jsx)("span",{children:e.isSorted?e.isSortedDesc?Object(O.jsx)("span",{className:"feather icon-arrow-down text-muted float-right"}):Object(O.jsx)("span",{className:"feather icon-arrow-up text-muted float-right"}):""})]})))})))}),Object(O.jsx)("tbody",Object(s.a)(Object(s.a)({},q()),{},{children:U.map((e,a)=>(L(e),Object(O.jsx)("tr",Object(s.a)(Object(s.a)({},e.getRowProps()),{},{children:e.cells.map(e=>{const a=e.column.centered;return Object(O.jsx)("td",Object(s.a)(Object(s.a)({},e.getCellProps()),{},{className:a?"text-center":"text-right",children:e.render("Cell")}))})}))))}))]})),Object(O.jsxs)(n.a,{className:"justify-content-between",children:[Object(O.jsx)(l.a,{children:Object(O.jsxs)("span",{className:"d-flex align-items-center",children:["P\xe1gina"," ",Object(O.jsxs)("strong",{children:[" ",Q+1," de ",H.length," "]})," ","| Ir para a p\xe1gina:"," ",Object(O.jsx)("input",{type:"number",className:"form-control ml-2",defaultValue:Q+1,onChange:e=>{const a=e.target.value?Number(e.target.value)-1:0;X(a)},style:{width:"100px"}})]})}),Object(O.jsx)(l.a,{children:Object(O.jsxs)(h.a,{className:"justify-content-end",children:[Object(O.jsx)(h.a.First,{onClick:()=>X(0),disabled:!z}),Object(O.jsx)(h.a.Prev,{onClick:()=>Z(),disabled:!z}),Object(O.jsx)(h.a.Next,{onClick:()=>J(),disabled:!B}),Object(O.jsx)(h.a.Last,{onClick:()=>X(V-1),disabled:!B})]})})]})]})}a.default=()=>{const{permissoes:e,user:a,popUp_simnao:t}=Object(v.a)(),s=Object(_.i)(),[u,b]=(Object(_.g)(),Object(o.useState)(null)),{popUp_removerItem:g,popUp_alertaOK:h}=Object(v.a)(),[f,D]=Object(o.useState)("");var C=(new Date).toJSON().slice(0,10);const[S,E]=Object(o.useState)(""),[R,T]=Object(o.useState)(!1),[P,w]=Object(o.useState)(!1);let F="";const q=Object(o.useRef)(null),k=Object(o.useRef)(null),U=e=>{},z=i.a.useMemo(()=>[{Header:"Estado",accessor:"COLOR_STATUS",centered:!1},{Header:"Refer\xeancia",accessor:"REF",centered:!1},{Header:"Despacho",accessor:"TIPO_DESPACHO",centered:!0},{Header:"Entidade Decisora",accessor:"ENTIDADEREGISTO",centered:!0},{Header:"Pessoa",accessor:"PESSOAREGISTO",centered:!0},{Header:"Visado",accessor:"PESSOA",centered:!0},{Header:"Data",accessor:"DATA2",centered:!0},{Header:"A\xe7\xf5es",accessor:"action",centered:!0}],[]),[B,V]=Object(o.useState)(""),[X,J]=Object(o.useState)(""),[Z,Q]=Object(o.useState)(""),[Y,$]=Object(o.useState)(""),[ae,te]=Object(o.useState)([]),[oe,ie]=Object(o.useState)(""),[ce,re]=Object(o.useState)(""),[de,je]=Object(o.useState)([]),[ue,pe]=Object(o.useState)({}),[me,be]=Object(o.useState)(!1),[Oe,ge]=Object(o.useState)([]);async function he(){try{const a=await x.a.get("/sgigjpessoa");if("200"==a.status){for(var e=0;e<a.data.length;e++)a.data[e].value=a.data[e].ID,a.data[e].label=a.data[e].NOME;ge(a.data)}}catch(a){console.error(a.response)}}const[fe,xe]=Object(o.useState)([]);const[ve,_e]=Object(o.useState)([]);const[ye,Ne]=Object(o.useState)([]);const[De,Ce]=Object(o.useState)([]);const[Ie,Se]=Object(o.useState)([]);const[Ae,Ee]=Object(o.useState)([]);const[Re,Te]=Object(o.useState)([]);const[Pe,we]=Object(o.useState)(""),[Fe,qe]=Object(o.useState)([]);async function ke(a){let t,o=[];try{if(t=a?await x.a.get("/sgigjprocessoexclusao?ENTIDADE_ID=".concat(s.id,"&ano=").concat(a)):await x.a.get("/sgigjprocessoexclusao?ENTIDADE_ID=".concat(s.id)),"200"==t.status){console.log(t.data);for(var n=0;n<t.data.length;n++){var l,c,r,d,j,u,p,b,g;const a=t.data[n].ID;t.data[n].id=t.data[n].ID,t.data[n].DATA2=Object(y.f)(t.data[n].DATA);let s=new Date(t.data[n].DATA);s&&!o.includes(s.getFullYear())&&o.push(s.getFullYear()),t.data[n].PESSOA=t.data[n].sgigjrelinterveniente.map(e=>e.sgigjpessoa.NOME).join(", "),t.data[n].ORIGEM=null===(l=t.data[n].sgigjprorigemtp)||void 0===l?void 0:l.DESIG,t.data[n].PESSOAREGISTO=null===(c=t.data[n].sgigjrelpessoaentidade)||void 0===c||null===(r=c.sgigjpessoa)||void 0===r?void 0:r.NOME,t.data[n].ENTIDADEREGISTO=null===(d=t.data[n])||void 0===d||null===(j=d.sgigjentidade)||void 0===j?void 0:j.DESIG;const x=t.data[n];let ae="",te="grey",le=!1;if(t.data[n].ENCERRAMENTO)te="black";else if((null===(u=t.data[n])||void 0===u?void 0:u.sgigjdespachofinal.length)>0)ae="Despacho Final";else if((null===(p=t.data[n])||void 0===p?void 0:p.sgigjprocessodespacho.length)>0){var h,f,v,_,N,D,C,I,S,A,E,R,T;if("I"==(null===(h=t.data[n])||void 0===h||null===(f=h.sgigjprocessodespacho[0])||void 0===f?void 0:f.TIPO_PROCESSO_EXCLUSAO)&&(ae="Inqu\xe9rito"),"C"==(null===(v=t.data[n])||void 0===v||null===(_=v.sgigjprocessodespacho[0])||void 0===_?void 0:_.TIPO_PROCESSO_EXCLUSAO)&&(ae="Contraordena\xe7\xe3o"),"A"==(null===(N=t.data[n])||void 0===N||null===(D=N.sgigjprocessodespacho[0])||void 0===D?void 0:D.TIPO_PROCESSO_EXCLUSAO)&&(ae="Averigua\xe7\xe3o Sum\xe1ria"),null!=(null===(C=t.data[n])||void 0===C||null===(I=C.sgigjprocessodespacho[0])||void 0===I?void 0:I.URL_DOC_GERADO)&&(te="green"),(null===(S=t.data[n])||void 0===S||null===(A=S.sgigjprocessodespacho[0])||void 0===A?void 0:A.sgigjrelprocessoinstrutor.length)>0)if((null===(E=t.data[n])||void 0===E||null===(R=E.sgigjprocessodespacho[0])||void 0===R||null===(T=R.sgigjrelprocessoinstrutor[0])||void 0===T?void 0:T.sgigjrelprocessoinstrucao.length)>0){var P,w,F,q,k,L,M,G,U,z,B,H,V,X,J,Z,K,Q,Y,$,ee,se,oe,ie;if(null!=(null===(P=t.data[n])||void 0===P||null===(w=P.sgigjprocessodespacho[0])||void 0===w||null===(F=w.sgigjrelprocessoinstrutor[0])||void 0===F||null===(q=F.sgigjrelprocessoinstrucao[0])||void 0===q?void 0:q.RELATORIO_FINAL)&&(te="orange"),(null===(k=t.data[n])||void 0===k||null===(L=k.sgigjprocessodespacho[0])||void 0===L||null===(M=L.sgigjrelprocessoinstrutor[0])||void 0===M||null===(G=M.sgigjrelprocessoinstrucao[0])||void 0===G?void 0:G.sgigjprocessodespacho.length)>0)null!=(null===(V=t.data[n])||void 0===V||null===(X=V.sgigjprocessodespacho[0])||void 0===X||null===(J=X.sgigjrelprocessoinstrutor[0])||void 0===J||null===(Z=J.sgigjrelprocessoinstrucao[0])||void 0===Z?void 0:Z.sgigjprocessodespacho[0].URL_DOC_GERADO)&&(te="blue");if((null===(U=t.data[n])||void 0===U||null===(z=U.sgigjprocessodespacho[0])||void 0===z||null===(B=z.sgigjrelprocessoinstrutor[0])||void 0===B||null===(H=B.sgigjrelprocessoinstrucao[0])||void 0===H?void 0:H.sgigjdespachointerrompido.length)>0)le=!0,"A"!=(null===(K=t.data[n])||void 0===K||null===(Q=K.sgigjprocessodespacho[0])||void 0===Q||null===(Y=Q.sgigjrelprocessoinstrutor[0])||void 0===Y||null===($=Y.sgigjrelprocessoinstrucao[0])||void 0===$?void 0:$.sgigjdespachointerrompido[0].TIPO)&&"P"!=(null===(ee=t.data[n])||void 0===ee||null===(se=ee.sgigjprocessodespacho[0])||void 0===se||null===(oe=se.sgigjrelprocessoinstrutor[0])||void 0===oe||null===(ie=oe.sgigjrelprocessoinstrucao[0])||void 0===ie?void 0:ie.sgigjdespachointerrompido[0].TIPO)||(te="blue")}}t.data[n].TIPO_DESPACHO=ae,t.data[n].action=Object(O.jsxs)(i.a.Fragment,{children:[0==Object(y.s)(ne,e,"Ler")?null:Object(O.jsx)(m.b,{to:"#",title:Object(y.u)(ne,e,"Ler"),onClick:()=>Ze(x),className:"text-primary mx-1",children:Object(O.jsx)("i",{className:"text-primary "+Object(y.t)(ne,e,"Ler")})}),0==Object(y.s)(ne,e,"Editar")?null:"CONCLUIR"!=t.data[n].ESTADO_DEPACHO_INICIAL&&Object(O.jsx)(m.b,{to:"#",title:Object(y.u)(ne,e,"Editar"),onClick:()=>Ke(x),className:"text-primary mx-1",children:Object(O.jsx)("i",{className:"text-primary "+Object(y.t)(ne,e,"Editar")})}),null!=(null===(b=x.sgigjprocessodespacho[0])||void 0===b?void 0:b.URL_DOC_GERADO)&&""!=(null===(g=x.sgigjprocessodespacho[0])||void 0===g?void 0:g.URL_DOC_GERADO)&&0==Object(y.s)(ne,e,"DespachoFinal")?null:"grey"!=te&&Object(O.jsx)(m.b,{to:"#",title:Object(y.u)(ne,e,"Despacho"),onClick:()=>{var e;return window.open((null===(e=x.sgigjprocessodespacho[0])||void 0===e?void 0:e.URL_DOC_GERADO)+"?alt=media&token=0")},className:"text-primary mx-1",children:Object(O.jsx)("i",{className:"text-primary  feather icon-file-text"})}),0==Object(y.s)(ne,e,"DespachoFinal")?null:"orange"==te&&Object(O.jsx)(m.b,{to:"#",title:"Despacho Decisao",onClick:()=>va(x),className:"text-primary mx-1",children:Object(O.jsx)("i",{style:{cursor:"pointer"},className:"text-primary "+Object(y.t)(ne,e,"DespachoFinal")})}),0==Object(y.s)(ne,e,"DespachoFinal")?null:"orange"==te&&Object(O.jsx)(m.b,{to:"#",title:"Encerrar",onClick:()=>{var e,a,t;ma(null===x||void 0===x?void 0:x.ID),Oa(null===x||void 0===x||null===(e=x.sgigjprocessodespacho[0])||void 0===e||null===(a=e.sgigjrelprocessoinstrutor[0])||void 0===a||null===(t=a.sgigjrelprocessoinstrucao[0])||void 0===t?void 0:t.ID),na(!0)},className:"text-primary mx-1",children:Object(O.jsx)("i",{style:{cursor:"pointer"},className:"text-primary feather icon-paperclip"})}),0==Object(y.s)(ne,e,"DespachoInicial")?null:"grey"==te&&"CONCLUIR"==t.data[n].ESTADO_DEPACHO_INICIAL&&Object(O.jsx)(m.b,{to:"#",title:Object(y.u)(ne,e,"DespachoInicial"),onClick:()=>we(a),className:"text-primary mx-1",children:Object(O.jsx)("i",{className:"text-primary "+Object(y.t)(ne,e,"DespachoInicial")})}),le?0==Object(y.s)(ne,e,"Interromper")?null:"green"==te&&Object(O.jsx)(m.b,{to:"#",title:Object(y.u)(ne,e,"Interromper"),onClick:()=>_a(x),className:"text-primary mx-1",children:Object(O.jsx)("i",{className:"text-primary "+Object(y.t)(ne,e,"Interromper")})}):0==Object(y.s)(ne,e,"Instrucao")?null:"green"==te&&Object(O.jsx)(m.b,{to:"#",title:Object(y.u)(ne,e,"Instrucao"),onClick:()=>ea(x),className:"text-primary mx-1",children:Object(O.jsx)("i",{className:"text-primary "+Object(y.t)(ne,e,"Instrucao")})}),0==Object(y.s)(ne,e,"Eliminar")?null:Object(O.jsx)(m.b,{to:"#",title:Object(y.u)(ne,e,"Eliminar"),onClick:()=>$e(a),className:"text-danger",children:Object(O.jsx)("i",{className:""+Object(y.t)(ne,e,"Eliminar")})})]}),t.data[n].colorx=te,t.data[n].COLOR_STATUS=Object(O.jsx)(W,{colorx:te})}var le=t.data.filter(e=>"blue"!=e.colorx&&"black"!=e.colorx);qe(le)}0==ae.length&&te(o)}catch(ce){console.error(ce.response)}}const[Le,Me]=Object(o.useState)(null),[Ge,Ue]=Object(o.useState)({}),[ze,Be]=Object(o.useState)("Despacho"),[He,Ve]=Object(o.useState)(""),[Xe,Je]=Object(o.useState)(!1),Ze=async e=>{try{const c=await x.a.get("/sgigjprocessoexclusao/"+e.id);if("200"==c.status&&c.data.length>0){var a,t,s,o,i;c.data[0].id=c.data[0].ID,c.data[0].DATA2=Object(y.f)(c.data[0].DATA),c.data[0].PESSOA=c.data[0].sgigjrelinterveniente.map(e=>e.sgigjpessoa.NOME).join(", "),c.data[0].ORIGEM=null===(a=c.data[0].sgigjprorigemtp)||void 0===a?void 0:a.DESIG,c.data[0].PESSOAREGISTO=null===(t=c.data[0].sgigjrelpessoaentidade)||void 0===t||null===(s=t.sgigjpessoa)||void 0===s?void 0:s.NOME,c.data[0].ENTIDADEREGISTO=null===(o=c.data[0])||void 0===o||null===(i=o.sgigjentidade)||void 0===i?void 0:i.DESIG;let e=null,r=null,d=null;var n,l;if(c.data[0].sgigjprocessodespacho.length>0)if(null!=c.data[0].sgigjprocessodespacho[0].URL_DOC_GERADO&&(e={DATA:Object(y.f)(c.data[0].sgigjprocessodespacho[0].DATA),REFERENCIA:c.data[0].sgigjprocessodespacho[0].REFERENCIA,PRAZO:c.data[0].sgigjprocessodespacho[0].PRAZO,OBS:c.data[0].sgigjprocessodespacho[0].OBS,DOC:c.data[0].sgigjprocessodespacho[0].URL_DOC_GERADO,INSTRUTOR:""}),c.data[0].sgigjprocessodespacho[0].sgigjrelprocessoinstrutor.length>0)e.INSTRUTOR=null===(n=c.data[0].sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelpessoaentidade)||void 0===n||null===(l=n.sgigjpessoa)||void 0===l?void 0:l.NOME,c.data[0].sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao.length>0&&(r={list:c.data[0].sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao[0].sgigjrelinstrutorpeca},c.data[0].sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao[0].sgigjprocessodespacho.length>0&&null!=c.data[0].sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao[0].sgigjprocessodespacho[0].URL_DOC_GERADO&&(d={DOC:c.data[0].sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao[0].sgigjprocessodespacho[0].URL_DOC_GERADO,DATA:Object(y.f)(c.data[0].sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao[0].sgigjprocessodespacho[0].DATA),DESICAO:c.data[0].sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao[0].sgigjprocessodespacho[0].sgigjprdecisaotp.TIPO}));c.data[0].despacho=e,c.data[0].instrucao=r,c.data[0].despachofinal=d,console.log(r),Me(c.data[0]),Je(!0),console.log(c.data[0])}}catch(c){console.error(c)}},Ke=e=>{da(!0),ta(!1),Je(!1),pe(e),V(e.PESSOA_ID),J(e.ENTIDADE_ID),Q(e.DESCR),ie(Object(y.e)(e.DATA)),E(e.OBS),re(e.OBS)};async function Qe(e){var a;let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.preventDefault(),be(!0);const o={PESSOAS:de.map(e=>e.ID),DESCR:Z,ENTIDADE_ID:s.id,DATA:oe,OBS:null===k||void 0===k||null===(a=k.current)||void 0===a?void 0:a.value,ESTADO_DEPACHO_INICIAL:t?"CONCLUIR":"GUARDAR"};t?(T(!1),w(!0)):(T(!0),w(!1)),console.log(o);try{"200"==(await x.a.put("/sgigjprocessoexclusao/"+ue.ID,o)).status&&(p.a.success("Documento Guardado!",{duration:4e3}),ke(),be(!1),da(!1))}catch(i){be(!1),console.error(i.response)}}async function We(e){var a;let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&e.preventDefault(),t?(T(!1),w(!0)):(T(!0),w(!1)),be(!0);const o={PESSOAS:de.map(e=>e.ID),DESCR:Z,DATA:oe,ENTIDADE_ID:s.id,OBS:null===q||void 0===q||null===(a=q.current)||void 0===a?void 0:a.value,TIPO:f,ESTADO_DEPACHO_INICIAL:t?"CONCLUIR":"GUARDAR"};console.log(o);try{"200"==(await x.a.post("/sgigjprocessoexclusao",o)).status&&(p.a.success("Documento Guardado!",{duration:4e3}),ke(),be(!1),ta(!1))}catch(i){be(!1),console.error(i.response)}}const Ye=async e=>{let a=!0;try{await x.a.delete("/sgigjprocessoexclusao/"+e)}catch(t){a=!1,console.error(t.response),h("Falha. Tente mais tarde")}return ke(),a},$e=async e=>{g({delete:Ye,id:e})},ea=async e=>{b(e)};Object(o.useEffect)(()=>{F='\n        <p class="MsoNormal" align="center" style="margin: 0cm 0cm 8pt; line-height: 16.866667px; font-size: 11pt; font-family: Calibri, sans-serif; caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0); font-style: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: auto; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none; text-align: center;"><strong><span lang="PT" style="font-size: 20pt; line-height: 18.4px; font-family: Cambria, serif;">'.concat("C"==f?"Comunicado":"Auto de Noticia",'<o:p></o:p></span></strong></p>\n        \n        <p class="MsoNormal" style="margin: 0in; line-height: 107%; text-align: justify; font-size: 15px;"><span style="line-height: 107%; font-size: 24px;">Aos _______ dias do m\xeas de ___ do ano de dois mil e _____ no _____ (identifica\xe7\xe3o do servi\xe7o ou entidade), sito em ______ (localidade), no seguimento de _______ (dilig\xeancia, circunst\xe2ncia ocasional ou den\xfancia), tomei conhecimento e por esta via dou not\xedcia do seguinte:<br>\n        __________________(descri\xe7\xe3o detalhada dos factos com men\xe7\xe3o dos fatores tempo, modo e lugar das ocorr\xeancias).<br>\n        Com os ditos procedimentos os ___________ (autores) incorrem em infra\xe7\xe3o por viola\xe7\xe3o do ____________ (enquadramento legal).<br>\n        \xc9 quanto me cumpre dar not\xed cia e para os devidos e legais efeitos se lavrou o presente auto.<br>\n        A Testemunha: (nome leg\xedvel/n.\xb0 do documento de identifica\xe7\xe3o) ______________________<br>\n        A Testemunha: (nome leg\xedvel/n.\xb0 do documento de identifica\xe7\xe3o) ______________________<br>\n        O (denunciante): ______________________</span></p>'),E(F)},[f]),Object(o.useEffect)(()=>{ke(),he(),async function(){try{const e=await x.a.get("/sgigjprgenero");"200"==e.status&&xe(e.data)}catch(e){console.error(e.response)}}(),async function(){try{const e=await x.a.get("/sgigjprdecisaotp");"200"==e.status&&Ee(e.data)}catch(e){console.error(e.response)}}(),async function(){try{const e=await x.a.get("/sgigjprestadocivil");"200"==e.status&&_e(e.data)}catch(e){console.error(e.response)}}(),async function(){try{const e=await x.a.get("/glbgeografia");"200"==e.status&&Ne(e.data)}catch(e){console.error(e.response)}}(),async function(){try{const e=await x.a.get("/sgigjprdocumentotp");"200"==e.status&&Ce(e.data)}catch(e){console.error(e.response)}}(),async function(){try{const e=await x.a.get("/sgigjentidade");"200"==e.status&&Te(e.data)}catch(e){console.error(e.response)}}(),async function(){try{const e=await x.a.get("/sgigjprcontactotp");"200"==e.status&&Se(e.data)}catch(e){console.error(e.response)}}()},[]);const[aa,ta]=Object(o.useState)(!1),[sa,oa]=Object(o.useState)(!1),[ia,na]=Object(o.useState)(""),[la,ca]=Object(o.useState)(null),[ra,da]=Object(o.useState)(!1),[ja,ua]=Object(o.useState)(!1),[pa,ma]=Object(o.useState)(null),[ba,Oa]=Object(o.useState)(null),[ga,ha]=Object(o.useState)({code:0,value:!1}),[fa,xa]=Object(o.useState)(!1);function va(e){pe(e),xa(!0),console.log("SCV")}function _a(e){pe(e),oa(!0),console.log("SCV")}const[ya,Na]=Object(o.useState)(!1),[Da,Ca]=Object(o.useState)([]);const[Ia,Sa]=Object(o.useState)(),[Aa,Ea]=Object(o.useState)(!1);return Object(O.jsx)(i.a.Fragment,{children:Object(O.jsx)(n.a,{children:Object(O.jsxs)(l.a,{sm:12,children:[Object(O.jsx)(r.a,{children:Object(O.jsx)(r.a.Body,{children:null==u?Object(O.jsx)(le,{listAno:ae,uploadList:ke,columns:z,data:Fe,modalOpen:()=>{var t,s,o,i,n;(J(""),"Casino"==(null===a||void 0===a||null===(t=a.sgigjrelpessoaentidade)||void 0===t||null===(s=t.sgigjentidade)||void 0===s||null===(o=s.sgigjprentidadetp)||void 0===o?void 0:o.DESIG))&&J(null===a||void 0===a||null===(i=a.sgigjrelpessoaentidade)||void 0===i||null===(n=i.sgigjentidade)||void 0===n?void 0:n.ID);ta(!0),da(!1),Je(!1),V(""),V([]),Q(""),ie(""),re(""),0==Object(y.s)(ne,e,"Criar_C")?D("N"):D("C"),F='\n        <p class="MsoNormal" align="center" style="margin: 0cm 0cm 8pt; line-height: 16.866667px; font-size: 11pt; font-family: Calibri, sans-serif; caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0); font-style: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: auto; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none; text-align: center;"><strong><span lang="PT" style="font-size: 12pt; line-height: 18.4px; font-family: Cambria, serif;">'.concat("C"==f?"Comunicado":"Auto de Noticia",'<o:p></o:p></span></strong></p>\n        \n        <p class="MsoNormal" style="margin: 0in; line-height: 107%; text-align: justify; font-size: 15px;"><span style="line-height: 107%; font-size: 24px;">Aos _______ dias do m\xeas de ___ do ano de dois mil e _____ no _____ (identifica\xe7\xe3o do servi\xe7o ou entidade), sito em ______ (localidade), no seguimento de _______ (dilig\xeancia, circunst\xe2ncia ocasional ou den\xfancia), tomei conhecimento e por esta via dou not\xedcia do seguinte:<br>\n        __________________(descri\xe7\xe3o detalhada dos factos com men\xe7\xe3o dos fatores tempo, modo e lugar das ocorr\xeancias).<br>\n        Com os ditos procedimentos os ___________ (autores) incorrem em infra\xe7\xe3o por viola\xe7\xe3o do ____________ (enquadramento legal).<br>\n        \xc9 quanto me cumpre dar not\xedcia e para os devidos e legais efeitos se lavrou o presente auto.<br>\n        A Testemunha: (nome leg\xedvel/n.\xb0 do documento de identifica\xe7\xe3o) ______________________<br>\n        A Testemunha: (nome leg\xedvel/n.\xb0 do documento de identifica\xe7\xe3o) ______________________<br>\n        O (denunciante): ______________________</span></p>'),E(F)},pageAcess:ne,permissoes:e}):Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(L,{decisaolist:Ae,uploadlist:ke,setinstrucaoitem:b,pageAcess:ne,permissoes:e,item:u})})})}),Object(O.jsxs)(d.a,{size:"xl",show:aa,onHide:()=>ta(!1),children:[Object(O.jsx)(d.a.Header,{closeButton:!0,children:Object(O.jsx)(d.a.Title,{as:"h5",children:"Criar"})}),Object(O.jsx)(d.a.Body,{className:"newuserbox",children:Object(O.jsx)("form",{id:"criarItem",onSubmit:We,children:Object(O.jsxs)(n.a,{children:[Object(O.jsx)(l.a,{sm:12,children:Object(O.jsxs)(j.a.Group,{style:{display:"flex",justifyContent:"center"},children:[Object(O.jsx)(j.a.Check,{inline:!0,custom:!0,required:!0,type:"radio",label:"Comunicado",name:"supportedRadio",id:"group",defaultChecked:"C"==f,disabled:!Object(y.s)(ne,e,"Criar_C"),onChange:()=>D("C")}),Object(O.jsx)(j.a.Check,{inline:!0,custom:!0,required:!0,disabled:!Object(y.s)(ne,e,"Criar_N"),type:"radio",label:"Auto de Not\xedcia",name:"supportedRadio",id:"collapse",defaultChecked:"N"==f,onChange:()=>D("N")})]})}),Object(O.jsx)(l.a,{sm:4,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Refer\xeancia ",Object(O.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(O.jsx)("input",{disabled:!0,type:"text",className:"form-control",id:"Name",value:"*",required:!0})]})}),Object(O.jsx)(l.a,{sm:6,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Data ",Object(O.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(O.jsx)("input",{max:C,type:"date",onChange:e=>{ie(e.target.value)},defaultValue:oe,className:"form-control",placeholder:"Data...",required:!0})]})}),Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("div",{className:"col-sm-12",children:Object(O.jsx)(I.a,{editorRef:U,value:S,config:{readonly:!1},ref:q,onChange:e=>(F=e,void console.log(F))})})})]})})}),Object(O.jsxs)(d.a.Footer,{children:[Object(O.jsx)(c.a,{variant:"danger",onClick:()=>ta(!1),children:"Fechar"}),me?Object(O.jsx)(c.a,{variant:"primary",children:R?"Guardando":"Guardar"}):Object(O.jsx)(c.a,{type:"button",form:"criarItem",variant:"primary",onClick:e=>We(e,!1),children:"Guardar"}),me?Object(O.jsx)(c.a,{variant:"primary",children:P?"Concluindo":"Concluir"}):Object(O.jsx)(c.a,{type:"submit",form:"criarItem",variant:"primary",children:"Concluir"})]})]}),Object(O.jsxs)(d.a,{size:"lg",show:ra,onHide:()=>da(!1),children:[Object(O.jsx)(d.a.Header,{closeButton:!0,children:Object(O.jsx)(d.a.Title,{as:"h5",children:"Editar"})}),Object(O.jsx)(d.a.Body,{className:"newuserbox",children:Object(O.jsx)("form",{id:"editarItem",onSubmit:Qe,children:Object(O.jsxs)(n.a,{children:[Object(O.jsx)(l.a,{sm:4,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Refer\xeancia ",Object(O.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(O.jsx)("input",{disabled:!0,type:"text",className:"form-control",id:"Name",value:ue.REF,required:!0})]})}),Object(O.jsx)(l.a,{sm:6,children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsxs)("label",{className:"floating-label",htmlFor:"Name",children:["Data ",Object(O.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(O.jsx)("input",{max:C,type:"date",onChange:e=>{ie(e.target.value)},defaultValue:oe,className:"form-control",placeholder:"Data...",required:!0})]})}),Object(O.jsx)("div",{className:"col-sm-12",children:Object(O.jsx)("div",{className:"form-group fill",children:Object(O.jsx)(I.a,{editorRef:U,value:S,config:{readonly:!1},ref:k})})})]})})}),Object(O.jsxs)(d.a.Footer,{children:[Object(O.jsx)(c.a,{variant:"danger",onClick:()=>da(!1),children:"Fechar"}),me?Object(O.jsx)(c.a,{variant:"primary",children:P?"Concluindo":"Concluir"}):Object(O.jsx)(c.a,{form:"editarItem",variant:"primary",onClick:e=>Qe(e,!0),children:"Concluir"}),me?Object(O.jsx)(c.a,{variant:"primary",children:R?"Guardando":"Guardar"}):Object(O.jsx)(c.a,{type:"submit",form:"editarItem",variant:"primary",children:"Guardar"})]})]}),Object(O.jsxs)(d.a,{size:"lg",show:Xe,onHide:()=>Je(!1),children:[Object(O.jsxs)(d.a.Header,{style:{border:"0"},closeButton:!0,children:[Object(O.jsx)(d.a.Title,{as:"h5"}),Object(O.jsx)(d.a.Title,{as:"h5",children:"Processo"})]}),null!=Le&&Object(O.jsxs)(d.a.Body,{children:[Object(O.jsx)(ee,{colorx:Le.colorx,variant:"detail"}),Object(O.jsxs)(n.a,{children:[Object(O.jsxs)(l.a,{xl:4,className:"task-detail-right",children:[Object(O.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:Object(O.jsxs)("span",{children:[Object(O.jsx)("i",{className:"feather icon-shield m-r-5"}),"Pedido"]})}),Object(O.jsx)("div",{style:{borderBottom:"1px solid #d2b32a",borderTop:"1px solid #d2b32a",marginBottom:"20px",marginTop:"6px",paddingTop:"20px"},children:Object(O.jsxs)("div",{style:{width:"100%",flexDirection:"column ",display:"flex",justifyContent:"space-between",marginBottom:"15px"},children:[Object(O.jsxs)("span",{children:[Object(O.jsx)("i",{className:"feather icon-map-pin m-r-5"}),"Visado"]}),Object(O.jsx)("span",{style:{color:"#6c757d"},children:Le.PESSOA})]})}),Object(O.jsxs)("div",{style:{borderBottom:"1px solid #d2b32a",marginBottom:"20px"},children:[Object(O.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",marginBottom:"15px"},children:[Object(O.jsxs)("span",{children:[Object(O.jsx)("i",{className:"feather icon-map-pin m-r-5"}),"Entidade Decisora"]}),Object(O.jsx)("span",{style:{color:"#6c757d"},children:"IGJ"})]}),Object(O.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",marginBottom:"15px"},children:[Object(O.jsxs)("span",{children:[Object(O.jsx)("i",{className:"feather icon-map-pin m-r-5"}),"Pedido por"]}),Object(O.jsx)("span",{style:{color:"#6c757d"},children:Le.PESSOAREGISTO})]}),Object(O.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",marginBottom:"15px"},children:[Object(O.jsxs)("span",{children:[Object(O.jsx)("i",{className:"feather icon-map-pin m-r-5"}),"Pedido Pedido"]}),Object(O.jsx)("span",{style:{color:"#6c757d"},children:Le.DATA2})]})]}),Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",marginBottom:"15px"},children:[Object(O.jsxs)("span",{children:[Object(O.jsx)("i",{className:"feather icon-phone m-r-5"}),"Descri\xe7\xe3o"]}),Object(O.jsx)("span",{style:{color:"#6c757d"},children:Le.DESCR})]}),null!=Le.URL_DOC_GERADO&&Object(O.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",marginBottom:"15px"},children:Object(O.jsx)("a",{target:"_blank",href:(null===Le||void 0===Le?void 0:Le.URL_DOC_GERADO)+"?alt=media&token=0",children:Object(O.jsx)("span",{style:{display:"flex",fontWeight:"bold"},children:"Abrir Pedido"})})})]})]}),Object(O.jsx)(l.a,{xl:8,className:"task-detail-right",children:Object(O.jsx)(se,{processo:Le})})]})]}),Object(O.jsx)(d.a.Footer,{children:Object(O.jsx)(c.a,{variant:"danger",onClick:()=>Je(!1),children:"Fechar"})})]}),Object(O.jsxs)(d.a,{size:"lg",show:sa,onHide:()=>oa(!1),children:[Object(O.jsx)(d.a.Header,{closeButton:!0,children:Object(O.jsx)(d.a.Title,{as:"h5",children:"Interropido Final"})}),Object(O.jsx)(d.a.Body,{className:"newuserbox w-100",children:Object(O.jsx)("form",{className:"w-100",id:"criarItem",onSubmit:function(e){var s,o,i,n,l,c,r;async function d(e){const a=null===ue||void 0===ue?void 0:ue.sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao[0].ID,t={OBS_IG:Y,APLICAR:e};let s=!1;try{"200"==(await x.a.put("/sgigjrelprocessoinstrucao/".concat(a,"/interrompidofinal"),t)).status&&(p.a.success("Documento Guardado!",{duration:4e3}),ke(),oa(!1),s=!0)}catch(o){console.error(o.response)}return s}if(e.preventDefault(),(null===ue||void 0===ue||null===(s=ue.sgigjprocessodespacho)||void 0===s?void 0:s.length)>0&&(null===ue||void 0===ue||null===(o=ue.sgigjprocessodespacho[0])||void 0===o?void 0:o.sgigjrelprocessoinstrutor.length)>0&&(null===ue||void 0===ue||null===(i=ue.sgigjprocessodespacho[0])||void 0===i||null===(n=i.sgigjrelprocessoinstrutor[0])||void 0===n?void 0:n.sgigjrelprocessoinstrucao.length)>0&&(null===ue||void 0===ue||null===(l=ue.sgigjprocessodespacho[0])||void 0===l||null===(c=l.sgigjrelprocessoinstrutor[0])||void 0===c||null===(r=c.sgigjrelprocessoinstrucao[0])||void 0===r?void 0:r.sgigjdespachointerrompido.length)>0){const e=ue.sgigjprocessodespacho[0].sgigjrelprocessoinstrutor[0].sgigjrelprocessoinstrucao[0].sgigjdespachointerrompido[0].TIPO;console.log(e),"P0"==e&&t("Deseja confirmar a prescri\xe7\xe3o?",{sim:()=>d("S"),nao:()=>d("N"),id:null===a||void 0===a?void 0:a.ID}),"A0"==e&&t("Deseja confirmar o arquivamento?",{sim:()=>d("S"),nao:()=>d("N"),id:null===a||void 0===a?void 0:a.ID})}},children:Object(O.jsx)(n.a,{children:Object(O.jsx)("div",{className:"col-sm-12",children:Object(O.jsxs)("div",{className:"form-group fill",children:[Object(O.jsxs)("label",{className:"floating-label",htmlFor:"Address",children:["Descri\xe7\xe3o ",Object(O.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(O.jsx)("textarea",{maxLength:"64000",className:"form-control",onChange:e=>{$(e.target.value)},defaultValue:Y,rows:"3",placeholder:"Descri\xe7\xe3o...",required:!0})]})})})})}),Object(O.jsxs)(d.a.Footer,{children:[Object(O.jsx)(c.a,{variant:"danger",onClick:()=>oa(!1),children:"Fechar"}),me?Object(O.jsx)(c.a,{variant:"primary",children:"Guardando"}):Object(O.jsx)(c.a,{type:"submit",form:"criarItem",variant:"primary",children:"Guardar"})]})]}),Object(O.jsx)(N.a,{generolist:fe,estadocivillist:ve,glbgeografialist:ye,documentolist:De,contactolist:Ie,pessoaopenDO:ga,uploadpessoa:he}),Object(O.jsx)(A.a,{Open:ya,setOpen:Na,list:Da}),Object(O.jsx)(d.a,{size:"xl",show:Aa,onHide:()=>Ea(!1),children:Object(O.jsx)("iframe",{height:1e3,src:"".concat(Ia),title:"pdf-viewer",width:"100%s"})}),Object(O.jsx)(G,{uploadlist:ke,decisaolist:Ae,isdepachofinal:fa,setisdepachofinal:xa,processo:ue}),Object(O.jsx)(H,{}),Object(O.jsx)(M,{decisaolist:Ae,pessoalist:Oe,uploadlist:ke,processo_ID:Pe,setprocesso_ID:we}),Object(O.jsx)(K,{decisaolist:Ae,pessoalist:Oe,uploadlist:ke,processo_ID:pa,isOpenEncerrar:ia,setIsOpenEncerrar:na,instrucao_ID:ba})]})})})}}}]);
//# sourceMappingURL=6.55726492.chunk.js.map