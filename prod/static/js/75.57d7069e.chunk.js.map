{"version":3,"sources":["../node_modules/react-bootstrap/esm/CardContext.js","../node_modules/react-bootstrap/esm/CardImg.js","../node_modules/react-bootstrap/esm/Card.js","pages/notificacoes/index.js"],"names":["context","React","createContext","displayName","_excluded","CardImg","forwardRef","_ref","ref","bsPrefix","className","variant","_ref$as","as","Component","props","_objectWithoutPropertiesLoose","prefix","useBootstrapPrefix","createElement","_extends","classNames","defaultProps","DivStyledAsH5","divWithClassName","DivStyledAsH6","CardBody","createWithBsPrefix","CardTitle","CardSubtitle","CardLink","CardText","CardHeader","CardFooter","CardImgOverlay","Card","bg","text","border","body","children","cardContext","useMemo","cardHeaderBsPrefix","CardContext","Provider","value","Img","Title","Subtitle","Body","Link","Text","Header","Footer","ImgOverlay","DashAnalytics","popUp_removerItem","popUp_alertaOK","user","uploadlistnotificacao","useAuth","history","useHistory","newdata","setnewdata","useState","avatar","setAvatar","time","settime","moment","tz","gtm","format","location","useLocation","getUrlPhoto","notification","_notification$autoexc","url","URL_FOTO","autoexclusao","_notification$autoexc2","avatarLogo","async","uploadlist","response","api","get","status","data","i","length","_data$i","_data$i$sgigjpessoa","_data$i2","_data$i2$sgigjpessoa","_data$i3","_data$i3$sgigjpessoa","sgigjpessoa","sgigjrelpessoaentidade","glbuser","console","log","err","error","removeNotification","res","delete","idx","useEffect","undefined","USERNAME","FLAG_NOTIFICACAO","push","_jsx","Fragment","Row","Col","_jsxs","style","marginBottom","map","e","_e$sgigjpessoa","ListGroup","Item","sgigjrelnotificacaovizualizado","onClick","autoexclusaoId","JSON","parse","localStorage","setItem","IdAutoexclusao","pathname","window","reload","closeNotificationAndSetIDToLocalStorage","EXTRA","URL","color","cursor","width","height","src","alt","top","position","NOME","marginLeft","timerMaker2","DT_REGISTO","MSG","ID","right","title","id","removeItem","class"],"mappings":"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","file":"static/js/75.57d7069e.chunk.js","sourcesContent":["import React from 'react';\nvar context = /*#__PURE__*/React.createContext(null);\ncontext.displayName = 'CardContext';\nexport default context;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"bsPrefix\", \"className\", \"variant\", \"as\"];\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar defaultProps = {\n  variant: null\n};\nvar CardImg = /*#__PURE__*/React.forwardRef( // Need to define the default \"as\" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595\nfunction (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      variant = _ref.variant,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'img' : _ref$as,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var prefix = useBootstrapPrefix(bsPrefix, 'card-img');\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref,\n    className: classNames(variant ? prefix + \"-\" + variant : prefix, className)\n  }, props));\n});\nCardImg.displayName = 'CardImg';\nCardImg.defaultProps = defaultProps;\nexport default CardImg;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"bsPrefix\", \"className\", \"bg\", \"text\", \"border\", \"body\", \"children\", \"as\"];\nimport classNames from 'classnames';\nimport React, { useMemo } from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport createWithBsPrefix from './createWithBsPrefix';\nimport divWithClassName from './divWithClassName';\nimport CardContext from './CardContext';\nimport CardImg from './CardImg';\nvar DivStyledAsH5 = divWithClassName('h5');\nvar DivStyledAsH6 = divWithClassName('h6');\nvar CardBody = createWithBsPrefix('card-body');\nvar CardTitle = createWithBsPrefix('card-title', {\n  Component: DivStyledAsH5\n});\nvar CardSubtitle = createWithBsPrefix('card-subtitle', {\n  Component: DivStyledAsH6\n});\nvar CardLink = createWithBsPrefix('card-link', {\n  Component: 'a'\n});\nvar CardText = createWithBsPrefix('card-text', {\n  Component: 'p'\n});\nvar CardHeader = createWithBsPrefix('card-header');\nvar CardFooter = createWithBsPrefix('card-footer');\nvar CardImgOverlay = createWithBsPrefix('card-img-overlay');\nvar defaultProps = {\n  body: false\n};\nvar Card = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      bg = _ref.bg,\n      text = _ref.text,\n      border = _ref.border,\n      body = _ref.body,\n      children = _ref.children,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'div' : _ref$as,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var prefix = useBootstrapPrefix(bsPrefix, 'card');\n  var cardContext = useMemo(function () {\n    return {\n      cardHeaderBsPrefix: prefix + \"-header\"\n    };\n  }, [prefix]);\n  return /*#__PURE__*/React.createElement(CardContext.Provider, {\n    value: cardContext\n  }, /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref\n  }, props, {\n    className: classNames(className, prefix, bg && \"bg-\" + bg, text && \"text-\" + text, border && \"border-\" + border)\n  }), body ?\n  /*#__PURE__*/\n  // @ts-ignore\n  React.createElement(CardBody, null, children) : children));\n});\nCard.displayName = 'Card';\nCard.defaultProps = defaultProps;\nCard.Img = CardImg;\nCard.Title = CardTitle;\nCard.Subtitle = CardSubtitle;\nCard.Body = CardBody;\nCard.Link = CardLink;\nCard.Text = CardText;\nCard.Header = CardHeader;\nCard.Footer = CardFooter;\nCard.ImgOverlay = CardImgOverlay;\nexport default Card;","import React, { useEffect, useState } from 'react';\nimport { Row, Col, Card, ListGroup } from 'react-bootstrap';\n\n\nimport avatar3 from '../../assets/images/user/avatar-3.jpg';\nimport avatarLogo from '../../assets/images/avatar.svg';\n\nimport useAuth from '../../hooks/useAuth';\n\nimport { useHistory, useLocation } from 'react-router-dom';\n\nimport api from '../../services/api';\n\n\nimport { timerMaker2 } from '../../functions';\nimport moment from 'moment-timezone';\nimport gtm from '../../services/gtm';\n\nimport { Link } from 'react-router-dom';\n\n\nconst DashAnalytics = () => {\n\n    const { popUp_removerItem, popUp_alertaOK, user, uploadlistnotificacao } = useAuth();\n\n    const history = useHistory();\n\n\n    const [newdata, setnewdata] = useState([]);\n    const [avatar, setAvatar] = useState('');\n\n    const [time, settime] = useState(moment().tz(gtm).format());\n    const location = useLocation();\n\n\n    function closeNotificationAndSetIDToLocalStorage(autoexclusaoId, url) {\n        if (autoexclusaoId == undefined || autoexclusaoId == null) {\n            history.push(url)\n            return\n        }\n        let autoexclusao = JSON.parse(autoexclusaoId)\n        localStorage.setItem(\"EXTRA\", autoexclusao.IdAutoexclusao)\n        if (url !== undefined || url !== null) {\n            if (location.pathname === url) {\n                window.location.reload(false);\n                return\n            } else {\n                history.push(url)\n            }\n        }\n    }\n    function getUrlPhoto(notification) {\n        let url = ''\n        if (notification?.URL_FOTO) {\n            url = notification?.URL_FOTO + \"?alt=media&token=0\"\n\n        } else if (notification?.autoexclusao?.URL_FOTO) {\n            url = notification?.autoexclusao?.URL_FOTO + \"?alt=media&token=0\"\n        }\n        else {\n            url = avatarLogo\n        }\n        return url\n    }\n    async function uploadlist() {\n\n        try {\n\n            const response = await api.get('/glbnotificacao');\n\n            if (response.status == '200') {\n                let data = response.data['data']\n                for (var i = 0; i < data.length; i++) {\n\n\n                    if (data[i]?.sgigjpessoa?.sgigjrelpessoaentidade.length > 0) {\n\n                        if (data[i]?.sgigjpessoa?.sgigjrelpessoaentidade[0].glbuser.length > 0) {\n\n                            data[i].URL_FOTO = data[i]?.sgigjpessoa?.sgigjrelpessoaentidade[0].glbuser[0].URL_FOTO\n\n\n                        } else data[i].URL_FOTO = \"\"\n\n                    } else data[i].URL_FOTO = \"\"\n\n\n\n                }\n\n                setnewdata(data)\n\n            }\n\n            console.log(response)\n\n        } catch (err) {\n\n            console.error(err.response)\n\n\n        }\n\n    }\n    console.log(\"sssssssssssssss\", newdata)\n    //-------------- Remover -------------------------\n\n    const removeNotification = async (idx) => {\n        let res = true;\n\n        try {\n            const response = await api.delete(\"/glbnotificacao/\" + idx);\n\n            uploadlistnotificacao()\n\n            uploadlist();\n\n        } catch (err) {\n            res = false;\n            console.error(err.response);\n            popUp_alertaOK(\"Falha. Tente mais tarde\");\n        }\n\n\n        return res;\n    };\n\n    const removeItem = async (idx) => {\n\n        popUp_removerItem({\n            delete: removeNotification,\n            id: idx,\n        });\n    };\n\n\n    useEffect(() => {\n        if (user.URL_FOTO === undefined || user.URL_FOTO == \"\" || user.URL_FOTO == null) {\n            let avatar = 'https://ui-avatars.com/api/?name=' + user.USERNAME;\n            setAvatar(avatar)\n        }\n\n\n        if (user.FLAG_NOTIFICACAO != \"0\") history.push('/')\n\n\n        else {\n\n            uploadlist()\n\n        }\n\n\n\n    }, [])\n\n\n\n    return (\n        <React.Fragment>\n            <Row>\n                <Col >\n                    <Card>\n                        <Card.Header>\n\n                            <h4 style={{ marginBottom: \"25px\" }} > <i className=\"feather icon-bell\" /> Notificações</h4>\n                        </Card.Header>\n                        <Card.Body className=\"card-body\">\n\n                            {newdata.map(e => (\n\n\n                                <ListGroup as='ul' bsPrefix=' ' className=\"feed-blog pl-0\">\n                                    <ListGroup.Item as='li' bsPrefix=' ' className={e.sgigjrelnotificacaovizualizado.length > 0 ? \"diactive-feed\" : \"\"}>\n                                        <span onClick={() => { closeNotificationAndSetIDToLocalStorage(e.EXTRA, e.URL) }} key={e.ID} style={{ color: \"#555\", cursor: 'pointer' }} >\n\n                                            <div className=\"feed-user-img\">\n\n\n                                                <img style={{ width: \"40px\", height: \"40px\" }} src={getUrlPhoto(e)} className=\"img-radius wid-40\" alt=\"User Profile\" />\n\n\n                                            </div>\n\n                                            <p style={{ top: \"-12px\", position: \"absolute\" }} >\n                                                <b>{e?.sgigjpessoa?.NOME}</b> <small style={{ marginLeft: \"10px\" }} className=\"text-muted\">{timerMaker2(e.DT_REGISTO, time)}</small>\n                                                <br />{(e.MSG)}</p>\n                                        </span>\n                                        <div style={{ cursor: \"pointer\", right: \"0px\", position: \"absolute\" }} className='text-right'>   <a title=\"Eliminar\" className=\"text-danger\" onClick={() => removeItem(e.ID)}><i class=\"feather icon-trash-2\"></i></a></div>\n                                    </ListGroup.Item>\n                                </ListGroup>\n\n\n                            ))}\n\n\n\n\n                        </Card.Body>\n\n\n\n\n\n                    </Card>\n                </Col>\n\n\n\n\n\n\n            </Row>\n        </React.Fragment>\n    );\n};\n\nexport default DashAnalytics;\n"],"sourceRoot":""}