(this["webpackJsonpigj-frontend"]=this["webpackJsonpigj-frontend"]||[]).push([[75],{950:function(e,t,a){},986:function(e,t,a){"use strict";a.r(t);var s=a(8),o=a(0),i=a(812),n=a(404),r=a(911),c=a(912),l=a.n(c),d=a(839),p=a(863),b=a(1);var h=e=>{let{title:t,value:a,icon:s,color:o,subtitle:i,change:n,sparklineData:c,loading:l,format:d}=e;const h={chart:{type:"area",height:40,sparkline:{enabled:!0},animations:{enabled:!0,easing:"easeinout",speed:800}},stroke:{curve:"smooth",width:2},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.4,opacityTo:.1,stops:[0,100]}},colors:[o||"#2B7FB9"],tooltip:{enabled:!1}},m=c?[{name:t,data:c.map(e=>e.total||e)}]:[];return l?Object(b.jsx)(p.a,{className:"kpi-card",children:Object(b.jsx)(p.a.Body,{children:Object(b.jsxs)("div",{className:"kpi-skeleton",children:[Object(b.jsx)("div",{className:"skeleton-line skeleton-title"}),Object(b.jsx)("div",{className:"skeleton-line skeleton-value"}),Object(b.jsx)("div",{className:"skeleton-line skeleton-sparkline"})]})})}):Object(b.jsx)(p.a,{className:"kpi-card",style:{borderLeft:"4px solid ".concat(o||"#2B7FB9")},children:Object(b.jsxs)(p.a.Body,{className:"p-3",children:[Object(b.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{className:"kpi-title mb-0",children:t}),Object(b.jsx)("h3",{className:"kpi-value mb-0",children:(j=a||0,"currency"===d?j>=1e6?"".concat((j/1e6).toFixed(1),"M CVE"):j>=1e3?"".concat((j/1e3).toFixed(0),"K CVE"):"".concat(Number(j).toLocaleString("pt-CV")," CVE"):"percent"===d?"".concat(j,"%"):j>=1e6?"".concat((j/1e6).toFixed(1),"M"):j>=1e3?"".concat((j/1e3).toFixed(0),"K"):Number(j).toLocaleString("pt-CV"))})]}),Object(b.jsx)("div",{className:"kpi-icon",style:{color:o||"#2B7FB9"},children:Object(b.jsx)("i",{className:s})})]}),i&&Object(b.jsxs)("p",{className:"kpi-subtitle mb-1",children:[void 0!==n&&Object(b.jsxs)("span",{className:"kpi-change ".concat(n>=0?"positive":"negative"),children:[Object(b.jsx)("i",{className:"feather ".concat(n>=0?"icon-trending-up":"icon-trending-down")})," ",Math.abs(n),"%"]})," ",i]}),c&&c.length>1&&Object(b.jsx)("div",{className:"kpi-sparkline",children:Object(b.jsx)(r.a,{options:h,series:m,type:"area",height:40})})]})});var j};var m=e=>{let{title:t,subtitle:a,children:s,loading:o,height:i}=e;return o?Object(b.jsxs)(p.a,{className:"chart-card",children:[Object(b.jsx)(p.a.Header,{className:"chart-card-header",children:Object(b.jsx)("div",{className:"skeleton-line skeleton-title",style:{width:"60%"}})}),Object(b.jsx)(p.a.Body,{className:"chart-card-body",children:Object(b.jsx)("div",{className:"chart-skeleton",style:{height:i||300},children:Object(b.jsx)("div",{className:"skeleton-chart-placeholder"})})})]}):Object(b.jsxs)(p.a,{className:"chart-card",children:[Object(b.jsxs)(p.a.Header,{className:"chart-card-header",children:[Object(b.jsx)("h6",{className:"chart-card-title mb-0",children:t}),a&&Object(b.jsx)("small",{className:"chart-card-subtitle",children:a})]}),Object(b.jsx)(p.a.Body,{className:"chart-card-body p-2",children:s})]})},j=a(403),u=a(821);var x=e=>{var t;let{filtrosOpcoes:a,filters:o,onFilterChange:r,onRefresh:c,loading:l,permissions:d,onExportPDF:p,exporting:h}=e;const m=!1!==(null===d||void 0===d||null===(t=d.sections)||void 0===t?void 0:t.filtroEntidade),x=null!==a&&void 0!==a&&a.anos?[{value:"",label:"Todos os Anos"},...a.anos.map(e=>({value:e,label:String(e)}))]:[{value:"",label:"Todos os Anos"}],f=null!==a&&void 0!==a&&a.entidades?[{value:"",label:"Todas as Entidades"},...a.entidades.map(e=>({value:e.id,label:e.nome}))]:[{value:"",label:"Todas as Entidades"}],g={control:e=>Object(s.a)(Object(s.a)({},e),{},{borderRadius:"8px",borderColor:"#e0e0e0",boxShadow:"none",minHeight:"38px","&:hover":{borderColor:"#C5A55A"}}),option:(e,t)=>Object(s.a)(Object(s.a)({},e),{},{backgroundColor:t.isSelected?"#2B7FB9":t.isFocused?"#f0f7ff":"white",color:t.isSelected?"white":"#2D3436",fontSize:"13px"}),singleValue:e=>Object(s.a)(Object(s.a)({},e),{},{fontSize:"13px",color:"#2D3436"}),placeholder:e=>Object(s.a)(Object(s.a)({},e),{},{fontSize:"13px"})};return Object(b.jsx)("div",{className:"dashboard-filters mb-4",children:Object(b.jsxs)(i.a,{className:"align-items-center",children:[Object(b.jsx)(n.a,{xs:12,md:m?3:5,children:Object(b.jsxs)("h4",{className:"dashboard-title mb-0",children:[Object(b.jsx)("i",{className:"feather icon-bar-chart-2 mr-2",style:{color:"#C5A55A"}}),"Dashboard"]})}),Object(b.jsx)(n.a,{xs:6,md:m?3:5,children:Object(b.jsx)(u.a,{value:x.find(e=>e.value===(o.ano||""))||x[0],onChange:e=>r(Object(s.a)(Object(s.a)({},o),{},{ano:e.value})),options:x,styles:g,placeholder:"Ano",isSearchable:!1})}),m&&Object(b.jsx)(n.a,{xs:6,md:4,children:Object(b.jsx)(u.a,{value:f.find(e=>e.value===(o.entidadeId||""))||f[0],onChange:e=>r(Object(s.a)(Object(s.a)({},o),{},{entidadeId:e.value})),options:f,styles:g,placeholder:"Entidade"})}),Object(b.jsxs)(n.a,{xs:12,md:2,className:"mt-2 mt-md-0 d-flex",style:{gap:"8px"},children:[Object(b.jsxs)(j.a,{variant:"outline-secondary",className:"btn-refresh flex-fill",onClick:c,disabled:l,children:[Object(b.jsx)("i",{className:"feather icon-refresh-cw ".concat(l?"spin":"")})," ","Atualizar"]}),Object(b.jsx)(j.a,{variant:"outline-secondary",className:"btn-export-pdf",onClick:p,disabled:h||l,title:"Exportar Dashboard para PDF",children:Object(b.jsx)("i",{className:"feather ".concat(h?"icon-loader spin":"icon-download")})})]})]})})},f=a(30);const g=Promise.resolve({data:null});var O=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const[a,i]=Object(o.useState)({kpis:null,financeiro:null,receitaEntidade:null,processos:null,eventos:null,entidades:null,atividade:null,handpay:null,casosSuspeitos:null,orcamento:null,filtrosOpcoes:null}),[n,r]=Object(o.useState)(!0),[c,l]=Object(o.useState)(null),d=Object(o.useCallback)(()=>{const a={};return e.ano&&(a.ano=e.ano),t&&"CASINO"===t.role||e.entidadeId&&(a.entidade_id=e.entidadeId),a},[e.ano,e.entidadeId,t]),p=Object(o.useCallback)(async()=>{if(!t)return;r(!0),l(null);const e={},a=d(),o=t.sections,n=o.kpiReceita||o.kpiImpostos||o.kpiProcessos||o.kpiEntidades||o.kpiEventos||o.kpiCasosSuspeitos||o.kpiOrcamento;try{const[t,r,c,l,d,p,b,h,m,j,u]=await Promise.allSettled([n?f.a.get("/dashboard/kpis",Object(s.a)(Object(s.a)({},e),{},{params:a})):g,o.visaoFinanceira?f.a.get("/dashboard/financeiro",Object(s.a)(Object(s.a)({},e),{},{params:a})):g,o.entidadesReceita?f.a.get("/dashboard/receita-entidade",Object(s.a)(Object(s.a)({},e),{},{params:a})):g,o.processosExclusoes?f.a.get("/dashboard/processos",Object(s.a)(Object(s.a)({},e),{},{params:a})):g,o.eventosAtividade?f.a.get("/dashboard/eventos",Object(s.a)(Object(s.a)({},e),{},{params:a})):g,o.entidadesReceita?f.a.get("/dashboard/entidades",e):g,o.eventosAtividade?f.a.get("/dashboard/atividade",e):g,o.handpayCasos?f.a.get("/dashboard/handpay",Object(s.a)(Object(s.a)({},e),{},{params:a})):g,o.handpayCasos?f.a.get("/dashboard/casos-suspeitos",e):g,o.orcamento?f.a.get("/dashboard/orcamento",Object(s.a)(Object(s.a)({},e),{},{params:a})):g,f.a.get("/dashboard/filtros",e)]),x=e=>"fulfilled"===e.status&&e.value&&e.value.data?e.value.data.restricted?null:e.value.data:null;i({kpis:x(t),financeiro:x(r),receitaEntidade:x(c),processos:x(l),eventos:x(d),entidades:x(p),atividade:x(b),handpay:x(h),casosSuspeitos:x(m),orcamento:x(j),filtrosOpcoes:x(u)})}catch(c){l(c.message||"Erro ao carregar dados do dashboard")}finally{r(!1)}},[d,t]);return Object(o.useEffect)(()=>{p()},[p]),Object(s.a)(Object(s.a)({},a),{},{loading:n,error:c,refetch:p})};var v=()=>{const[e,t]=Object(o.useState)(null),[a,s]=Object(o.useState)(!0);return Object(o.useEffect)(()=>{(async()=>{try{const e=await f.a.get("/dashboard/config");t(e.data)}catch(e){t({role:"ADMIN",entidadeId:null,sections:{kpiReceita:!0,kpiImpostos:!0,kpiProcessos:!0,kpiEntidades:!0,kpiEventos:!0,kpiCasosSuspeitos:!0,kpiOrcamento:!0,visaoFinanceira:!0,entidadesReceita:!0,processosExclusoes:!0,eventosAtividade:!0,handpayCasos:!0,orcamento:!0,filtroEntidade:!0}})}finally{s(!1)}})()},[]),{config:e,loading:a}};const y=["#2B7FB9","#C5A55A","#2ED8B6","#1B4965","#4099FF"],N=e=>{if(!e||0===e.length)return null;const t=e.map(e=>String(e.ano));return{options:{chart:{type:"area",height:320,toolbar:{show:!0,tools:{download:!0,selection:!1,zoom:!1,pan:!1}},animations:{enabled:!0,easing:"easeinout",speed:800}},colors:y,dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2.5},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.35,opacityTo:.05,stops:[0,95,100]}},xaxis:{categories:t,labels:{style:{colors:"#636E72",fontSize:"12px"}},axisBorder:{show:!1}},yaxis:{labels:{style:{colors:"#636E72",fontSize:"11px"},formatter:e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(0),"K"):e}},legend:{position:"top",horizontalAlign:"left",fontSize:"12px",markers:{radius:3}},grid:{borderColor:"#f1f1f1",strokeDashArray:3},tooltip:{y:{formatter:e=>"".concat(Number(e).toLocaleString("pt-CV")," CVE")}}},series:[{name:"Receita Bruta",data:e.map(e=>e.receita_bruta)},{name:"Impostos",data:e.map(e=>e.impostos)},{name:"Contrapartidas",data:e.map(e=>e.contrapartidas)},{name:"Contribui\xe7\xf5es",data:e.map(e=>e.contribuicoes)},{name:"Pr\xe9mios",data:e.map(e=>e.premios)}]}};const S=["#2B7FB9","#C5A55A","#2ED8B6","#1B4965","#4099FF"],E=e=>{if(!e||0===e.length)return null;const t=e.reduce((e,t)=>({premios:e.premios+(t.premios||0),impostos:e.impostos+(t.impostos||0),contrapartidas:e.contrapartidas+(t.contrapartidas||0),contribuicoes:e.contribuicoes+(t.contribuicoes||0)}),{premios:0,impostos:0,contrapartidas:0,contribuicoes:0}),a=[t.premios,t.impostos,t.contrapartidas,t.contribuicoes];return{options:{chart:{type:"donut",height:320,animations:{enabled:!0,easing:"easeinout",speed:800}},colors:S,labels:["Pr\xe9mios","Impostos","Contrapartidas","Contribui\xe7\xf5es IGJ"],legend:{position:"bottom",fontSize:"12px",markers:{radius:3}},plotOptions:{pie:{donut:{size:"65%",labels:{show:!0,name:{show:!0,fontSize:"14px",color:"#2D3436"},value:{show:!0,fontSize:"16px",fontWeight:700,color:"#2D3436",formatter:e=>{const t=Number(e);return t>=1e6?"".concat((t/1e6).toFixed(1),"M"):t>=1e3?"".concat((t/1e3).toFixed(0),"K"):t.toLocaleString("pt-CV")}},total:{show:!0,label:"Total",fontSize:"13px",color:"#636E72",formatter:e=>{const t=e.globals.seriesTotals.reduce((e,t)=>e+t,0);return t>=1e6?"".concat((t/1e6).toFixed(1),"M CVE"):"".concat((t/1e3).toFixed(0),"K CVE")}}}}}},dataLabels:{enabled:!1},tooltip:{y:{formatter:e=>"".concat(Number(e).toLocaleString("pt-CV")," CVE")}},stroke:{width:2,colors:["#fff"]}},series:a}};const k=e=>{if(!e||0===e.length)return null;const t=e.map(e=>e.entidade||"N/A");return{options:{chart:{type:"bar",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:600}},plotOptions:{bar:{horizontal:!0,borderRadius:4,barHeight:"60%",distributed:!1}},colors:["#2B7FB9"],dataLabels:{enabled:!0,formatter:e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(0),"K"):e,style:{fontSize:"11px",colors:["#fff"]},offsetX:-5},xaxis:{labels:{style:{colors:"#636E72",fontSize:"11px"},formatter:e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(0),"K"):e}},yaxis:{labels:{style:{colors:"#636E72",fontSize:"11px"},maxWidth:150}},grid:{borderColor:"#f1f1f1",strokeDashArray:3},tooltip:{y:{formatter:e=>"".concat(Number(e).toLocaleString("pt-CV")," CVE")}}},series:[{name:"Receita Bruta",data:e.map(e=>e.receita_bruta)}],categories:t}};const A=["#2B7FB9","#C5A55A","#2ED8B6","#1B4965","#4099FF","#D4A843","#F39C12"],C=e=>{if(!e||0===e.length)return null;const t=e.filter(e=>e.maquinas+e.bancas+e.equipamentos>0).map(e=>({x:e.entidade||"N/A",y:e.maquinas+e.bancas+e.equipamentos}));return{options:{chart:{type:"treemap",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:600}},colors:A,legend:{show:!1},plotOptions:{treemap:{distributed:!0,enableShades:!1}},dataLabels:{enabled:!0,style:{fontSize:"12px"},formatter:(e,t)=>"".concat(e,": ").concat(t.value),offsetY:-2},tooltip:{y:{formatter:(t,a)=>{let{dataPointIndex:s}=a;const o=e.filter(e=>e.maquinas+e.bancas+e.equipamentos>0)[s];return o?"M\xe1quinas: ".concat(o.maquinas," | Bancas: ").concat(o.bancas," | Equip.: ").concat(o.equipamentos):"".concat(t," total")}}}},series:[{data:t}]}};const F=e=>{if(!e)return null;const{exclusaoPorMes:t,autoExclusaoPorMes:a}=e,s=new Set;(t||[]).forEach(e=>s.add(e.mes)),(a||[]).forEach(e=>s.add(e.mes));const o=Array.from(s).sort(),i={},n={};(t||[]).forEach(e=>{i[e.mes]=e.total}),(a||[]).forEach(e=>{n[e.mes]=e.total});return{options:{chart:{type:"bar",height:320,stacked:!0,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:600}},plotOptions:{bar:{borderRadius:4,columnWidth:"50%"}},colors:["#1B4965","#C5A55A"],xaxis:{categories:o.map(e=>{const[t,a]=e.split("-");return"".concat(["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][parseInt(a)-1]," ").concat(t.slice(2))}),labels:{style:{colors:"#636E72",fontSize:"11px"},rotateAlways:!1}},yaxis:{labels:{style:{colors:"#636E72",fontSize:"11px"}}},legend:{position:"top",horizontalAlign:"left",fontSize:"12px",markers:{radius:3}},grid:{borderColor:"#f1f1f1",strokeDashArray:3},tooltip:{shared:!0,intersect:!1}},series:[{name:"Exclus\xe3o",data:o.map(e=>i[e]||0)},{name:"Auto-exclus\xe3o",data:o.map(e=>n[e]||0)}]}};const w=e=>{if(!e)return null;const{exclusaoStatus:t}=e;if(!t)return null;const a=t.total||1;return{options:{chart:{type:"radialBar",height:320,animations:{enabled:!0,easing:"easeinout",speed:800}},plotOptions:{radialBar:{offsetY:-10,startAngle:0,endAngle:270,hollow:{size:"30%"},dataLabels:{name:{fontSize:"13px",color:"#636E72"},value:{fontSize:"16px",fontWeight:700,color:"#2D3436"},total:{show:!0,label:"Total",formatter:()=>t.total}},track:{background:"#f1f1f1",strokeWidth:"100%"}}},colors:["#2B7FB9","#2ED8B6","#C5A55A","#F39C12"],labels:["Ativos","Finalizados","Arquivados","Prescritos"],legend:{show:!0,position:"bottom",fontSize:"12px",markers:{radius:3},formatter:(e,a)=>{const s=[t.ativos||0,t.finalizados||0,t.arquivados||0,t.prescritos||0];return"".concat(e,": ").concat(s[a.seriesIndex])}}},series:[Math.round((t.ativos||0)/a*100),Math.round((t.finalizados||0)/a*100),Math.round((t.arquivados||0)/a*100),Math.round((t.prescritos||0)/a*100)]}};const z=e=>{if(!e||!e.status)return null;const{aprovados:t,pendentes:a,recusados:s}=e.status;return{options:{chart:{type:"pie",height:320,animations:{enabled:!0,easing:"easeinout",speed:800}},colors:["#2ED8B6","#C5A55A","#F39C12"],labels:["Aprovados","Pendentes","Recusados"],legend:{position:"bottom",fontSize:"12px",markers:{radius:3}},dataLabels:{enabled:!0,formatter:(e,t)=>{const a=t.w.globals.series[t.seriesIndex];return"".concat(a," (").concat(e.toFixed(0),"%)")},style:{fontSize:"12px"}},stroke:{width:2,colors:["#fff"]},tooltip:{y:{formatter:e=>"".concat(e," eventos")}}},series:[t||0,a||0,s||0]}};const B=e=>{if(!e||0===e.length)return null;const t={};e.forEach(e=>{const a=e.modulo||"Outro";t[a]=(t[a]||0)+e.total});const a=Object.entries(t).sort((e,t)=>t[1]-e[1]).slice(0,8).map(e=>{let[t]=e;return t}),s=[...new Set(e.map(e=>e.mes))].sort(),o=e=>{const[t,a]=e.split("-");return"".concat(["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][parseInt(a)-1]," ").concat(t.slice(2))},i={};e.forEach(e=>{i["".concat(e.modulo,"-").concat(e.mes)]=e.total});return{options:{chart:{type:"heatmap",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:600}},plotOptions:{heatmap:{radius:4,enableShades:!0,shadeIntensity:.5,colorScale:{ranges:[{from:0,to:0,color:"#f1f1f1",name:"Nenhuma"},{from:1,to:10,color:"#4099FF",name:"Baixa"},{from:11,to:50,color:"#2B7FB9",name:"M\xe9dia"},{from:51,to:200,color:"#1B4965",name:"Alta"},{from:201,to:1e4,color:"#C5A55A",name:"Muito Alta"}]}}},dataLabels:{enabled:!1},xaxis:{labels:{style:{colors:"#636E72",fontSize:"10px"}}},yaxis:{labels:{style:{colors:"#636E72",fontSize:"10px"}}},grid:{padding:{right:10}},tooltip:{y:{formatter:e=>"".concat(e," registos")}}},series:a.map(e=>({name:e.replace("sgigj","").replace("glb",""),data:s.map(t=>({x:o(t),y:i["".concat(e,"-").concat(t)]||0}))}))}};const D=e=>{if(!e||0===e.length)return null;return{options:{chart:{type:"bar",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:600}},plotOptions:{bar:{borderRadius:4,columnWidth:"45%"}},colors:["#1B4965","#C5A55A"],xaxis:{categories:e.map(e=>e.entidade||"N/A"),labels:{style:{colors:"#636E72",fontSize:"10px"},rotate:-45,trim:!0,maxHeight:80}},yaxis:[{title:{text:"Valor (CVE)",style:{color:"#1B4965",fontSize:"11px"}},labels:{style:{colors:"#636E72",fontSize:"11px"},formatter:e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(0),"K"):e}},{opposite:!0,title:{text:"Quantidade",style:{color:"#C5A55A",fontSize:"11px"}},labels:{style:{colors:"#636E72",fontSize:"11px"}}}],legend:{position:"top",horizontalAlign:"left",fontSize:"12px",markers:{radius:3}},grid:{borderColor:"#f1f1f1",strokeDashArray:3},tooltip:{shared:!0,intersect:!1,y:{formatter:(e,t)=>{let{seriesIndex:a}=t;return 0===a?"".concat(Number(e).toLocaleString("pt-CV")," CVE"):"".concat(e," registos")}}},stroke:{width:[0,3],curve:"smooth"}},series:[{name:"Valor Total",type:"bar",data:e.map(e=>e.valor_total)},{name:"Quantidade",type:"line",data:e.map(e=>e.quantidade)}]}};const I=e=>{if(!e||0===e.length)return null;const t=e.map(e=>(e=>{const[t,a]=e.split("-");return"".concat(["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][parseInt(a)-1]," ").concat(t.slice(2))})(e.mes)),a=e.map(e=>e.total);let s=0;return{options:{chart:{type:"area",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:800}},colors:["#F39C12","#1B4965"],dataLabels:{enabled:!1},stroke:{curve:"smooth",width:[2.5,2]},fill:{type:["gradient","gradient"],gradient:{shadeIntensity:1,opacityFrom:.35,opacityTo:.05,stops:[0,95,100]}},xaxis:{categories:t,labels:{style:{colors:"#636E72",fontSize:"11px"}}},yaxis:[{title:{text:"Mensal",style:{color:"#F39C12",fontSize:"11px"}},labels:{style:{colors:"#636E72",fontSize:"11px"}}},{opposite:!0,title:{text:"Acumulado",style:{color:"#1B4965",fontSize:"11px"}},labels:{style:{colors:"#636E72",fontSize:"11px"}}}],legend:{position:"top",horizontalAlign:"left",fontSize:"12px",markers:{radius:3}},grid:{borderColor:"#f1f1f1",strokeDashArray:3},tooltip:{shared:!0,intersect:!1}},series:[{name:"Casos Mensais",data:a},{name:"Acumulado",data:e.map(e=>(s+=e.total,s))}]}};const M=e=>{if(!e||!e.porProjeto)return null;const{orcamento:t,despesas:a}=e.porProjeto;if(!t||0===t.length)return null;const s=new Set;t.forEach(e=>s.add(e.projeto||"Sem Projeto")),a.forEach(e=>s.add(e.projeto||"Sem Projeto"));const o=Array.from(s),i={},n={};return t.forEach(e=>{i[e.projeto||"Sem Projeto"]=e.orcamento_previsto}),a.forEach(e=>{n[e.projeto||"Sem Projeto"]=e.despesa_real}),{options:{chart:{type:"bar",height:320,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:600}},plotOptions:{bar:{horizontal:!1,borderRadius:4,columnWidth:"55%",dataLabels:{position:"top"}}},colors:["#2B7FB9","#C5A55A"],dataLabels:{enabled:!1},xaxis:{categories:o,labels:{style:{colors:"#636E72",fontSize:"10px"},rotate:-45,trim:!0,maxHeight:80}},yaxis:{labels:{style:{colors:"#636E72",fontSize:"11px"},formatter:e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(0),"K"):e}},legend:{position:"top",horizontalAlign:"left",fontSize:"12px",markers:{radius:3}},grid:{borderColor:"#f1f1f1",strokeDashArray:3},tooltip:{y:{formatter:e=>"".concat(Number(e).toLocaleString("pt-CV")," CVE")}}},series:[{name:"Or\xe7amento Previsto",data:o.map(e=>i[e]||0)},{name:"Despesa Real",data:o.map(e=>n[e]||0)}]}};const P=e=>{if(!e)return null;const t=e.taxaExecucao||0;return{options:{chart:{type:"radialBar",height:320,animations:{enabled:!0,easing:"easeinout",speed:800}},plotOptions:{radialBar:{startAngle:-135,endAngle:135,hollow:{size:"65%"},track:{background:"#f1f1f1",strokeWidth:"100%",margin:5,dropShadow:{enabled:!1}},dataLabels:{name:{show:!0,fontSize:"14px",color:"#636E72",offsetY:-10},value:{show:!0,fontSize:"32px",fontWeight:700,color:"#2D3436",offsetY:5,formatter:e=>"".concat(e,"%")}}}},colors:[(a=t,a>=80?"#2ED8B6":a>=50?"#C5A55A":a>=25?"#F39C12":"#E74C3C")],labels:["Execu\xe7\xe3o Or\xe7amental"],stroke:{lineCap:"round"}},series:[t],totalOrcamento:e.totalOrcamento,totalDespesa:e.totalDespesa};var a};a(950);t.default=()=>{var e,t;const[a,c]=Object(o.useState)({ano:"",entidadeId:""}),[p,j]=Object(o.useState)(!1),u=Object(o.useRef)(null),{config:f,loading:g}=v(),{kpis:y,financeiro:S,receitaEntidade:A,processos:V,eventos:R,entidades:L,atividade:q,handpay:T,casosSuspeitos:J,orcamento:H,filtrosOpcoes:K,loading:W,refetch:_}=O(a,f),G=(null===f||void 0===f?void 0:f.sections)||{},Y=N(S),Q=E(S),U=k(A),X=C(L),Z=F(V),$=w(V),ee=z(R),te=B(q),ae=D(T),se=I(J),oe=M(H),ie=P(H),ne=e=>e?e>=1e6?"".concat((e/1e6).toFixed(1),"M CVE"):e>=1e3?"".concat((e/1e3).toFixed(0),"K CVE"):"".concat(Number(e).toLocaleString("pt-CV")," CVE"):"0 CVE",re=W||g,ce=Object(o.useCallback)(async()=>{if(u.current){j(!0);try{const e=u.current,t=Array.from(e.children).filter(e=>e.offsetHeight>0),a=new d.a("l","mm","a4"),s=a.internal.pageSize.getWidth(),o=a.internal.pageSize.getHeight(),i=10,n=18;a.setFontSize(14),a.setTextColor(27,73,101),a.text("SGIGJ - Dashboard",i,12),a.setFontSize(9),a.setTextColor(99,110,114);const r=(new Date).toLocaleDateString("pt-CV",{day:"2-digit",month:"2-digit",year:"numeric"});a.text("Exportado em ".concat(r),s-i-40,12);let c=n;const p=s-2*i;for(let d=0;d<t.length;d++){const e=t[d],s=await l()(e,{scale:1.5,useCORS:!0,logging:!1,backgroundColor:"#F5F7FA"}),r=s.toDataURL("image/jpeg",.85),b=p/s.width,h=s.height*b;c+h>o-i&&c>n+5&&(a.addPage("a4","l"),c=i),a.addImage(r,"JPEG",i,c,p,h),c+=h+2}a.save("dashboard-sgigj-".concat((new Date).toISOString().slice(0,10),".pdf"))}catch(e){console.error("Erro ao exportar PDF:",e)}finally{j(!1)}}},[]),le=G.kpiReceita||G.kpiImpostos||G.kpiProcessos||G.kpiEntidades||G.kpiEventos||G.kpiCasosSuspeitos||G.kpiOrcamento;return Object(b.jsxs)("div",{className:"dashboard-wrapper",children:[Object(b.jsx)(x,{filtrosOpcoes:K,filters:a,onFilterChange:c,onRefresh:_,loading:re,permissions:f,onExportPDF:ce,exporting:p}),Object(b.jsxs)("div",{ref:u,children:[le&&Object(b.jsxs)(i.a,{className:"mt-3",children:[G.kpiReceita&&Object(b.jsx)(n.a,{xs:6,lg:3,xl:!0,className:"mb-3",children:Object(b.jsx)(h,{title:"Receita Bruta",value:null===y||void 0===y?void 0:y.receitaBruta,icon:"feather icon-dollar-sign",color:"#2B7FB9",format:"currency",subtitle:"Total acumulado",sparklineData:null===y||void 0===y||null===(e=y.sparklines)||void 0===e?void 0:e.receita,loading:re})}),G.kpiImpostos&&Object(b.jsx)(n.a,{xs:6,lg:3,xl:!0,className:"mb-3",children:Object(b.jsx)(h,{title:"Impostos",value:null===y||void 0===y?void 0:y.impostos,icon:"feather icon-trending-up",color:"#C5A55A",format:"currency",subtitle:"Arrecadados",loading:re})}),G.kpiProcessos&&Object(b.jsx)(n.a,{xs:6,lg:3,xl:!0,className:"mb-3",children:Object(b.jsx)(h,{title:"Processos Ativos",value:null===y||void 0===y?void 0:y.processosAtivos,icon:"feather icon-file-text",color:"#1B4965",subtitle:"Exclus\xe3o + Auto-exclus\xe3o",sparklineData:null===y||void 0===y||null===(t=y.sparklines)||void 0===t?void 0:t.processos,loading:re})}),G.kpiEntidades&&Object(b.jsx)(n.a,{xs:6,lg:3,xl:!0,className:"mb-3",children:Object(b.jsx)(h,{title:"Entidades",value:null===y||void 0===y?void 0:y.entidadesAtivas,icon:"feather icon-home",color:"#2ED8B6",subtitle:"Ativas",loading:re})}),G.kpiEventos&&Object(b.jsx)(n.a,{xs:6,lg:3,xl:!0,className:"mb-3",children:Object(b.jsx)(h,{title:"Eventos",value:null===y||void 0===y?void 0:y.eventosAprovados,icon:"feather icon-calendar",color:"#4099FF",subtitle:"Registados",loading:re})}),G.kpiCasosSuspeitos&&Object(b.jsx)(n.a,{xs:6,lg:3,xl:!0,className:"mb-3",children:Object(b.jsx)(h,{title:"Casos Suspeitos",value:null===y||void 0===y?void 0:y.casosSuspeitos,icon:"feather icon-alert-triangle",color:"#F39C12",subtitle:"Ativos",loading:re})}),G.kpiOrcamento&&Object(b.jsx)(n.a,{xs:6,lg:3,xl:!0,className:"mb-3",children:Object(b.jsx)(h,{title:"Exec. Or\xe7amental",value:null===y||void 0===y?void 0:y.execucaoOrcamental,icon:"feather icon-pie-chart",color:"#D4A843",format:"percent",subtitle:"Taxa de execu\xe7\xe3o",loading:re})})]}),G.visaoFinanceira&&Object(b.jsxs)("div",{className:"dashboard-section",children:[Object(b.jsx)("span",{className:"section-title",children:"Vis\xe3o Financeira"}),Object(b.jsxs)(i.a,{children:[Object(b.jsx)(n.a,{lg:7,className:"mb-3",children:Object(b.jsx)(m,{title:"Evolu\xe7\xe3o Financeira Anual",subtitle:"Receita, impostos, contrapartidas e contribui\xe7\xf5es",loading:re,children:Y?Object(b.jsx)(r.a,{options:Y.options,series:Y.series,type:"area",height:320,width:"100%"}):Object(b.jsxs)("div",{className:"dashboard-empty-state",children:[Object(b.jsx)("i",{className:"feather icon-bar-chart-2"}),Object(b.jsx)("p",{children:"Sem dados financeiros dispon\xedveis"})]})})}),Object(b.jsx)(n.a,{lg:5,className:"mb-3",children:Object(b.jsx)(m,{title:"Composi\xe7\xe3o da Receita",subtitle:"Distribui\xe7\xe3o por categoria",loading:re,children:Q?Object(b.jsx)(r.a,{options:Q.options,series:Q.series,type:"donut",height:320,width:"100%"}):Object(b.jsxs)("div",{className:"dashboard-empty-state",children:[Object(b.jsx)("i",{className:"feather icon-pie-chart"}),Object(b.jsx)("p",{children:"Sem dados dispon\xedveis"})]})})})]})]}),G.entidadesReceita&&Object(b.jsxs)("div",{className:"dashboard-section",children:[Object(b.jsx)("span",{className:"section-title",children:"Entidades & Receita por Casino"}),Object(b.jsxs)(i.a,{children:[Object(b.jsx)(n.a,{lg:7,className:"mb-3",children:Object(b.jsx)(m,{title:"Receita Bruta por Entidade",subtitle:"Top casinos por volume",loading:re,children:U?Object(b.jsx)(r.a,{options:Object(s.a)(Object(s.a)({},U.options),{},{xaxis:Object(s.a)(Object(s.a)({},U.options.xaxis),{},{categories:U.categories})}),series:U.series,type:"bar",height:320,width:"100%"}):Object(b.jsxs)("div",{className:"dashboard-empty-state",children:[Object(b.jsx)("i",{className:"feather icon-bar-chart"}),Object(b.jsx)("p",{children:"Sem dados de receita por entidade"})]})})}),Object(b.jsx)(n.a,{lg:5,className:"mb-3",children:Object(b.jsx)(m,{title:"Equipamentos por Entidade",subtitle:"M\xe1quinas, bancas e equipamentos",loading:re,children:X?Object(b.jsx)(r.a,{options:X.options,series:X.series,type:"treemap",height:320,width:"100%"}):Object(b.jsxs)("div",{className:"dashboard-empty-state",children:[Object(b.jsx)("i",{className:"feather icon-grid"}),Object(b.jsx)("p",{children:"Sem dados de equipamentos"})]})})})]})]}),G.processosExclusoes&&Object(b.jsxs)("div",{className:"dashboard-section",children:[Object(b.jsx)("span",{className:"section-title",children:"Processos & Exclus\xf5es"}),Object(b.jsxs)(i.a,{children:[Object(b.jsx)(n.a,{lg:7,className:"mb-3",children:Object(b.jsx)(m,{title:"Processos por M\xeas",subtitle:"Exclus\xe3o vs Auto-exclus\xe3o (\xfaltimos 12 meses)",loading:re,children:Z?Object(b.jsx)(r.a,{options:Z.options,series:Z.series,type:"bar",height:320,width:"100%"}):Object(b.jsxs)("div",{className:"dashboard-empty-state",children:[Object(b.jsx)("i",{className:"feather icon-file-text"}),Object(b.jsx)("p",{children:"Sem dados de processos"})]})})}),Object(b.jsx)(n.a,{lg:5,className:"mb-3",children:Object(b.jsx)(m,{title:"Status dos Processos",subtitle:"Distribui\xe7\xe3o por estado",loading:re,children:$?Object(b.jsx)(r.a,{options:$.options,series:$.series,type:"radialBar",height:320,width:"100%"}):Object(b.jsxs)("div",{className:"dashboard-empty-state",children:[Object(b.jsx)("i",{className:"feather icon-activity"}),Object(b.jsx)("p",{children:"Sem dados de processos"})]})})})]})]}),G.eventosAtividade&&Object(b.jsxs)("div",{className:"dashboard-section",children:[Object(b.jsx)("span",{className:"section-title",children:"Eventos & Atividade"}),Object(b.jsxs)(i.a,{children:[Object(b.jsx)(n.a,{lg:5,className:"mb-3",children:Object(b.jsx)(m,{title:"Eventos por Status",subtitle:"Aprovados, pendentes e recusados",loading:re,children:ee?Object(b.jsx)(r.a,{options:ee.options,series:ee.series,type:"pie",height:320,width:"100%"}):Object(b.jsxs)("div",{className:"dashboard-empty-state",children:[Object(b.jsx)("i",{className:"feather icon-calendar"}),Object(b.jsx)("p",{children:"Sem dados de eventos"})]})})}),Object(b.jsx)(n.a,{lg:7,className:"mb-3",children:Object(b.jsx)(m,{title:"Atividade do Sistema",subtitle:"Registos por m\xf3dulo (\xfaltimos 12 meses)",loading:re,children:te?Object(b.jsx)(r.a,{options:te.options,series:te.series,type:"heatmap",height:320,width:"100%"}):Object(b.jsxs)("div",{className:"dashboard-empty-state",children:[Object(b.jsx)("i",{className:"feather icon-activity"}),Object(b.jsx)("p",{children:"Sem dados de atividade"})]})})})]})]}),G.handpayCasos&&Object(b.jsxs)("div",{className:"dashboard-section",children:[Object(b.jsx)("span",{className:"section-title",children:"Handpay & Casos Suspeitos"}),Object(b.jsxs)(i.a,{children:[Object(b.jsx)(n.a,{lg:7,className:"mb-3",children:Object(b.jsx)(m,{title:"Handpay por Entidade",subtitle:"Valor total e quantidade de registos",loading:re,children:ae?Object(b.jsx)(r.a,{options:ae.options,series:ae.series,type:"bar",height:320,width:"100%"}):Object(b.jsxs)("div",{className:"dashboard-empty-state",children:[Object(b.jsx)("i",{className:"feather icon-credit-card"}),Object(b.jsx)("p",{children:"Sem dados de handpay"})]})})}),Object(b.jsx)(n.a,{lg:5,className:"mb-3",children:Object(b.jsx)(m,{title:"Casos Suspeitos - Evolu\xe7\xe3o",subtitle:"Mensal e acumulado",loading:re,children:se?Object(b.jsx)(r.a,{options:se.options,series:se.series,type:"area",height:320,width:"100%"}):Object(b.jsxs)("div",{className:"dashboard-empty-state",children:[Object(b.jsx)("i",{className:"feather icon-alert-triangle"}),Object(b.jsx)("p",{children:"Sem casos suspeitos registados"})]})})})]})]}),G.orcamento&&Object(b.jsxs)("div",{className:"dashboard-section",children:[Object(b.jsx)("span",{className:"section-title",children:"Or\xe7amento IGJ"}),Object(b.jsxs)(i.a,{children:[Object(b.jsx)(n.a,{lg:7,className:"mb-3",children:Object(b.jsx)(m,{title:"Or\xe7amento vs Despesa",subtitle:"Por projeto/rubrica",loading:re,children:oe?Object(b.jsx)(r.a,{options:oe.options,series:oe.series,type:"bar",height:320,width:"100%"}):Object(b.jsxs)("div",{className:"dashboard-empty-state",children:[Object(b.jsx)("i",{className:"feather icon-book"}),Object(b.jsx)("p",{children:"Sem dados de or\xe7amento"})]})})}),Object(b.jsx)(n.a,{lg:5,className:"mb-3",children:Object(b.jsx)(m,{title:"Taxa de Execu\xe7\xe3o Or\xe7amental",subtitle:"Progresso de execu\xe7\xe3o",loading:re,children:ie?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(r.a,{options:ie.options,series:ie.series,type:"radialBar",height:280,width:"100%"}),Object(b.jsxs)(i.a,{className:"budget-info",children:[Object(b.jsxs)(n.a,{xs:6,children:[Object(b.jsx)("span",{className:"budget-label",children:"Or\xe7amento"}),Object(b.jsx)("span",{className:"budget-value",children:ne(ie.totalOrcamento)})]}),Object(b.jsxs)(n.a,{xs:6,children:[Object(b.jsx)("span",{className:"budget-label",children:"Despesa"}),Object(b.jsx)("span",{className:"budget-value",children:ne(ie.totalDespesa)})]})]})]}):Object(b.jsxs)("div",{className:"dashboard-empty-state",children:[Object(b.jsx)("i",{className:"feather icon-pie-chart"}),Object(b.jsx)("p",{children:"Sem dados de execu\xe7\xe3o"})]})})})]})]})]})]})}}}]);
//# sourceMappingURL=75.b371b8fd.chunk.js.map