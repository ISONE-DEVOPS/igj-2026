(this["webpackJsonpigj-frontend"]=this["webpackJsonpigj-frontend"]||[]).push([[3],{822:function(e,a,t){"use strict";var l=t(0),o=t(814),s=t(404),c=t(403),n=t(812),i=t(7),r=t(32),d=t(24),j=t(1);a.a=e=>{let{generolist:a,estadocivillist:t,glbgeografialist:m,documentolist:u,contactolist:h,uploadpessoa:b,pessoaopenDO:x}=e;const{popUp_alertaOK:O}=Object(d.a)(),[p,f]=Object(l.useState)(!1),[g,v]=Object(l.useState)(""),[N,y]=Object(l.useState)(""),[D,I]=Object(l.useState)(""),[C,E]=Object(l.useState)(""),[S,_]=Object(l.useState)(""),[A,F]=Object(l.useState)(""),[L,T]=Object(l.useState)(""),[P,M]=Object(l.useState)(""),[q,k]=Object(l.useState)(""),[w,G]=Object(l.useState)(""),[R,V]=Object(l.useState)(""),[U,B]=Object(l.useState)(""),[H,J]=Object(l.useState)(""),[K,z]=Object(l.useState)(""),[Q,W]=Object(l.useState)(""),[X,Y]=Object(l.useState)(!1),[Z,$]=Object(l.useState)(!1),[ee,ae]=Object(l.useState)(""),[te,le]=Object(l.useState)(""),[oe,se]=Object(l.useState)("");Object(l.useEffect)(()=>{y(""),I(""),E(""),_(""),F(""),T(""),M(""),k(""),G(""),V(""),B(""),J(""),z(""),W(""),ae(""),le(""),se(""),f(!0),ne("geral"),je([{id:""+Math.random(),tipocontacto:"",contacto:""}]),be([{id:""+Math.random(),tipodocumento:"",numero:"",dataemissao:"",datavalidade:"",anexo:{type:0,file:null}}]),f(x.value)},[x]);const[ce,ne]=Object(l.useState)("geral"),ie="nav-link text-reset",re="nav-link text-reset active";var[de,je]=Object(l.useState)([{id:""+Math.random(),tipocontacto:"",contacto:""}]);const[me,ue]=Object(l.useState)(!1);var[he,be]=Object(l.useState)([{id:""+Math.random(),tipodocumento:"",numero:"",dataemissao:"",datavalidade:"",anexo:{type:0,file:null}}]);const[xe,Oe]=Object(l.useState)(!1);async function pe(e){var a={status:!1,file:null};try{const t=new FormData;t.append("file",e);const l={headers:{"content-type":"multipart/form-data"}},o=await r.a.post("/upload",t,l);a={status:!0,file:o},console.log(o)}catch(t){console.error(t.response),a={status:!1,file:null}}return a}return Object(j.jsxs)(o.a,{size:"lg",show:p,onHide:()=>f(!1),children:[Object(j.jsx)(o.a.Header,{style:{border:"0"},closeButton:!0,children:Object(j.jsx)(o.a.Title,{as:"h5",children:"Criar Pessoal"})}),Object(j.jsxs)("ul",{className:"nav nav-tabs profile-tabs nav-fill",id:"myTab",role:"tablist",children:[Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsxs)(i.b,{to:"#",className:"geral"===ce?re:ie,onClick:()=>{ne("geral")},id:"profile-tab",children:[Object(j.jsx)("i",{className:"fas fa-user mr-2"}),"Perfil"]})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsxs)(i.b,{to:"#",className:"contactos"===ce?re:ie,onClick:()=>{ne("contactos")},id:"contact-tab",children:[Object(j.jsx)("i",{className:"fas fa-phone-alt mr-2"}),"Contactos"]})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsxs)(i.b,{to:"#",className:"documentos"===ce?re:ie,onClick:()=>{ne("documentos")},id:"contact-tab",children:[Object(j.jsx)("i",{className:"fas fa-file-alt mr-2"}),"Documentos"]})})]}),Object(j.jsxs)(o.a.Body,{style:"documentos"===ce?{}:{display:"none"},children:[Object(j.jsx)(s.a,{style:{display:"flex",justifyContent:"flex-end"},sm:12,children:Object(j.jsx)(c.a,{onClick:()=>{be(he.concat([{id:""+Math.random(),tipodocumento:"",numero:"",dataemissao:"",datavalidade:"",anexo:{type:0,file:null}}]))},variant:"primary",children:"+"})}),he.map(e=>{var a;return Object(j.jsxs)(n.a,{style:{marginBottom:"12px"},children:[Object(j.jsx)(s.a,{sm:10,children:Object(j.jsxs)(n.a,{children:[Object(j.jsx)(s.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"Phone",children:["Tipo de Documentos ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{onChange:a=>{!function(e,a){"cni"===u.find(a=>a.ID===e).DESIG.toLowerCase()?$(!0):$(!1);const t=he.findIndex(e=>e.id===a);he[t]={id:a,tipodocumento:e,numero:he[t].numero,dataemissao:he[t].dataemissao,datavalidade:he[t].datavalidade,anexo:he[t].anexo},Oe(!0),be(he.concat([]))}(a.target.value,e.id)},className:"form-control",id:"perfil",required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),u.map(e=>Object(j.jsx)("option",{value:e.ID,children:e.DESIG},e.ID))]})]})}),Object(j.jsx)(s.a,{sm:3,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["N\xfamero ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsx)("input",{onChange:a=>{!function(e,a){const t=he.findIndex(e=>e.id===a);he[t]={id:a,numero:e,tipodocumento:he[t].tipodocumento,dataemissao:he[t].dataemissao,datavalidade:he[t].datavalidade,anexo:he[t].anexo},Oe(!0),be(he.concat([]))}(a.target.value,e.id)},type:"text",className:"form-control"})]})}),Object(j.jsxs)("div",{className:"sm-2 paddinhtop28OnlyPC",children:[Object(j.jsxs)("label",{htmlFor:"anexarcriar"+e.id,className:"btn",style:{backgroundColor:"#d2b32a",color:"#fff"},children:[null==(null===e||void 0===e||null===(a=e.anexo)||void 0===a?void 0:a.file)?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("i",{className:"feather icon-download"}),Object(j.jsx)(j.Fragment,{children:" Anexar"})]}):"Anexado"," "]}),Object(j.jsx)("input",{id:"anexarcriar"+e.id,onChange:a=>function(e,a){const t=he.findIndex(e=>e.id===a);console.log(he[t]),console.log(a),""!=he[t].tipodocumento&&""!=he[t].numero||O("Preencha o campos obrigat\xf3rios"),he[t]={id:a,tipodocumento:he[t].tipodocumento,dataemissao:he[t].dataemissao,datavalidade:he[t].datavalidade,numero:he[t].numero,anexo:{type:2,file:e}},Oe(!0),be(he.concat([]))}(a.target.files[0],e.id),accept:"image/x-png,image/jpeg",style:{display:"none"},type:"file"})]}),Z?null:Object(j.jsx)(s.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsx)("label",{className:"floating-label",htmlFor:"date",children:"Data de Emiss\xe3o"}),Object(j.jsx)("input",{onChange:a=>{!function(e,a){const t=he.findIndex(e=>e.id===a);he[t]={id:a,dataemissao:e,numero:he[t].numero,tipodocumento:he[t].tipodocumento,datavalidade:he[t].datavalidade,anexo:he[t].anexo},Oe(!0),be(he.concat([]))}(a.target.value,e.id)},type:"date",className:"form-control"})]})}),Object(j.jsx)(s.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsx)("label",{className:"floating-label",htmlFor:"text",children:"Data de Validade"}),Object(j.jsx)("input",{onChange:a=>{!function(e,a){const t=he.findIndex(e=>e.id===a);he[t]={id:a,datavalidade:e,numero:he[t].numero,tipodocumento:he[t].tipodocumento,dataemissao:he[t].dataemissao,anexo:he[t].anexo},Oe(!0),be(he.concat([]))}(a.target.value,e.id)},type:"date",className:"form-control"})]})})]})}),he.length>1?Object(j.jsx)("div",{className:"paddinhtop66OnlyPC sm-2",children:Object(j.jsx)(c.a,{onClick:()=>function(e){if(he.length>1){const t=he.findIndex(a=>a.id===e);if(t>-1){var a=he;a.splice(t,1),be(a.concat([])),Oe(!0)}}}(e.id),variant:"danger",children:Object(j.jsx)("i",{className:"feather icon-trash-2"})})}):null]},e.id)})]}),Object(j.jsxs)(o.a.Body,{style:"contactos"===ce?{}:{display:"none"},children:[Object(j.jsx)(s.a,{style:{display:"flex",justifyContent:"flex-end"},sm:12,children:Object(j.jsx)(c.a,{onClick:()=>{je(de.concat([{id:""+Math.random(),tipocontacto:"",contacto:""}]))},variant:"primary",children:"+"})}),de.map(e=>Object(j.jsxs)(n.a,{style:{marginBottom:"12px"},children:[Object(j.jsx)(s.a,{sm:5,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"Phone",children:["Tipo de Contacto ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{onChange:a=>{!function(e,a){const t=de.findIndex(e=>e.id===a);de[t]={id:a,tipocontacto:e,contacto:de[t].contacto},ue(!0),je(de.concat([]))}(a.target.value,e.id)},className:"form-control",id:"perfil",required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),h.map(e=>Object(j.jsx)("option",{value:e.ID,children:e.DESIG},e.ID))]})]})}),Object(j.jsx)(s.a,{sm:5,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["Contacto ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsx)("input",{maxLength:"128",onChange:a=>{!function(e,a){const t=de.findIndex(e=>e.id===a);de[t]={id:a,contacto:e,tipocontacto:de[t].tipocontacto},ue(!0),je(de.concat([]))}(a.target.value,e.id)},type:"text",className:"form-control"})]})}),de.length>1?Object(j.jsx)("div",{className:"sm-2 paddinhtop28OnlyPC",children:Object(j.jsx)(c.a,{onClick:()=>function(e){if(de.length>1){const t=de.findIndex(a=>a.id===e);if(t>-1){var a=de;a.splice(t,1),je(a.concat([])),ue(!0)}}}(e.id),variant:"danger",children:Object(j.jsx)("i",{className:"feather icon-trash-2"})})}):null]},e.id))]}),Object(j.jsx)(o.a.Body,{style:"geral"===ce?{}:{display:"none"},children:Object(j.jsx)("form",{id:"criarpessoa",onSubmit:async function(e){e.preventDefault(),console.log(D);const a={NACIONALIDADE_ID:D,LOCALIDADE_ID:C,PR_ESTADO_CIVIL_ID:S,PR_GENERO_ID:A,NOME:L,DT_NASC:P,ALCUNHA:q,NOME_PAI:w,NOME_MAE:R,OBS:U,ENDERECO:H,ENDERECO_COORD:K,NIF:X?"":Q};console.log(a);try{const e=await r.a.post("/sgigjpessoa",a);if("200"==e.status){for(let a=0;a<de.length;a++)if(""!=de[a].tipocontacto&&""!=de[a].contacto){console.log(de);const t={PESSOA_ID:e.data.ID,PR_CONTACTO_TP_ID:de[a].tipocontacto,CONTACTO:de[a].contacto};try{await r.a.post("/sgigjrelcontacto",t)}catch(l){console.error(l.response)}}for(let a=0;a<he.length;a++)if(""!=he[a].tipodocumento&&""!=he[a].numero){console.log(he);var t="";if("2"==he[a].anexo.type){t=(await pe(he[a].anexo.file)).file.data}console.log(t);const o={PESSOA_ID:e.data.ID,PR_DOCUMENTO_TP_ID:he[a].tipodocumento,NUMERO:he[a].numero,DOC_URL:t,DT_EMISSAO:he[a].dataemissao,DT_VALIDADE:he[a].datavalidade};try{await r.a.post("/sgigjreldocumento",o)}catch(l){console.error(l.response)}}b(),f(!1)}}catch(l){try{console.error(l),console.error(l.response),"3058"==l.response.data.code&&O("Esse NIF j\xe1 existe")}catch(o){console.error(o)}}},children:Object(j.jsxs)(n.a,{children:[Object(j.jsx)(s.a,{sm:3,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["C\xf3digo ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsx)("input",{disabled:!0,value:"0003",type:"text",className:"form-control",id:"Name"})]})}),Object(j.jsx)(s.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"Email",children:["Nome ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsx)("input",{maxLength:"256",type:"text",onChange:e=>{T(e.target.value)},className:"form-control",id:"Nome ",placeholder:"Nome",required:!0})]})}),Object(j.jsx)(s.a,{sm:3,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsx)("label",{className:"floating-label",htmlFor:"text",children:"Alcunha"}),Object(j.jsx)("input",{type:"text",maxLength:"75",onChange:e=>{k(e.target.value)},className:"form-control",id:"alcunga",placeholder:"Alcunha..."})]})}),Object(j.jsx)(s.a,{sm:4,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"Phone",children:["G\xeanero ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{className:"form-control",onChange:e=>{F(e.target.value)},id:"perfil",required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),a.map(e=>Object(j.jsx)("option",{value:e.ID,children:e.DESIG},e.ID))]})]})}),Object(j.jsx)(s.a,{sm:4,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"Phone",children:["Estado civil ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{className:"form-control",onChange:e=>{_(e.target.value)},id:"perfil",required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),t.map(e=>Object(j.jsx)("option",{value:e.ID,children:e.DESIG},e.ID))]})]})}),Object(j.jsx)(s.a,{sm:4,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"date",children:["Data Nascimento ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsx)("input",{type:"date",onChange:e=>{M(e.target.value)},className:"form-control",id:"data",required:!0})]})}),Object(j.jsx)(s.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsx)("label",{className:"floating-label",htmlFor:"text",children:"Nome Pai"}),Object(j.jsx)("input",{type:"text",maxLength:"128",onChange:e=>{G(e.target.value)},className:"form-control",id:"pai",placeholder:"Nome Pai..."})]})}),Object(j.jsx)(s.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsx)("label",{className:"floating-label",htmlFor:"text",children:"Nome M\xe3e"}),Object(j.jsx)("input",{type:"text",maxLength:"128",onChange:e=>{V(e.target.value)},className:"form-control",id:"mae",placeholder:"Nome Mae..."})]})}),Object(j.jsx)(s.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["Nacionalidade ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{onChange:e=>{I(e.target.value)},className:"form-control",id:"perfil",required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),m.map(e=>"-1"==e.NIVEL_DETALHE?Object(j.jsx)("option",{value:e.ID,children:e.NACIONALIDADE},e.ID):null)]})]})}),Object(j.jsx)(s.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsx)("label",{className:"floating-label",htmlFor:"text",children:"Coordenadas"}),Object(j.jsx)("input",{type:"text",maxLength:"50",onChange:e=>{z(e.target.value)},className:"form-control",id:"coordenada",placeholder:"Endereco Coord..."})]})}),Object(j.jsx)("div",{className:"col-sm-6",children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsx)("label",{className:"floating-label",htmlFor:"Address",children:"Endere\xe7o"}),Object(j.jsx)("textarea",{className:"form-control",maxLength:"64000",onChange:e=>{J(e.target.value)},id:"endereco",rows:"3",placeholder:"Endere\xe7o..."})]})}),Object(j.jsx)(s.a,{sm:6,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["NIF ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),X?Object(j.jsx)("input",{readOnly:"readOnly",type:"text",maxLength:"9",onChange:e=>{W(e.target.value)},className:"form-control",id:"nif",placeholder:"NIF..."}):Object(j.jsx)("input",{type:"text",maxLength:"9",required:!0,onChange:e=>{W(e.target.value)},className:"form-control",id:"nif",placeholder:"NIF..."}),Object(j.jsxs)("div",{className:" fill mt-2 input-box",children:[Object(j.jsx)("input",{type:"checkbox",name:"",id:"",onChange:e=>Y(e.target.checked)}),Object(j.jsx)("label",{className:"floating-label ml-3",htmlFor:"Name",children:"Sem NIF "})]})]})}),Object(j.jsx)(s.a,{sm:3,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["Ilha ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{className:"form-control",id:"perfil",onChange:e=>{var a;a=e.target.value,ae(a),le(""),se(""),E("")},required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),m.map(e=>"2"==e.NIVEL_DETALHE?Object(j.jsx)("option",{value:e.ID,children:e.ILHA},e.ID):null)]})]})}),Object(j.jsx)(s.a,{sm:3,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["Concelho ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{className:"form-control",id:"perfil",onChange:e=>{var a;a=e.target.value,le(a),se(""),E("")},required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),m.map(e=>"3"==e.NIVEL_DETALHE&&e.GLB_GEOG_ID==ee?Object(j.jsx)("option",{value:e.ID,children:e.CONCELHO},e.ID):null)]})]})}),Object(j.jsx)(s.a,{sm:3,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["Fregu\xeasia ",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{className:"form-control",id:"perfil",onChange:e=>{var a;a=e.target.value,se(a),E("")},required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),m.map(e=>"4"==e.NIVEL_DETALHE&&e.GLB_GEOG_ID==te?Object(j.jsx)("option",{value:e.ID,children:e.FREGUESIA},e.ID):null)]})]})}),Object(j.jsx)(s.a,{sm:3,children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsxs)("label",{className:"floating-label",htmlFor:"text",children:["Localidade",Object(j.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(j.jsxs)("select",{onChange:e=>{E(e.target.value)},className:"form-control",id:"perfil",required:!0,"aria-required":"true",children:[Object(j.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),m.map(e=>"5"==e.NIVEL_DETALHE&&e.GLB_GEOG_ID==oe?Object(j.jsx)("option",{value:e.ID,children:e.NOME},e.ID):null)]})]})}),Object(j.jsx)("div",{className:"col-sm-12",children:Object(j.jsxs)("div",{className:"form-group fill",children:[Object(j.jsx)("label",{className:"floating-label",htmlFor:"Address",children:"Obs"}),Object(j.jsx)("textarea",{className:"form-control",maxLength:"64000",onChange:e=>{B(e.target.value)},id:"Address",rows:"3",placeholder:"Obs..."})]})})]})})}),Object(j.jsxs)(o.a.Footer,{children:[Object(j.jsx)(c.a,{variant:"danger",onClick:()=>f(!1),children:"Fechar"}),Object(j.jsx)(c.a,{type:"submit",form:"criarpessoa",variant:"primary",children:"Guardar"})]})]})}},825:function(e,a,t){"use strict";var l=t(0),o=t(404),s=t(403),c=t(812),n=t(818),i=t(32),r=t(24),d=t(1);a.a=e=>{let{documentolist:a,list:t,save:j,item:m,onSendData:u,hidden:h,required:b}=e;const{popUp_alertaOK:x}=Object(r.a)(),[O,p]=Object(l.useState)(!1);var[f,g]=Object(l.useState)([{id:""+Math.random(),tipodocumento:"",numero:"",dataemissao:"",datavalidade:"",anexo:{type:0,file:null}}]);async function v(e){var a={status:!1,file:null};try{const t=new FormData;t.append("file",e);const l={headers:{"content-type":"multipart/form-data"}},o=await i.a.post("/upload",t,l);a={status:!0,file:o},console.log(o)}catch(t){console.error(t),a={status:!1,file:null}}return a}Object(l.useEffect)(()=>{if(0==t.length)p(!0),g([{id:""+Math.random(),tipodocumento:"",numero:"",dataemissao:"",datavalidade:"",anexo:{type:0,file:null}}]);else{p(!1);let e=[];for(let a=0;a<t.length;a++){const l=null!=t[a].DT_EMISSAO?t[a].DT_EMISSAO.substring(0,10):"",o=null!=t[a].DT_VALIDADE?t[a].DT_VALIDADE.substring(0,10):"";e.push({id:""+t[a].ID,tipodocumento:t[a].PR_DOCUMENTO_TP_ID,numero:t[a].NUMERO,dataemissao:l,datavalidade:o,anexo:{type:1,file:t[a].DOC_URL}})}g(e.concat([])),u&&u(f)}console.log(t)},[t]),Object(l.useEffect)(()=>{console.log("ssssssssssssss"+j),""!=m.ID&&null!=m.ID&&async function(){if(1==O){const t=await i.a.delete("/sgigjreldocumento/0?"+(null===m||void 0===m?void 0:m.ENTIDADE)+"="+(null===m||void 0===m?void 0:m.ID));if(console.log(t.status),"200"==t.status||"204"==t.status){console.log(t);for(let t=0;t<f.length;t++)if(""!=f[t].tipodocumento&&(!h&&""!=f[t].numero||h)){console.log(f);var e="";"1"==f[t].anexo.type&&(e=f[t].anexo.file),"2"==f[t].anexo.type&&(e=(await v(f[t].anexo.file)).file.data),console.log(e);const l={[null===m||void 0===m?void 0:m.ENTIDADE]:null===m||void 0===m?void 0:m.ID,PR_DOCUMENTO_TP_ID:f[t].tipodocumento,NUMERO:h?1:f[t].numero,DOC_URL:e,DT_EMISSAO:f[t].dataemissao,DT_VALIDADE:f[t].datavalidade};try{await i.a.post("/sgigjreldocumento",l)}catch(a){console.error(a.response)}}}}}()},[j]);const[N,y]=Object(l.useState)(0);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(o.a,{style:{display:"flex",justifyContent:"flex-end"},sm:12,children:Object(d.jsx)(s.a,{onClick:()=>(g(f.concat([{id:""+Math.random(),tipodocumento:"",numero:"",dataemissao:"",datavalidade:"",anexo:{type:0,file:null}}])),void(u&&u(f))),variant:"primary",children:"+"})}),f.map((e,t)=>{var l;if(t==N)return Object(d.jsxs)(c.a,{style:{marginBottom:"12px"},children:[Object(d.jsx)(o.a,{sm:10,children:Object(d.jsxs)(c.a,{children:[Object(d.jsx)(o.a,{sm:6,children:Object(d.jsxs)("div",{className:"form-group fill",children:[Object(d.jsxs)("label",{className:"floating-label",htmlFor:"Phone",children:["Tipo de Documentos"," ",b&&Object(d.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(d.jsxs)("select",{defaultValue:e.tipodocumento,onChange:a=>{!function(e,a){const t=f.findIndex(e=>e.id===a);f[t]={id:a,tipodocumento:e,numero:f[t].numero,dataemissao:f[t].dataemissao,datavalidade:f[t].datavalidade,anexo:f[t].anexo},p(!0),g(f.concat([])),u&&u(f)}(a.target.value,e.id)},className:"form-control",id:"perfil",required:b,"aria-required":"true",children:[Object(d.jsx)("option",{hidden:!0,value:"",children:"--- Selecione ---"}),a.map(e=>Object(d.jsx)("option",{value:e.ID,children:e.DESIG},e.ID))]})]})}),!h&&Object(d.jsx)(o.a,{sm:3,children:Object(d.jsxs)("div",{className:"form-group fill",children:[Object(d.jsx)("label",{className:"floating-label",htmlFor:"text",children:"N\xfamero   "}),Object(d.jsx)("input",{defaultValue:e.numero,onChange:a=>{!function(e,a){const t=f.findIndex(e=>e.id===a);f[t]={id:a,numero:e,tipodocumento:f[t].tipodocumento,dataemissao:f[t].dataemissao,datavalidade:f[t].datavalidade,anexo:f[t].anexo},p(!0),g(f.concat([])),u&&u(f)}(a.target.value,e.id)},type:"text",className:"form-control"})]})}),Object(d.jsxs)("div",{className:"sm-2 paddinhtop28OnlyPC",children:[Object(d.jsxs)("label",{htmlFor:"anexareditar"+e.id,className:"btn",style:{backgroundColor:"#d2b32a",color:"#fff"},children:[null==(null===e||void 0===e||null===(l=e.anexo)||void 0===l?void 0:l.file)?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("i",{className:"feather icon-download"}),Object(d.jsx)(d.Fragment,{children:" Anexar"})]}):"Anexado"," "]}),Object(d.jsx)("input",{id:"anexareditar"+e.id,style:{display:"none"},onChange:a=>function(e,a,t){const l=f.findIndex(e=>e.id===a);if(console.log(f[l]),console.log(a),""==f[l].tipodocumento)return x("Preencha o campos obrigat\xf3rios"),void(t.target.value="");f[l]={id:a,tipodocumento:f[l].tipodocumento,dataemissao:f[l].dataemissao,datavalidade:f[l].datavalidade,numero:f[l].numero,anexo:{type:2,file:e}},p(!0),g(f.concat([])),u&&u(f)}(a.target.files[0],e.id,a),accept:h?void 0:"image/x-png,image/jpeg,.mp4",type:"file"})]}),!h&&Object(d.jsx)(o.a,{sm:6,children:Object(d.jsxs)("div",{className:"form-group fill",children:[Object(d.jsx)("label",{className:"floating-label",htmlFor:"date",children:"Data de Emiss\xe3o"}),Object(d.jsx)("input",{defaultValue:e.dataemissao,onChange:a=>{!function(e,a){const t=f.findIndex(e=>e.id===a);f[t]={id:a,dataemissao:e,numero:f[t].numero,tipodocumento:f[t].tipodocumento,datavalidade:f[t].datavalidade,anexo:f[t].anexo},p(!0),g(f.concat([])),u&&u(f)}(a.target.value,e.id)},type:"date",className:"form-control"})]})}),!h&&Object(d.jsx)(o.a,{sm:6,children:Object(d.jsxs)("div",{className:"form-group fill",children:[Object(d.jsx)("label",{className:"floating-label",htmlFor:"text",children:"Data de Validade"}),Object(d.jsx)("input",{defaultValue:e.datavalidade,onChange:a=>{!function(e,a){const t=f.findIndex(e=>e.id===a);f[t]={id:a,datavalidade:e,numero:f[t].numero,tipodocumento:f[t].tipodocumento,dataemissao:f[t].dataemissao,anexo:f[t].anexo},p(!0),g(f.concat([])),u&&u(f)}(a.target.value,e.id)},type:"date",className:"form-control"})]})})]})}),f.length>1?Object(d.jsx)("div",{className:"paddinhtop66OnlyPC sm-2",children:Object(d.jsx)(s.a,{onClick:()=>function(e){if(f.length>1){const t=f.findIndex(a=>a.id===e);if(t>-1){var a=f;a.splice(t,1),g(a.concat([])),u&&u(f),p(!0)}}}(e.id),variant:"danger",children:Object(d.jsx)("i",{className:"feather icon-trash-2"})})}):null]},e.id)}),Object(d.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(d.jsxs)(n.a,{className:"justify-content-end",children:[Object(d.jsx)(n.a.First,{onClick:()=>y(0)}),Object(d.jsx)(n.a.Prev,{onClick:()=>y(N>0?N-1:0)}),Object(d.jsx)("span",{style:{display:"flex",padding:"8px 20px",alignItems:"center",justifyContent:"center"},children:N+1}),Object(d.jsx)(n.a.Next,{onClick:()=>y(N>=f.length-1?f.length-1:N+1)}),Object(d.jsx)(n.a.Last,{onClick:()=>y(f.length-1)})]})})]})}}}]);
//# sourceMappingURL=3.93640ff2.chunk.js.map